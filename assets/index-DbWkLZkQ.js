(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function i(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=i(l);fetch(l.href,o)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function wo(t){const e=Object.create(null);for(const i of t.split(","))e[i]=1;return i=>i in e}const se={},Jr=[],$e=()=>{},Mu=()=>!1,Ji=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),So=t=>t.startsWith("onUpdate:"),Ae=Object.assign,xo=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},Iu=Object.prototype.hasOwnProperty,te=(t,e)=>Iu.call(t,e),Vt=Array.isArray,Zr=t=>Zi(t)==="[object Map]",Du=t=>Zi(t)==="[object Set]",qt=t=>typeof t=="function",be=t=>typeof t=="string",Jn=t=>typeof t=="symbol",me=t=>t!==null&&typeof t=="object",rc=t=>(me(t)||qt(t))&&qt(t.then)&&qt(t.catch),Nu=Object.prototype.toString,Zi=t=>Nu.call(t),Gu=t=>Zi(t).slice(8,-1),Lu=t=>Zi(t)==="[object Object]",Co=t=>be(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ti=wo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ts=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},Bu=/-(\w)/g,wn=ts(t=>t.replace(Bu,(e,i)=>i?i.toUpperCase():"")),Uu=/\B([A-Z])/g,Gn=ts(t=>t.replace(Uu,"-$1").toLowerCase()),ic=ts(t=>t.charAt(0).toUpperCase()+t.slice(1)),Us=ts(t=>t?`on${ic(t)}`:""),bn=(t,e)=>!Object.is(t,e),Ks=(t,...e)=>{for(let i=0;i<t.length;i++)t[i](...e)},sc=(t,e,i,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:i})},Ku=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Pa;const es=()=>Pa||(Pa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Po(t){if(Vt(t)){const e={};for(let i=0;i<t.length;i++){const s=t[i],l=be(s)?Hu(s):Po(s);if(l)for(const o in l)e[o]=l[o]}return e}else if(be(t)||me(t))return t}const ju=/;(?![^(]*\))/g,qu=/:([^]+)/,Vu=/\/\*[^]*?\*\//g;function Hu(t){const e={};return t.replace(Vu,"").split(ju).forEach(i=>{if(i){const s=i.split(qu);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function To(t){let e="";if(be(t))e=t;else if(Vt(t))for(let i=0;i<t.length;i++){const s=To(t[i]);s&&(e+=s+" ")}else if(me(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const Wu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zu=wo(Wu);function oc(t){return!!t||t===""}/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Be;class Yu{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Be,!e&&Be&&(this.index=(Be.scopes||(Be.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].pause();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].resume();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].resume()}}run(e){if(this._active){const i=Be;try{return Be=this,e()}finally{Be=i}}}on(){Be=this}off(){Be=this.parent}stop(e){if(this._active){this._active=!1;let i,s;for(i=0,s=this.effects.length;i<s;i++)this.effects[i].stop();for(this.effects.length=0,i=0,s=this.cleanups.length;i<s;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,s=this.scopes.length;i<s;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const l=this.parent.scopes.pop();l&&l!==this&&(this.parent.scopes[this.index]=l,l.index=this.index)}this.parent=void 0}}}function $u(){return Be}let ie;const js=new WeakSet;class ac{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Be&&Be.active&&Be.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,js.has(this)&&(js.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||cc(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ta(this),uc(this);const e=ie,i=Ke;ie=this,Ke=!0;try{return this.fn()}finally{hc(this),ie=e,Ke=i,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ro(e);this.deps=this.depsTail=void 0,Ta(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?js.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){oo(this)&&this.run()}get dirty(){return oo(this)}}let lc=0,ei,ni;function cc(t,e=!1){if(t.flags|=8,e){t.next=ni,ni=t;return}t.next=ei,ei=t}function Eo(){lc++}function Ao(){if(--lc>0)return;if(ni){let e=ni;for(ni=void 0;e;){const i=e.next;e.next=void 0,e.flags&=-9,e=i}}let t;for(;ei;){let e=ei;for(ei=void 0;e;){const i=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=i}}if(t)throw t}function uc(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function hc(t){let e,i=t.depsTail,s=i;for(;s;){const l=s.prevDep;s.version===-1?(s===i&&(i=l),Ro(s),Xu(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=l}t.deps=e,t.depsTail=i}function oo(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(fc(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function fc(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===oi))return;t.globalVersion=oi;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!oo(t)){t.flags&=-3;return}const i=ie,s=Ke;ie=t,Ke=!0;try{uc(t);const l=t.fn(t._value);(e.version===0||bn(l,t._value))&&(t._value=l,e.version++)}catch(l){throw e.version++,l}finally{ie=i,Ke=s,hc(t),t.flags&=-3}}function Ro(t,e=!1){const{dep:i,prevSub:s,nextSub:l}=t;if(s&&(s.nextSub=l,t.prevSub=void 0),l&&(l.prevSub=s,t.nextSub=void 0),i.subs===t&&(i.subs=s,!s&&i.computed)){i.computed.flags&=-5;for(let o=i.computed.deps;o;o=o.nextDep)Ro(o,!0)}!e&&!--i.sc&&i.map&&i.map.delete(i.key)}function Xu(t){const{prevDep:e,nextDep:i}=t;e&&(e.nextDep=i,t.prevDep=void 0),i&&(i.prevDep=e,t.nextDep=void 0)}let Ke=!0;const dc=[];function Sn(){dc.push(Ke),Ke=!1}function xn(){const t=dc.pop();Ke=t===void 0?!0:t}function Ta(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const i=ie;ie=void 0;try{e()}finally{ie=i}}}let oi=0;class Qu{constructor(e,i){this.sub=e,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ko{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ie||!Ke||ie===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==ie)i=this.activeLink=new Qu(ie,this),ie.deps?(i.prevDep=ie.depsTail,ie.depsTail.nextDep=i,ie.depsTail=i):ie.deps=ie.depsTail=i,gc(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const s=i.nextDep;s.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=s),i.prevDep=ie.depsTail,i.nextDep=void 0,ie.depsTail.nextDep=i,ie.depsTail=i,ie.deps===i&&(ie.deps=s)}return i}trigger(e){this.version++,oi++,this.notify(e)}notify(e){Eo();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Ao()}}}function gc(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)gc(s)}const i=t.dep.subs;i!==t&&(t.prevSub=i,i&&(i.nextSub=t)),t.dep.subs=t}}const ao=new WeakMap,Dn=Symbol(""),lo=Symbol(""),ai=Symbol("");function Te(t,e,i){if(Ke&&ie){let s=ao.get(t);s||ao.set(t,s=new Map);let l=s.get(i);l||(s.set(i,l=new ko),l.map=s,l.key=i),l.track()}}function sn(t,e,i,s,l,o){const a=ao.get(t);if(!a){oi++;return}const c=h=>{h&&h.trigger()};if(Eo(),e==="clear")a.forEach(c);else{const h=Vt(t),g=h&&Co(i);if(h&&i==="length"){const f=Number(s);a.forEach((b,x)=>{(x==="length"||x===ai||!Jn(x)&&x>=f)&&c(b)})}else switch((i!==void 0||a.has(void 0))&&c(a.get(i)),g&&c(a.get(ai)),e){case"add":h?g&&c(a.get("length")):(c(a.get(Dn)),Zr(t)&&c(a.get(lo)));break;case"delete":h||(c(a.get(Dn)),Zr(t)&&c(a.get(lo)));break;case"set":Zr(t)&&c(a.get(Dn));break}}Ao()}function Hn(t){const e=Zt(t);return e===t?e:(Te(e,"iterate",ai),je(t)?e:e.map(Oe))}function Oo(t){return Te(t=Zt(t),"iterate",ai),t}const Ju={__proto__:null,[Symbol.iterator](){return qs(this,Symbol.iterator,Oe)},concat(...t){return Hn(this).concat(...t.map(e=>Vt(e)?Hn(e):e))},entries(){return qs(this,"entries",t=>(t[1]=Oe(t[1]),t))},every(t,e){return Ze(this,"every",t,e,void 0,arguments)},filter(t,e){return Ze(this,"filter",t,e,i=>i.map(Oe),arguments)},find(t,e){return Ze(this,"find",t,e,Oe,arguments)},findIndex(t,e){return Ze(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Ze(this,"findLast",t,e,Oe,arguments)},findLastIndex(t,e){return Ze(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Ze(this,"forEach",t,e,void 0,arguments)},includes(...t){return Vs(this,"includes",t)},indexOf(...t){return Vs(this,"indexOf",t)},join(t){return Hn(this).join(t)},lastIndexOf(...t){return Vs(this,"lastIndexOf",t)},map(t,e){return Ze(this,"map",t,e,void 0,arguments)},pop(){return lr(this,"pop")},push(...t){return lr(this,"push",t)},reduce(t,...e){return Ea(this,"reduce",t,e)},reduceRight(t,...e){return Ea(this,"reduceRight",t,e)},shift(){return lr(this,"shift")},some(t,e){return Ze(this,"some",t,e,void 0,arguments)},splice(...t){return lr(this,"splice",t)},toReversed(){return Hn(this).toReversed()},toSorted(t){return Hn(this).toSorted(t)},toSpliced(...t){return Hn(this).toSpliced(...t)},unshift(...t){return lr(this,"unshift",t)},values(){return qs(this,"values",Oe)}};function qs(t,e,i){const s=Oo(t),l=s[e]();return s!==t&&!je(t)&&(l._next=l.next,l.next=()=>{const o=l._next();return o.value&&(o.value=i(o.value)),o}),l}const Zu=Array.prototype;function Ze(t,e,i,s,l,o){const a=Oo(t),c=a!==t&&!je(t),h=a[e];if(h!==Zu[e]){const b=h.apply(t,o);return c?Oe(b):b}let g=i;a!==t&&(c?g=function(b,x){return i.call(this,Oe(b),x,t)}:i.length>2&&(g=function(b,x){return i.call(this,b,x,t)}));const f=h.call(a,g,s);return c&&l?l(f):f}function Ea(t,e,i,s){const l=Oo(t);let o=i;return l!==t&&(je(t)?i.length>3&&(o=function(a,c,h){return i.call(this,a,c,h,t)}):o=function(a,c,h){return i.call(this,a,Oe(c),h,t)}),l[e](o,...s)}function Vs(t,e,i){const s=Zt(t);Te(s,"iterate",ai);const l=s[e](...i);return(l===-1||l===!1)&&Do(i[0])?(i[0]=Zt(i[0]),s[e](...i)):l}function lr(t,e,i=[]){Sn(),Eo();const s=Zt(t)[e].apply(t,i);return Ao(),xn(),s}const th=wo("__proto__,__v_isRef,__isVue"),pc=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Jn));function eh(t){Jn(t)||(t=String(t));const e=Zt(this);return Te(e,"has",t),e.hasOwnProperty(t)}class mc{constructor(e=!1,i=!1){this._isReadonly=e,this._isShallow=i}get(e,i,s){if(i==="__v_skip")return e.__v_skip;const l=this._isReadonly,o=this._isShallow;if(i==="__v_isReactive")return!l;if(i==="__v_isReadonly")return l;if(i==="__v_isShallow")return o;if(i==="__v_raw")return s===(l?o?hh:bc:o?_c:vc).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const a=Vt(e);if(!l){let h;if(a&&(h=Ju[i]))return h;if(i==="hasOwnProperty")return eh}const c=Reflect.get(e,i,Ee(e)?e:s);return(Jn(i)?pc.has(i):th(i))||(l||Te(e,"get",i),o)?c:Ee(c)?a&&Co(i)?c:c.value:me(c)?l?wc(c):Mo(c):c}}class yc extends mc{constructor(e=!1){super(!1,e)}set(e,i,s,l){let o=e[i];if(!this._isShallow){const h=Nn(o);if(!je(s)&&!Nn(s)&&(o=Zt(o),s=Zt(s)),!Vt(e)&&Ee(o)&&!Ee(s))return h?!1:(o.value=s,!0)}const a=Vt(e)&&Co(i)?Number(i)<e.length:te(e,i),c=Reflect.set(e,i,s,Ee(e)?e:l);return e===Zt(l)&&(a?bn(s,o)&&sn(e,"set",i,s):sn(e,"add",i,s)),c}deleteProperty(e,i){const s=te(e,i);e[i];const l=Reflect.deleteProperty(e,i);return l&&s&&sn(e,"delete",i,void 0),l}has(e,i){const s=Reflect.has(e,i);return(!Jn(i)||!pc.has(i))&&Te(e,"has",i),s}ownKeys(e){return Te(e,"iterate",Vt(e)?"length":Dn),Reflect.ownKeys(e)}}class nh extends mc{constructor(e=!1){super(!0,e)}set(e,i){return!0}deleteProperty(e,i){return!0}}const rh=new yc,ih=new nh,sh=new yc(!0);const co=t=>t,Gi=t=>Reflect.getPrototypeOf(t);function oh(t,e,i){return function(...s){const l=this.__v_raw,o=Zt(l),a=Zr(o),c=t==="entries"||t===Symbol.iterator&&a,h=t==="keys"&&a,g=l[t](...s),f=i?co:e?uo:Oe;return!e&&Te(o,"iterate",h?lo:Dn),{next(){const{value:b,done:x}=g.next();return x?{value:b,done:x}:{value:c?[f(b[0]),f(b[1])]:f(b),done:x}},[Symbol.iterator](){return this}}}}function Li(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ah(t,e){const i={get(l){const o=this.__v_raw,a=Zt(o),c=Zt(l);t||(bn(l,c)&&Te(a,"get",l),Te(a,"get",c));const{has:h}=Gi(a),g=e?co:t?uo:Oe;if(h.call(a,l))return g(o.get(l));if(h.call(a,c))return g(o.get(c));o!==a&&o.get(l)},get size(){const l=this.__v_raw;return!t&&Te(Zt(l),"iterate",Dn),Reflect.get(l,"size",l)},has(l){const o=this.__v_raw,a=Zt(o),c=Zt(l);return t||(bn(l,c)&&Te(a,"has",l),Te(a,"has",c)),l===c?o.has(l):o.has(l)||o.has(c)},forEach(l,o){const a=this,c=a.__v_raw,h=Zt(c),g=e?co:t?uo:Oe;return!t&&Te(h,"iterate",Dn),c.forEach((f,b)=>l.call(o,g(f),g(b),a))}};return Ae(i,t?{add:Li("add"),set:Li("set"),delete:Li("delete"),clear:Li("clear")}:{add(l){!e&&!je(l)&&!Nn(l)&&(l=Zt(l));const o=Zt(this);return Gi(o).has.call(o,l)||(o.add(l),sn(o,"add",l,l)),this},set(l,o){!e&&!je(o)&&!Nn(o)&&(o=Zt(o));const a=Zt(this),{has:c,get:h}=Gi(a);let g=c.call(a,l);g||(l=Zt(l),g=c.call(a,l));const f=h.call(a,l);return a.set(l,o),g?bn(o,f)&&sn(a,"set",l,o):sn(a,"add",l,o),this},delete(l){const o=Zt(this),{has:a,get:c}=Gi(o);let h=a.call(o,l);h||(l=Zt(l),h=a.call(o,l)),c&&c.call(o,l);const g=o.delete(l);return h&&sn(o,"delete",l,void 0),g},clear(){const l=Zt(this),o=l.size!==0,a=l.clear();return o&&sn(l,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(l=>{i[l]=oh(l,t,e)}),i}function Fo(t,e){const i=ah(t,e);return(s,l,o)=>l==="__v_isReactive"?!t:l==="__v_isReadonly"?t:l==="__v_raw"?s:Reflect.get(te(i,l)&&l in s?i:s,l,o)}const lh={get:Fo(!1,!1)},ch={get:Fo(!1,!0)},uh={get:Fo(!0,!1)};const vc=new WeakMap,_c=new WeakMap,bc=new WeakMap,hh=new WeakMap;function fh(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function dh(t){return t.__v_skip||!Object.isExtensible(t)?0:fh(Gu(t))}function Mo(t){return Nn(t)?t:Io(t,!1,rh,lh,vc)}function gh(t){return Io(t,!1,sh,ch,_c)}function wc(t){return Io(t,!0,ih,uh,bc)}function Io(t,e,i,s,l){if(!me(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=l.get(t);if(o)return o;const a=dh(t);if(a===0)return t;const c=new Proxy(t,a===2?s:i);return l.set(t,c),c}function ri(t){return Nn(t)?ri(t.__v_raw):!!(t&&t.__v_isReactive)}function Nn(t){return!!(t&&t.__v_isReadonly)}function je(t){return!!(t&&t.__v_isShallow)}function Do(t){return t?!!t.__v_raw:!1}function Zt(t){const e=t&&t.__v_raw;return e?Zt(e):t}function ph(t){return!te(t,"__v_skip")&&Object.isExtensible(t)&&sc(t,"__v_skip",!0),t}const Oe=t=>me(t)?Mo(t):t,uo=t=>me(t)?wc(t):t;function Ee(t){return t?t.__v_isRef===!0:!1}function Se(t){return mh(t,!1)}function mh(t,e){return Ee(t)?t:new yh(t,e)}class yh{constructor(e,i){this.dep=new ko,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?e:Zt(e),this._value=i?e:Oe(e),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(e){const i=this._rawValue,s=this.__v_isShallow||je(e)||Nn(e);e=s?e:Zt(e),bn(e,i)&&(this._rawValue=e,this._value=s?e:Oe(e),this.dep.trigger())}}function vh(t){return Ee(t)?t.value:t}const _h={get:(t,e,i)=>e==="__v_raw"?t:vh(Reflect.get(t,e,i)),set:(t,e,i,s)=>{const l=t[e];return Ee(l)&&!Ee(i)?(l.value=i,!0):Reflect.set(t,e,i,s)}};function Sc(t){return ri(t)?t:new Proxy(t,_h)}class bh{constructor(e,i,s){this.fn=e,this.setter=i,this._value=void 0,this.dep=new ko(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=oi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&ie!==this)return cc(this,!0),!0}get value(){const e=this.dep.track();return fc(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function wh(t,e,i=!1){let s,l;return qt(t)?s=t:(s=t.get,l=t.set),new bh(s,l,i)}const Bi={},Hi=new WeakMap;let In;function Sh(t,e=!1,i=In){if(i){let s=Hi.get(i);s||Hi.set(i,s=[]),s.push(t)}}function xh(t,e,i=se){const{immediate:s,deep:l,once:o,scheduler:a,augmentJob:c,call:h}=i,g=S=>l?S:je(S)||l===!1||l===0?vn(S,1):vn(S);let f,b,x,v,y=!1,w=!1;if(Ee(t)?(b=()=>t.value,y=je(t)):ri(t)?(b=()=>g(t),y=!0):Vt(t)?(w=!0,y=t.some(S=>ri(S)||je(S)),b=()=>t.map(S=>{if(Ee(S))return S.value;if(ri(S))return g(S);if(qt(S))return h?h(S,2):S()})):qt(t)?e?b=h?()=>h(t,2):t:b=()=>{if(x){Sn();try{x()}finally{xn()}}const S=In;In=f;try{return h?h(t,3,[v]):t(v)}finally{In=S}}:b=$e,e&&l){const S=b,A=l===!0?1/0:l;b=()=>vn(S(),A)}const T=$u(),F=()=>{f.stop(),T&&T.active&&xo(T.effects,f)};if(o&&e){const S=e;e=(...A)=>{S(...A),F()}}let m=w?new Array(t.length).fill(Bi):Bi;const d=S=>{if(!(!(f.flags&1)||!f.dirty&&!S))if(e){const A=f.run();if(l||y||(w?A.some((M,j)=>bn(M,m[j])):bn(A,m))){x&&x();const M=In;In=f;try{const j=[A,m===Bi?void 0:w&&m[0]===Bi?[]:m,v];h?h(e,3,j):e(...j),m=A}finally{In=M}}}else f.run()};return c&&c(d),f=new ac(b),f.scheduler=a?()=>a(d,!1):d,v=S=>Sh(S,!1,f),x=f.onStop=()=>{const S=Hi.get(f);if(S){if(h)h(S,4);else for(const A of S)A();Hi.delete(f)}},e?s?d(!0):m=f.run():a?a(d.bind(null,!0),!0):f.run(),F.pause=f.pause.bind(f),F.resume=f.resume.bind(f),F.stop=F,F}function vn(t,e=1/0,i){if(e<=0||!me(t)||t.__v_skip||(i=i||new Set,i.has(t)))return t;if(i.add(t),e--,Ee(t))vn(t.value,e,i);else if(Vt(t))for(let s=0;s<t.length;s++)vn(t[s],e,i);else if(Du(t)||Zr(t))t.forEach(s=>{vn(s,e,i)});else if(Lu(t)){for(const s in t)vn(t[s],e,i);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&vn(t[s],e,i)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hi(t,e,i,s){try{return s?t(...s):t()}catch(l){ns(l,e,i)}}function Xe(t,e,i,s){if(qt(t)){const l=hi(t,e,i,s);return l&&rc(l)&&l.catch(o=>{ns(o,e,i)}),l}if(Vt(t)){const l=[];for(let o=0;o<t.length;o++)l.push(Xe(t[o],e,i,s));return l}}function ns(t,e,i,s=!0){const l=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||se;if(e){let c=e.parent;const h=e.proxy,g=`https://vuejs.org/error-reference/#runtime-${i}`;for(;c;){const f=c.ec;if(f){for(let b=0;b<f.length;b++)if(f[b](t,h,g)===!1)return}c=c.parent}if(o){Sn(),hi(o,null,10,[t,h,g]),xn();return}}Ch(t,i,l,s,a)}function Ch(t,e,i,s=!0,l=!1){if(l)throw t;console.error(t)}const Fe=[];let We=-1;const $n=[];let mn=null,zn=0;const xc=Promise.resolve();let Wi=null;function Ph(t){const e=Wi||xc;return t?e.then(this?t.bind(this):t):e}function Th(t){let e=We+1,i=Fe.length;for(;e<i;){const s=e+i>>>1,l=Fe[s],o=li(l);o<t||o===t&&l.flags&2?e=s+1:i=s}return e}function No(t){if(!(t.flags&1)){const e=li(t),i=Fe[Fe.length-1];!i||!(t.flags&2)&&e>=li(i)?Fe.push(t):Fe.splice(Th(e),0,t),t.flags|=1,Cc()}}function Cc(){Wi||(Wi=xc.then(Tc))}function Eh(t){Vt(t)?$n.push(...t):mn&&t.id===-1?mn.splice(zn+1,0,t):t.flags&1||($n.push(t),t.flags|=1),Cc()}function Aa(t,e,i=We+1){for(;i<Fe.length;i++){const s=Fe[i];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Fe.splice(i,1),i--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Pc(t){if($n.length){const e=[...new Set($n)].sort((i,s)=>li(i)-li(s));if($n.length=0,mn){mn.push(...e);return}for(mn=e,zn=0;zn<mn.length;zn++){const i=mn[zn];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}mn=null,zn=0}}const li=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Tc(t){try{for(We=0;We<Fe.length;We++){const e=Fe[We];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),hi(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;We<Fe.length;We++){const e=Fe[We];e&&(e.flags&=-2)}We=-1,Fe.length=0,Pc(),Wi=null,(Fe.length||$n.length)&&Tc()}}let Ye=null,Ec=null;function zi(t){const e=Ye;return Ye=t,Ec=t&&t.type.__scopeId||null,e}function Ah(t,e=Ye,i){if(!e||t._n)return t;const s=(...l)=>{s._d&&Ga(-1);const o=zi(e);let a;try{a=t(...l)}finally{zi(o),s._d&&Ga(1)}return a};return s._n=!0,s._c=!0,s._d=!0,s}function On(t,e,i,s){const l=t.dirs,o=e&&e.dirs;for(let a=0;a<l.length;a++){const c=l[a];o&&(c.oldValue=o[a].value);let h=c.dir[s];h&&(Sn(),Xe(h,i,8,[t.el,c,t,e]),xn())}}const Rh=Symbol("_vte"),kh=t=>t.__isTeleport;function Go(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Go(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Oh(t,e){return qt(t)?Ae({name:t.name},e,{setup:t}):t}function Ac(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Yi(t,e,i,s,l=!1){if(Vt(t)){t.forEach((y,w)=>Yi(y,e&&(Vt(e)?e[w]:e),i,s,l));return}if(ii(s)&&!l){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Yi(t,e,i,s.component.subTree);return}const o=s.shapeFlag&4?qo(s.component):s.el,a=l?null:o,{i:c,r:h}=t,g=e&&e.r,f=c.refs===se?c.refs={}:c.refs,b=c.setupState,x=Zt(b),v=b===se?()=>!1:y=>te(x,y);if(g!=null&&g!==h&&(be(g)?(f[g]=null,v(g)&&(b[g]=null)):Ee(g)&&(g.value=null)),qt(h))hi(h,c,12,[a,f]);else{const y=be(h),w=Ee(h);if(y||w){const T=()=>{if(t.f){const F=y?v(h)?b[h]:f[h]:h.value;l?Vt(F)&&xo(F,o):Vt(F)?F.includes(o)||F.push(o):y?(f[h]=[o],v(h)&&(b[h]=f[h])):(h.value=[o],t.k&&(f[t.k]=h.value))}else y?(f[h]=a,v(h)&&(b[h]=a)):w&&(h.value=a,t.k&&(f[t.k]=a))};a?(T.id=-1,Le(T,i)):T()}}}es().requestIdleCallback;es().cancelIdleCallback;const ii=t=>!!t.type.__asyncLoader,Rc=t=>t.type.__isKeepAlive;function Fh(t,e){kc(t,"a",e)}function Mh(t,e){kc(t,"da",e)}function kc(t,e,i=Me){const s=t.__wdc||(t.__wdc=()=>{let l=i;for(;l;){if(l.isDeactivated)return;l=l.parent}return t()});if(rs(e,s,i),i){let l=i.parent;for(;l&&l.parent;)Rc(l.parent.vnode)&&Ih(s,e,i,l),l=l.parent}}function Ih(t,e,i,s){const l=rs(e,t,s,!0);Lo(()=>{xo(s[e],l)},i)}function rs(t,e,i=Me,s=!1){if(i){const l=i[t]||(i[t]=[]),o=e.__weh||(e.__weh=(...a)=>{Sn();const c=fi(i),h=Xe(e,i,t,a);return c(),xn(),h});return s?l.unshift(o):l.push(o),o}}const on=t=>(e,i=Me)=>{(!ui||t==="sp")&&rs(t,(...s)=>e(...s),i)},Dh=on("bm"),Oc=on("m"),Nh=on("bu"),Gh=on("u"),Lh=on("bum"),Lo=on("um"),Bh=on("sp"),Uh=on("rtg"),Kh=on("rtc");function jh(t,e=Me){rs("ec",t,e)}const qh=Symbol.for("v-ndc"),ho=t=>t?Jc(t)?qo(t):ho(t.parent):null,si=Ae(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ho(t.parent),$root:t=>ho(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Mc(t),$forceUpdate:t=>t.f||(t.f=()=>{No(t.update)}),$nextTick:t=>t.n||(t.n=Ph.bind(t.proxy)),$watch:t=>df.bind(t)}),Hs=(t,e)=>t!==se&&!t.__isScriptSetup&&te(t,e),Vh={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:i,setupState:s,data:l,props:o,accessCache:a,type:c,appContext:h}=t;let g;if(e[0]!=="$"){const v=a[e];if(v!==void 0)switch(v){case 1:return s[e];case 2:return l[e];case 4:return i[e];case 3:return o[e]}else{if(Hs(s,e))return a[e]=1,s[e];if(l!==se&&te(l,e))return a[e]=2,l[e];if((g=t.propsOptions[0])&&te(g,e))return a[e]=3,o[e];if(i!==se&&te(i,e))return a[e]=4,i[e];fo&&(a[e]=0)}}const f=si[e];let b,x;if(f)return e==="$attrs"&&Te(t.attrs,"get",""),f(t);if((b=c.__cssModules)&&(b=b[e]))return b;if(i!==se&&te(i,e))return a[e]=4,i[e];if(x=h.config.globalProperties,te(x,e))return x[e]},set({_:t},e,i){const{data:s,setupState:l,ctx:o}=t;return Hs(l,e)?(l[e]=i,!0):s!==se&&te(s,e)?(s[e]=i,!0):te(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:s,appContext:l,propsOptions:o}},a){let c;return!!i[a]||t!==se&&te(t,a)||Hs(e,a)||(c=o[0])&&te(c,a)||te(s,a)||te(si,a)||te(l.config.globalProperties,a)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:te(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};function Ra(t){return Vt(t)?t.reduce((e,i)=>(e[i]=null,e),{}):t}let fo=!0;function Hh(t){const e=Mc(t),i=t.proxy,s=t.ctx;fo=!1,e.beforeCreate&&ka(e.beforeCreate,t,"bc");const{data:l,computed:o,methods:a,watch:c,provide:h,inject:g,created:f,beforeMount:b,mounted:x,beforeUpdate:v,updated:y,activated:w,deactivated:T,beforeDestroy:F,beforeUnmount:m,destroyed:d,unmounted:S,render:A,renderTracked:M,renderTriggered:j,errorCaptured:D,serverPrefetch:I,expose:O,inheritAttrs:k,components:K,directives:p,filters:E}=e;if(g&&Wh(g,s,null),a)for(const B in a){const W=a[B];qt(W)&&(s[B]=W.bind(i))}if(l){const B=l.call(i,i);me(B)&&(t.data=Mo(B))}if(fo=!0,o)for(const B in o){const W=o[B],it=qt(W)?W.bind(i,i):qt(W.get)?W.get.bind(i,i):$e,et=!qt(W)&&qt(W.set)?W.set.bind(i):$e,ht=Mf({get:it,set:et});Object.defineProperty(s,B,{enumerable:!0,configurable:!0,get:()=>ht.value,set:_t=>ht.value=_t})}if(c)for(const B in c)Fc(c[B],s,i,B);if(h){const B=qt(h)?h.call(i):h;Reflect.ownKeys(B).forEach(W=>{Jh(W,B[W])})}f&&ka(f,t,"c");function N(B,W){Vt(W)?W.forEach(it=>B(it.bind(i))):W&&B(W.bind(i))}if(N(Dh,b),N(Oc,x),N(Nh,v),N(Gh,y),N(Fh,w),N(Mh,T),N(jh,D),N(Kh,M),N(Uh,j),N(Lh,m),N(Lo,S),N(Bh,I),Vt(O))if(O.length){const B=t.exposed||(t.exposed={});O.forEach(W=>{Object.defineProperty(B,W,{get:()=>i[W],set:it=>i[W]=it})})}else t.exposed||(t.exposed={});A&&t.render===$e&&(t.render=A),k!=null&&(t.inheritAttrs=k),K&&(t.components=K),p&&(t.directives=p),I&&Ac(t)}function Wh(t,e,i=$e){Vt(t)&&(t=go(t));for(const s in t){const l=t[s];let o;me(l)?"default"in l?o=Ui(l.from||s,l.default,!0):o=Ui(l.from||s):o=Ui(l),Ee(o)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[s]=o}}function ka(t,e,i){Xe(Vt(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,i)}function Fc(t,e,i,s){let l=s.includes(".")?Wc(i,s):()=>i[s];if(be(t)){const o=e[t];qt(o)&&zs(l,o)}else if(qt(t))zs(l,t.bind(i));else if(me(t))if(Vt(t))t.forEach(o=>Fc(o,e,i,s));else{const o=qt(t.handler)?t.handler.bind(i):e[t.handler];qt(o)&&zs(l,o,t)}}function Mc(t){const e=t.type,{mixins:i,extends:s}=e,{mixins:l,optionsCache:o,config:{optionMergeStrategies:a}}=t.appContext,c=o.get(e);let h;return c?h=c:!l.length&&!i&&!s?h=e:(h={},l.length&&l.forEach(g=>$i(h,g,a,!0)),$i(h,e,a)),me(e)&&o.set(e,h),h}function $i(t,e,i,s=!1){const{mixins:l,extends:o}=e;o&&$i(t,o,i,!0),l&&l.forEach(a=>$i(t,a,i,!0));for(const a in e)if(!(s&&a==="expose")){const c=zh[a]||i&&i[a];t[a]=c?c(t[a],e[a]):e[a]}return t}const zh={data:Oa,props:Fa,emits:Fa,methods:Qr,computed:Qr,beforeCreate:ke,created:ke,beforeMount:ke,mounted:ke,beforeUpdate:ke,updated:ke,beforeDestroy:ke,beforeUnmount:ke,destroyed:ke,unmounted:ke,activated:ke,deactivated:ke,errorCaptured:ke,serverPrefetch:ke,components:Qr,directives:Qr,watch:$h,provide:Oa,inject:Yh};function Oa(t,e){return e?t?function(){return Ae(qt(t)?t.call(this,this):t,qt(e)?e.call(this,this):e)}:e:t}function Yh(t,e){return Qr(go(t),go(e))}function go(t){if(Vt(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function ke(t,e){return t?[...new Set([].concat(t,e))]:e}function Qr(t,e){return t?Ae(Object.create(null),t,e):e}function Fa(t,e){return t?Vt(t)&&Vt(e)?[...new Set([...t,...e])]:Ae(Object.create(null),Ra(t),Ra(e??{})):e}function $h(t,e){if(!t)return e;if(!e)return t;const i=Ae(Object.create(null),t);for(const s in e)i[s]=ke(t[s],e[s]);return i}function Ic(){return{app:null,config:{isNativeTag:Mu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Xh=0;function Qh(t,e){return function(s,l=null){qt(s)||(s=Ae({},s)),l!=null&&!me(l)&&(l=null);const o=Ic(),a=new WeakSet,c=[];let h=!1;const g=o.app={_uid:Xh++,_component:s,_props:l,_container:null,_context:o,_instance:null,version:If,get config(){return o.config},set config(f){},use(f,...b){return a.has(f)||(f&&qt(f.install)?(a.add(f),f.install(g,...b)):qt(f)&&(a.add(f),f(g,...b))),g},mixin(f){return o.mixins.includes(f)||o.mixins.push(f),g},component(f,b){return b?(o.components[f]=b,g):o.components[f]},directive(f,b){return b?(o.directives[f]=b,g):o.directives[f]},mount(f,b,x){if(!h){const v=g._ceVNode||pe(s,l);return v.appContext=o,x===!0?x="svg":x===!1&&(x=void 0),t(v,f,x),h=!0,g._container=f,f.__vue_app__=g,qo(v.component)}},onUnmount(f){c.push(f)},unmount(){h&&(Xe(c,g._instance,16),t(null,g._container),delete g._container.__vue_app__)},provide(f,b){return o.provides[f]=b,g},runWithContext(f){const b=Xn;Xn=g;try{return f()}finally{Xn=b}}};return g}}let Xn=null;function Jh(t,e){if(Me){let i=Me.provides;const s=Me.parent&&Me.parent.provides;s===i&&(i=Me.provides=Object.create(s)),i[t]=e}}function Ui(t,e,i=!1){const s=Me||Ye;if(s||Xn){const l=Xn?Xn._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(l&&t in l)return l[t];if(arguments.length>1)return i&&qt(e)?e.call(s&&s.proxy):e}}const Dc={},Nc=()=>Object.create(Dc),Gc=t=>Object.getPrototypeOf(t)===Dc;function Zh(t,e,i,s=!1){const l={},o=Nc();t.propsDefaults=Object.create(null),Lc(t,e,l,o);for(const a in t.propsOptions[0])a in l||(l[a]=void 0);i?t.props=s?l:gh(l):t.type.props?t.props=l:t.props=o,t.attrs=o}function tf(t,e,i,s){const{props:l,attrs:o,vnode:{patchFlag:a}}=t,c=Zt(l),[h]=t.propsOptions;let g=!1;if((s||a>0)&&!(a&16)){if(a&8){const f=t.vnode.dynamicProps;for(let b=0;b<f.length;b++){let x=f[b];if(is(t.emitsOptions,x))continue;const v=e[x];if(h)if(te(o,x))v!==o[x]&&(o[x]=v,g=!0);else{const y=wn(x);l[y]=po(h,c,y,v,t,!1)}else v!==o[x]&&(o[x]=v,g=!0)}}}else{Lc(t,e,l,o)&&(g=!0);let f;for(const b in c)(!e||!te(e,b)&&((f=Gn(b))===b||!te(e,f)))&&(h?i&&(i[b]!==void 0||i[f]!==void 0)&&(l[b]=po(h,c,b,void 0,t,!0)):delete l[b]);if(o!==c)for(const b in o)(!e||!te(e,b))&&(delete o[b],g=!0)}g&&sn(t.attrs,"set","")}function Lc(t,e,i,s){const[l,o]=t.propsOptions;let a=!1,c;if(e)for(let h in e){if(ti(h))continue;const g=e[h];let f;l&&te(l,f=wn(h))?!o||!o.includes(f)?i[f]=g:(c||(c={}))[f]=g:is(t.emitsOptions,h)||(!(h in s)||g!==s[h])&&(s[h]=g,a=!0)}if(o){const h=Zt(i),g=c||se;for(let f=0;f<o.length;f++){const b=o[f];i[b]=po(l,h,b,g[b],t,!te(g,b))}}return a}function po(t,e,i,s,l,o){const a=t[i];if(a!=null){const c=te(a,"default");if(c&&s===void 0){const h=a.default;if(a.type!==Function&&!a.skipFactory&&qt(h)){const{propsDefaults:g}=l;if(i in g)s=g[i];else{const f=fi(l);s=g[i]=h.call(null,e),f()}}else s=h;l.ce&&l.ce._setProp(i,s)}a[0]&&(o&&!c?s=!1:a[1]&&(s===""||s===Gn(i))&&(s=!0))}return s}const ef=new WeakMap;function Bc(t,e,i=!1){const s=i?ef:e.propsCache,l=s.get(t);if(l)return l;const o=t.props,a={},c=[];let h=!1;if(!qt(t)){const f=b=>{h=!0;const[x,v]=Bc(b,e,!0);Ae(a,x),v&&c.push(...v)};!i&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!o&&!h)return me(t)&&s.set(t,Jr),Jr;if(Vt(o))for(let f=0;f<o.length;f++){const b=wn(o[f]);Ma(b)&&(a[b]=se)}else if(o)for(const f in o){const b=wn(f);if(Ma(b)){const x=o[f],v=a[b]=Vt(x)||qt(x)?{type:x}:Ae({},x),y=v.type;let w=!1,T=!0;if(Vt(y))for(let F=0;F<y.length;++F){const m=y[F],d=qt(m)&&m.name;if(d==="Boolean"){w=!0;break}else d==="String"&&(T=!1)}else w=qt(y)&&y.name==="Boolean";v[0]=w,v[1]=T,(w||te(v,"default"))&&c.push(b)}}const g=[a,c];return me(t)&&s.set(t,g),g}function Ma(t){return t[0]!=="$"&&!ti(t)}const Uc=t=>t[0]==="_"||t==="$stable",Bo=t=>Vt(t)?t.map(ze):[ze(t)],nf=(t,e,i)=>{if(e._n)return e;const s=Ah((...l)=>Bo(e(...l)),i);return s._c=!1,s},Kc=(t,e,i)=>{const s=t._ctx;for(const l in t){if(Uc(l))continue;const o=t[l];if(qt(o))e[l]=nf(l,o,s);else if(o!=null){const a=Bo(o);e[l]=()=>a}}},jc=(t,e)=>{const i=Bo(e);t.slots.default=()=>i},qc=(t,e,i)=>{for(const s in e)(i||s!=="_")&&(t[s]=e[s])},rf=(t,e,i)=>{const s=t.slots=Nc();if(t.vnode.shapeFlag&32){const l=e._;l?(qc(s,e,i),i&&sc(s,"_",l,!0)):Kc(e,s)}else e&&jc(t,e)},sf=(t,e,i)=>{const{vnode:s,slots:l}=t;let o=!0,a=se;if(s.shapeFlag&32){const c=e._;c?i&&c===1?o=!1:qc(l,e,i):(o=!e.$stable,Kc(e,l)),a=e}else e&&(jc(t,e),a={default:1});if(o)for(const c in l)!Uc(c)&&a[c]==null&&delete l[c]},Le=bf;function of(t){return af(t)}function af(t,e){const i=es();i.__VUE__=!0;const{insert:s,remove:l,patchProp:o,createElement:a,createText:c,createComment:h,setText:g,setElementText:f,parentNode:b,nextSibling:x,setScopeId:v=$e,insertStaticContent:y}=t,w=(G,q,nt,lt=null,gt=null,ft=null,yt=void 0,Ct=null,vt=!!q.dynamicChildren)=>{if(G===q)return;G&&!cr(G,q)&&(lt=H(G),_t(G,gt,ft,!0),G=null),q.patchFlag===-2&&(vt=!1,q.dynamicChildren=null);const{type:pt,ref:Ot,shapeFlag:xt}=q;switch(pt){case ss:T(G,q,nt,lt);break;case ci:F(G,q,nt,lt);break;case Ys:G==null&&m(q,nt,lt,yt);break;case rn:K(G,q,nt,lt,gt,ft,yt,Ct,vt);break;default:xt&1?A(G,q,nt,lt,gt,ft,yt,Ct,vt):xt&6?p(G,q,nt,lt,gt,ft,yt,Ct,vt):(xt&64||xt&128)&&pt.process(G,q,nt,lt,gt,ft,yt,Ct,vt,St)}Ot!=null&&gt&&Yi(Ot,G&&G.ref,ft,q||G,!q)},T=(G,q,nt,lt)=>{if(G==null)s(q.el=c(q.children),nt,lt);else{const gt=q.el=G.el;q.children!==G.children&&g(gt,q.children)}},F=(G,q,nt,lt)=>{G==null?s(q.el=h(q.children||""),nt,lt):q.el=G.el},m=(G,q,nt,lt)=>{[G.el,G.anchor]=y(G.children,q,nt,lt,G.el,G.anchor)},d=({el:G,anchor:q},nt,lt)=>{let gt;for(;G&&G!==q;)gt=x(G),s(G,nt,lt),G=gt;s(q,nt,lt)},S=({el:G,anchor:q})=>{let nt;for(;G&&G!==q;)nt=x(G),l(G),G=nt;l(q)},A=(G,q,nt,lt,gt,ft,yt,Ct,vt)=>{q.type==="svg"?yt="svg":q.type==="math"&&(yt="mathml"),G==null?M(q,nt,lt,gt,ft,yt,Ct,vt):I(G,q,gt,ft,yt,Ct,vt)},M=(G,q,nt,lt,gt,ft,yt,Ct)=>{let vt,pt;const{props:Ot,shapeFlag:xt,transition:Nt,dirs:Gt}=G;if(vt=G.el=a(G.type,ft,Ot&&Ot.is,Ot),xt&8?f(vt,G.children):xt&16&&D(G.children,vt,null,lt,gt,Ws(G,ft),yt,Ct),Gt&&On(G,null,lt,"created"),j(vt,G,G.scopeId,yt,lt),Ot){for(const Bt in Ot)Bt!=="value"&&!ti(Bt)&&o(vt,Bt,null,Ot[Bt],ft,lt);"value"in Ot&&o(vt,"value",null,Ot.value,ft),(pt=Ot.onVnodeBeforeMount)&&He(pt,lt,G)}Gt&&On(G,null,lt,"beforeMount");const Lt=lf(gt,Nt);Lt&&Nt.beforeEnter(vt),s(vt,q,nt),((pt=Ot&&Ot.onVnodeMounted)||Lt||Gt)&&Le(()=>{pt&&He(pt,lt,G),Lt&&Nt.enter(vt),Gt&&On(G,null,lt,"mounted")},gt)},j=(G,q,nt,lt,gt)=>{if(nt&&v(G,nt),lt)for(let ft=0;ft<lt.length;ft++)v(G,lt[ft]);if(gt){let ft=gt.subTree;if(q===ft||Yc(ft.type)&&(ft.ssContent===q||ft.ssFallback===q)){const yt=gt.vnode;j(G,yt,yt.scopeId,yt.slotScopeIds,gt.parent)}}},D=(G,q,nt,lt,gt,ft,yt,Ct,vt=0)=>{for(let pt=vt;pt<G.length;pt++){const Ot=G[pt]=Ct?yn(G[pt]):ze(G[pt]);w(null,Ot,q,nt,lt,gt,ft,yt,Ct)}},I=(G,q,nt,lt,gt,ft,yt)=>{const Ct=q.el=G.el;let{patchFlag:vt,dynamicChildren:pt,dirs:Ot}=q;vt|=G.patchFlag&16;const xt=G.props||se,Nt=q.props||se;let Gt;if(nt&&Fn(nt,!1),(Gt=Nt.onVnodeBeforeUpdate)&&He(Gt,nt,q,G),Ot&&On(q,G,nt,"beforeUpdate"),nt&&Fn(nt,!0),(xt.innerHTML&&Nt.innerHTML==null||xt.textContent&&Nt.textContent==null)&&f(Ct,""),pt?O(G.dynamicChildren,pt,Ct,nt,lt,Ws(q,gt),ft):yt||W(G,q,Ct,null,nt,lt,Ws(q,gt),ft,!1),vt>0){if(vt&16)k(Ct,xt,Nt,nt,gt);else if(vt&2&&xt.class!==Nt.class&&o(Ct,"class",null,Nt.class,gt),vt&4&&o(Ct,"style",xt.style,Nt.style,gt),vt&8){const Lt=q.dynamicProps;for(let Bt=0;Bt<Lt.length;Bt++){const Ut=Lt[Bt],ee=xt[Ut],ne=Nt[Ut];(ne!==ee||Ut==="value")&&o(Ct,Ut,ee,ne,gt,nt)}}vt&1&&G.children!==q.children&&f(Ct,q.children)}else!yt&&pt==null&&k(Ct,xt,Nt,nt,gt);((Gt=Nt.onVnodeUpdated)||Ot)&&Le(()=>{Gt&&He(Gt,nt,q,G),Ot&&On(q,G,nt,"updated")},lt)},O=(G,q,nt,lt,gt,ft,yt)=>{for(let Ct=0;Ct<q.length;Ct++){const vt=G[Ct],pt=q[Ct],Ot=vt.el&&(vt.type===rn||!cr(vt,pt)||vt.shapeFlag&70)?b(vt.el):nt;w(vt,pt,Ot,null,lt,gt,ft,yt,!0)}},k=(G,q,nt,lt,gt)=>{if(q!==nt){if(q!==se)for(const ft in q)!ti(ft)&&!(ft in nt)&&o(G,ft,q[ft],null,gt,lt);for(const ft in nt){if(ti(ft))continue;const yt=nt[ft],Ct=q[ft];yt!==Ct&&ft!=="value"&&o(G,ft,Ct,yt,gt,lt)}"value"in nt&&o(G,"value",q.value,nt.value,gt)}},K=(G,q,nt,lt,gt,ft,yt,Ct,vt)=>{const pt=q.el=G?G.el:c(""),Ot=q.anchor=G?G.anchor:c("");let{patchFlag:xt,dynamicChildren:Nt,slotScopeIds:Gt}=q;Gt&&(Ct=Ct?Ct.concat(Gt):Gt),G==null?(s(pt,nt,lt),s(Ot,nt,lt),D(q.children||[],nt,Ot,gt,ft,yt,Ct,vt)):xt>0&&xt&64&&Nt&&G.dynamicChildren?(O(G.dynamicChildren,Nt,nt,gt,ft,yt,Ct),(q.key!=null||gt&&q===gt.subTree)&&Vc(G,q,!0)):W(G,q,nt,Ot,gt,ft,yt,Ct,vt)},p=(G,q,nt,lt,gt,ft,yt,Ct,vt)=>{q.slotScopeIds=Ct,G==null?q.shapeFlag&512?gt.ctx.activate(q,nt,lt,yt,vt):E(q,nt,lt,gt,ft,yt,vt):P(G,q,vt)},E=(G,q,nt,lt,gt,ft,yt)=>{const Ct=G.component=Ef(G,lt,gt);if(Rc(G)&&(Ct.ctx.renderer=St),Af(Ct,!1,yt),Ct.asyncDep){if(gt&&gt.registerDep(Ct,N,yt),!G.el){const vt=Ct.subTree=pe(ci);F(null,vt,q,nt)}}else N(Ct,G,q,nt,gt,ft,yt)},P=(G,q,nt)=>{const lt=q.component=G.component;if(vf(G,q,nt))if(lt.asyncDep&&!lt.asyncResolved){B(lt,q,nt);return}else lt.next=q,lt.update();else q.el=G.el,lt.vnode=q},N=(G,q,nt,lt,gt,ft,yt)=>{const Ct=()=>{if(G.isMounted){let{next:xt,bu:Nt,u:Gt,parent:Lt,vnode:Bt}=G;{const Jt=Hc(G);if(Jt){xt&&(xt.el=Bt.el,B(G,xt,yt)),Jt.asyncDep.then(()=>{G.isUnmounted||Ct()});return}}let Ut=xt,ee;Fn(G,!1),xt?(xt.el=Bt.el,B(G,xt,yt)):xt=Bt,Nt&&Ks(Nt),(ee=xt.props&&xt.props.onVnodeBeforeUpdate)&&He(ee,Lt,xt,Bt),Fn(G,!0);const ne=Da(G),ae=G.subTree;G.subTree=ne,w(ae,ne,b(ae.el),H(ae),G,gt,ft),xt.el=ne.el,Ut===null&&_f(G,ne.el),Gt&&Le(Gt,gt),(ee=xt.props&&xt.props.onVnodeUpdated)&&Le(()=>He(ee,Lt,xt,Bt),gt)}else{let xt;const{el:Nt,props:Gt}=q,{bm:Lt,m:Bt,parent:Ut,root:ee,type:ne}=G,ae=ii(q);Fn(G,!1),Lt&&Ks(Lt),!ae&&(xt=Gt&&Gt.onVnodeBeforeMount)&&He(xt,Ut,q),Fn(G,!0);{ee.ce&&ee.ce._injectChildStyle(ne);const Jt=G.subTree=Da(G);w(null,Jt,nt,lt,G,gt,ft),q.el=Jt.el}if(Bt&&Le(Bt,gt),!ae&&(xt=Gt&&Gt.onVnodeMounted)){const Jt=q;Le(()=>He(xt,Ut,Jt),gt)}(q.shapeFlag&256||Ut&&ii(Ut.vnode)&&Ut.vnode.shapeFlag&256)&&G.a&&Le(G.a,gt),G.isMounted=!0,q=nt=lt=null}};G.scope.on();const vt=G.effect=new ac(Ct);G.scope.off();const pt=G.update=vt.run.bind(vt),Ot=G.job=vt.runIfDirty.bind(vt);Ot.i=G,Ot.id=G.uid,vt.scheduler=()=>No(Ot),Fn(G,!0),pt()},B=(G,q,nt)=>{q.component=G;const lt=G.vnode.props;G.vnode=q,G.next=null,tf(G,q.props,lt,nt),sf(G,q.children,nt),Sn(),Aa(G),xn()},W=(G,q,nt,lt,gt,ft,yt,Ct,vt=!1)=>{const pt=G&&G.children,Ot=G?G.shapeFlag:0,xt=q.children,{patchFlag:Nt,shapeFlag:Gt}=q;if(Nt>0){if(Nt&128){et(pt,xt,nt,lt,gt,ft,yt,Ct,vt);return}else if(Nt&256){it(pt,xt,nt,lt,gt,ft,yt,Ct,vt);return}}Gt&8?(Ot&16&&Rt(pt,gt,ft),xt!==pt&&f(nt,xt)):Ot&16?Gt&16?et(pt,xt,nt,lt,gt,ft,yt,Ct,vt):Rt(pt,gt,ft,!0):(Ot&8&&f(nt,""),Gt&16&&D(xt,nt,lt,gt,ft,yt,Ct,vt))},it=(G,q,nt,lt,gt,ft,yt,Ct,vt)=>{G=G||Jr,q=q||Jr;const pt=G.length,Ot=q.length,xt=Math.min(pt,Ot);let Nt;for(Nt=0;Nt<xt;Nt++){const Gt=q[Nt]=vt?yn(q[Nt]):ze(q[Nt]);w(G[Nt],Gt,nt,null,gt,ft,yt,Ct,vt)}pt>Ot?Rt(G,gt,ft,!0,!1,xt):D(q,nt,lt,gt,ft,yt,Ct,vt,xt)},et=(G,q,nt,lt,gt,ft,yt,Ct,vt)=>{let pt=0;const Ot=q.length;let xt=G.length-1,Nt=Ot-1;for(;pt<=xt&&pt<=Nt;){const Gt=G[pt],Lt=q[pt]=vt?yn(q[pt]):ze(q[pt]);if(cr(Gt,Lt))w(Gt,Lt,nt,null,gt,ft,yt,Ct,vt);else break;pt++}for(;pt<=xt&&pt<=Nt;){const Gt=G[xt],Lt=q[Nt]=vt?yn(q[Nt]):ze(q[Nt]);if(cr(Gt,Lt))w(Gt,Lt,nt,null,gt,ft,yt,Ct,vt);else break;xt--,Nt--}if(pt>xt){if(pt<=Nt){const Gt=Nt+1,Lt=Gt<Ot?q[Gt].el:lt;for(;pt<=Nt;)w(null,q[pt]=vt?yn(q[pt]):ze(q[pt]),nt,Lt,gt,ft,yt,Ct,vt),pt++}}else if(pt>Nt)for(;pt<=xt;)_t(G[pt],gt,ft,!0),pt++;else{const Gt=pt,Lt=pt,Bt=new Map;for(pt=Lt;pt<=Nt;pt++){const re=q[pt]=vt?yn(q[pt]):ze(q[pt]);re.key!=null&&Bt.set(re.key,pt)}let Ut,ee=0;const ne=Nt-Lt+1;let ae=!1,Jt=0;const ce=new Array(ne);for(pt=0;pt<ne;pt++)ce[pt]=0;for(pt=Gt;pt<=xt;pt++){const re=G[pt];if(ee>=ne){_t(re,gt,ft,!0);continue}let It;if(re.key!=null)It=Bt.get(re.key);else for(Ut=Lt;Ut<=Nt;Ut++)if(ce[Ut-Lt]===0&&cr(re,q[Ut])){It=Ut;break}It===void 0?_t(re,gt,ft,!0):(ce[It-Lt]=pt+1,It>=Jt?Jt=It:ae=!0,w(re,q[It],nt,null,gt,ft,yt,Ct,vt),ee++)}const ye=ae?cf(ce):Jr;for(Ut=ye.length-1,pt=ne-1;pt>=0;pt--){const re=Lt+pt,It=q[re],an=re+1<Ot?q[re+1].el:lt;ce[pt]===0?w(null,It,nt,an,gt,ft,yt,Ct,vt):ae&&(Ut<0||pt!==ye[Ut]?ht(It,nt,an,2):Ut--)}}},ht=(G,q,nt,lt,gt=null)=>{const{el:ft,type:yt,transition:Ct,children:vt,shapeFlag:pt}=G;if(pt&6){ht(G.component.subTree,q,nt,lt);return}if(pt&128){G.suspense.move(q,nt,lt);return}if(pt&64){yt.move(G,q,nt,St);return}if(yt===rn){s(ft,q,nt);for(let xt=0;xt<vt.length;xt++)ht(vt[xt],q,nt,lt);s(G.anchor,q,nt);return}if(yt===Ys){d(G,q,nt);return}if(lt!==2&&pt&1&&Ct)if(lt===0)Ct.beforeEnter(ft),s(ft,q,nt),Le(()=>Ct.enter(ft),gt);else{const{leave:xt,delayLeave:Nt,afterLeave:Gt}=Ct,Lt=()=>s(ft,q,nt),Bt=()=>{xt(ft,()=>{Lt(),Gt&&Gt()})};Nt?Nt(ft,Lt,Bt):Bt()}else s(ft,q,nt)},_t=(G,q,nt,lt=!1,gt=!1)=>{const{type:ft,props:yt,ref:Ct,children:vt,dynamicChildren:pt,shapeFlag:Ot,patchFlag:xt,dirs:Nt,cacheIndex:Gt}=G;if(xt===-2&&(gt=!1),Ct!=null&&Yi(Ct,null,nt,G,!0),Gt!=null&&(q.renderCache[Gt]=void 0),Ot&256){q.ctx.deactivate(G);return}const Lt=Ot&1&&Nt,Bt=!ii(G);let Ut;if(Bt&&(Ut=yt&&yt.onVnodeBeforeUnmount)&&He(Ut,q,G),Ot&6)At(G.component,nt,lt);else{if(Ot&128){G.suspense.unmount(nt,lt);return}Lt&&On(G,null,q,"beforeUnmount"),Ot&64?G.type.remove(G,q,nt,St,lt):pt&&!pt.hasOnce&&(ft!==rn||xt>0&&xt&64)?Rt(pt,q,nt,!1,!0):(ft===rn&&xt&384||!gt&&Ot&16)&&Rt(vt,q,nt),lt&&ut(G)}(Bt&&(Ut=yt&&yt.onVnodeUnmounted)||Lt)&&Le(()=>{Ut&&He(Ut,q,G),Lt&&On(G,null,q,"unmounted")},nt)},ut=G=>{const{type:q,el:nt,anchor:lt,transition:gt}=G;if(q===rn){mt(nt,lt);return}if(q===Ys){S(G);return}const ft=()=>{l(nt),gt&&!gt.persisted&&gt.afterLeave&&gt.afterLeave()};if(G.shapeFlag&1&&gt&&!gt.persisted){const{leave:yt,delayLeave:Ct}=gt,vt=()=>yt(nt,ft);Ct?Ct(G.el,ft,vt):vt()}else ft()},mt=(G,q)=>{let nt;for(;G!==q;)nt=x(G),l(G),G=nt;l(q)},At=(G,q,nt)=>{const{bum:lt,scope:gt,job:ft,subTree:yt,um:Ct,m:vt,a:pt}=G;Ia(vt),Ia(pt),lt&&Ks(lt),gt.stop(),ft&&(ft.flags|=8,_t(yt,G,q,nt)),Ct&&Le(Ct,q),Le(()=>{G.isUnmounted=!0},q),q&&q.pendingBranch&&!q.isUnmounted&&G.asyncDep&&!G.asyncResolved&&G.suspenseId===q.pendingId&&(q.deps--,q.deps===0&&q.resolve())},Rt=(G,q,nt,lt=!1,gt=!1,ft=0)=>{for(let yt=ft;yt<G.length;yt++)_t(G[yt],q,nt,lt,gt)},H=G=>{if(G.shapeFlag&6)return H(G.component.subTree);if(G.shapeFlag&128)return G.suspense.next();const q=x(G.anchor||G.el),nt=q&&q[Rh];return nt?x(nt):q};let ct=!1;const st=(G,q,nt)=>{G==null?q._vnode&&_t(q._vnode,null,null,!0):w(q._vnode||null,G,q,null,null,null,nt),q._vnode=G,ct||(ct=!0,Aa(),Pc(),ct=!1)},St={p:w,um:_t,m:ht,r:ut,mt:E,mc:D,pc:W,pbc:O,n:H,o:t};return{render:st,hydrate:void 0,createApp:Qh(st)}}function Ws({type:t,props:e},i){return i==="svg"&&t==="foreignObject"||i==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function Fn({effect:t,job:e},i){i?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function lf(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Vc(t,e,i=!1){const s=t.children,l=e.children;if(Vt(s)&&Vt(l))for(let o=0;o<s.length;o++){const a=s[o];let c=l[o];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=l[o]=yn(l[o]),c.el=a.el),!i&&c.patchFlag!==-2&&Vc(a,c)),c.type===ss&&(c.el=a.el)}}function cf(t){const e=t.slice(),i=[0];let s,l,o,a,c;const h=t.length;for(s=0;s<h;s++){const g=t[s];if(g!==0){if(l=i[i.length-1],t[l]<g){e[s]=l,i.push(s);continue}for(o=0,a=i.length-1;o<a;)c=o+a>>1,t[i[c]]<g?o=c+1:a=c;g<t[i[o]]&&(o>0&&(e[s]=i[o-1]),i[o]=s)}}for(o=i.length,a=i[o-1];o-- >0;)i[o]=a,a=e[a];return i}function Hc(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Hc(e)}function Ia(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const uf=Symbol.for("v-scx"),hf=()=>Ui(uf);function ff(t,e){return Uo(t,null,e)}function zs(t,e,i){return Uo(t,e,i)}function Uo(t,e,i=se){const{immediate:s,deep:l,flush:o,once:a}=i,c=Ae({},i),h=e&&s||!e&&o!=="post";let g;if(ui){if(o==="sync"){const v=hf();g=v.__watcherHandles||(v.__watcherHandles=[])}else if(!h){const v=()=>{};return v.stop=$e,v.resume=$e,v.pause=$e,v}}const f=Me;c.call=(v,y,w)=>Xe(v,f,y,w);let b=!1;o==="post"?c.scheduler=v=>{Le(v,f&&f.suspense)}:o!=="sync"&&(b=!0,c.scheduler=(v,y)=>{y?v():No(v)}),c.augmentJob=v=>{e&&(v.flags|=4),b&&(v.flags|=2,f&&(v.id=f.uid,v.i=f))};const x=xh(t,e,c);return ui&&(g?g.push(x):h&&x()),x}function df(t,e,i){const s=this.proxy,l=be(t)?t.includes(".")?Wc(s,t):()=>s[t]:t.bind(s,s);let o;qt(e)?o=e:(o=e.handler,i=e);const a=fi(this),c=Uo(l,o.bind(s),i);return a(),c}function Wc(t,e){const i=e.split(".");return()=>{let s=t;for(let l=0;l<i.length&&s;l++)s=s[i[l]];return s}}const gf=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${wn(e)}Modifiers`]||t[`${Gn(e)}Modifiers`];function pf(t,e,...i){if(t.isUnmounted)return;const s=t.vnode.props||se;let l=i;const o=e.startsWith("update:"),a=o&&gf(s,e.slice(7));a&&(a.trim&&(l=i.map(f=>be(f)?f.trim():f)),a.number&&(l=i.map(Ku)));let c,h=s[c=Us(e)]||s[c=Us(wn(e))];!h&&o&&(h=s[c=Us(Gn(e))]),h&&Xe(h,t,6,l);const g=s[c+"Once"];if(g){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,Xe(g,t,6,l)}}function zc(t,e,i=!1){const s=e.emitsCache,l=s.get(t);if(l!==void 0)return l;const o=t.emits;let a={},c=!1;if(!qt(t)){const h=g=>{const f=zc(g,e,!0);f&&(c=!0,Ae(a,f))};!i&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}return!o&&!c?(me(t)&&s.set(t,null),null):(Vt(o)?o.forEach(h=>a[h]=null):Ae(a,o),me(t)&&s.set(t,a),a)}function is(t,e){return!t||!Ji(e)?!1:(e=e.slice(2).replace(/Once$/,""),te(t,e[0].toLowerCase()+e.slice(1))||te(t,Gn(e))||te(t,e))}function Da(t){const{type:e,vnode:i,proxy:s,withProxy:l,propsOptions:[o],slots:a,attrs:c,emit:h,render:g,renderCache:f,props:b,data:x,setupState:v,ctx:y,inheritAttrs:w}=t,T=zi(t);let F,m;try{if(i.shapeFlag&4){const S=l||s,A=S;F=ze(g.call(A,S,f,b,v,x,y)),m=c}else{const S=e;F=ze(S.length>1?S(b,{attrs:c,slots:a,emit:h}):S(b,null)),m=e.props?c:mf(c)}}catch(S){ns(S,t,1),F=pe(ci)}let d=F;if(m&&w!==!1){const S=Object.keys(m),{shapeFlag:A}=d;S.length&&A&7&&(o&&S.some(So)&&(m=yf(m,o)),d=Qn(d,m,!1,!0))}return i.dirs&&(d=Qn(d,null,!1,!0),d.dirs=d.dirs?d.dirs.concat(i.dirs):i.dirs),i.transition&&Go(d,i.transition),F=d,zi(T),F}const mf=t=>{let e;for(const i in t)(i==="class"||i==="style"||Ji(i))&&((e||(e={}))[i]=t[i]);return e},yf=(t,e)=>{const i={};for(const s in t)(!So(s)||!(s.slice(9)in e))&&(i[s]=t[s]);return i};function vf(t,e,i){const{props:s,children:l,component:o}=t,{props:a,children:c,patchFlag:h}=e,g=o.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&h>=0){if(h&1024)return!0;if(h&16)return s?Na(s,a,g):!!a;if(h&8){const f=e.dynamicProps;for(let b=0;b<f.length;b++){const x=f[b];if(a[x]!==s[x]&&!is(g,x))return!0}}}else return(l||c)&&(!c||!c.$stable)?!0:s===a?!1:s?a?Na(s,a,g):!0:!!a;return!1}function Na(t,e,i){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let l=0;l<s.length;l++){const o=s[l];if(e[o]!==t[o]&&!is(i,o))return!0}return!1}function _f({vnode:t,parent:e},i){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=i,e=e.parent;else break}}const Yc=t=>t.__isSuspense;function bf(t,e){e&&e.pendingBranch?Vt(t)?e.effects.push(...t):e.effects.push(t):Eh(t)}const rn=Symbol.for("v-fgt"),ss=Symbol.for("v-txt"),ci=Symbol.for("v-cmt"),Ys=Symbol.for("v-stc");let _n=null,Ko=1;function Ga(t,e=!1){Ko+=t,t<0&&_n&&e&&(_n.hasOnce=!0)}function $c(t){return t?t.__v_isVNode===!0:!1}function cr(t,e){return t.type===e.type&&t.key===e.key}const Xc=({key:t})=>t??null,Ki=({ref:t,ref_key:e,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?be(t)||Ee(t)||qt(t)?{i:Ye,r:t,k:e,f:!!i}:t:null);function wf(t,e=null,i=null,s=0,l=null,o=t===rn?0:1,a=!1,c=!1){const h={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Xc(e),ref:e&&Ki(e),scopeId:Ec,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:l,dynamicChildren:null,appContext:null,ctx:Ye};return c?(jo(h,i),o&128&&t.normalize(h)):i&&(h.shapeFlag|=be(i)?8:16),Ko>0&&!a&&_n&&(h.patchFlag>0||o&6)&&h.patchFlag!==32&&_n.push(h),h}const pe=Sf;function Sf(t,e=null,i=null,s=0,l=null,o=!1){if((!t||t===qh)&&(t=ci),$c(t)){const c=Qn(t,e,!0);return i&&jo(c,i),Ko>0&&!o&&_n&&(c.shapeFlag&6?_n[_n.indexOf(t)]=c:_n.push(c)),c.patchFlag=-2,c}if(Ff(t)&&(t=t.__vccOpts),e){e=xf(e);let{class:c,style:h}=e;c&&!be(c)&&(e.class=To(c)),me(h)&&(Do(h)&&!Vt(h)&&(h=Ae({},h)),e.style=Po(h))}const a=be(t)?1:Yc(t)?128:kh(t)?64:me(t)?4:qt(t)?2:0;return wf(t,e,i,s,l,a,o,!0)}function xf(t){return t?Do(t)||Gc(t)?Ae({},t):t:null}function Qn(t,e,i=!1,s=!1){const{props:l,ref:o,patchFlag:a,children:c,transition:h}=t,g=e?Cf(l||{},e):l,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:g,key:g&&Xc(g),ref:e&&e.ref?i&&o?Vt(o)?o.concat(Ki(e)):[o,Ki(e)]:Ki(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==rn?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:h,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Qn(t.ssContent),ssFallback:t.ssFallback&&Qn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return h&&s&&Go(f,h.clone(f)),f}function Qc(t=" ",e=0){return pe(ss,null,t,e)}function ze(t){return t==null||typeof t=="boolean"?pe(ci):Vt(t)?pe(rn,null,t.slice()):$c(t)?yn(t):pe(ss,null,String(t))}function yn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Qn(t)}function jo(t,e){let i=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(Vt(e))i=16;else if(typeof e=="object")if(s&65){const l=e.default;l&&(l._c&&(l._d=!1),jo(t,l()),l._c&&(l._d=!0));return}else{i=32;const l=e._;!l&&!Gc(e)?e._ctx=Ye:l===3&&Ye&&(Ye.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else qt(e)?(e={default:e,_ctx:Ye},i=32):(e=String(e),s&64?(i=16,e=[Qc(e)]):i=8);t.children=e,t.shapeFlag|=i}function Cf(...t){const e={};for(let i=0;i<t.length;i++){const s=t[i];for(const l in s)if(l==="class")e.class!==s.class&&(e.class=To([e.class,s.class]));else if(l==="style")e.style=Po([e.style,s.style]);else if(Ji(l)){const o=e[l],a=s[l];a&&o!==a&&!(Vt(o)&&o.includes(a))&&(e[l]=o?[].concat(o,a):a)}else l!==""&&(e[l]=s[l])}return e}function He(t,e,i,s=null){Xe(t,e,7,[i,s])}const Pf=Ic();let Tf=0;function Ef(t,e,i){const s=t.type,l=(e?e.appContext:t.appContext)||Pf,o={uid:Tf++,vnode:t,type:s,parent:e,appContext:l,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Yu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(l.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Bc(s,l),emitsOptions:zc(s,l),emit:null,emitted:null,propsDefaults:se,inheritAttrs:s.inheritAttrs,ctx:se,data:se,props:se,attrs:se,slots:se,refs:se,setupState:se,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=pf.bind(null,o),t.ce&&t.ce(o),o}let Me=null,Xi,mo;{const t=es(),e=(i,s)=>{let l;return(l=t[i])||(l=t[i]=[]),l.push(s),o=>{l.length>1?l.forEach(a=>a(o)):l[0](o)}};Xi=e("__VUE_INSTANCE_SETTERS__",i=>Me=i),mo=e("__VUE_SSR_SETTERS__",i=>ui=i)}const fi=t=>{const e=Me;return Xi(t),t.scope.on(),()=>{t.scope.off(),Xi(e)}},La=()=>{Me&&Me.scope.off(),Xi(null)};function Jc(t){return t.vnode.shapeFlag&4}let ui=!1;function Af(t,e=!1,i=!1){e&&mo(e);const{props:s,children:l}=t.vnode,o=Jc(t);Zh(t,s,o,e),rf(t,l,i);const a=o?Rf(t,e):void 0;return e&&mo(!1),a}function Rf(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Vh);const{setup:s}=i;if(s){Sn();const l=t.setupContext=s.length>1?Of(t):null,o=fi(t),a=hi(s,t,0,[t.props,l]),c=rc(a);if(xn(),o(),(c||t.sp)&&!ii(t)&&Ac(t),c){if(a.then(La,La),e)return a.then(h=>{Ba(t,h)}).catch(h=>{ns(h,t,0)});t.asyncDep=a}else Ba(t,a)}else Zc(t)}function Ba(t,e,i){qt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:me(e)&&(t.setupState=Sc(e)),Zc(t)}function Zc(t,e,i){const s=t.type;t.render||(t.render=s.render||$e);{const l=fi(t);Sn();try{Hh(t)}finally{xn(),l()}}}const kf={get(t,e){return Te(t,"get",""),t[e]}};function Of(t){const e=i=>{t.exposed=i||{}};return{attrs:new Proxy(t.attrs,kf),slots:t.slots,emit:t.emit,expose:e}}function qo(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Sc(ph(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in si)return si[i](t)},has(e,i){return i in e||i in si}})):t.proxy}function Ff(t){return qt(t)&&"__vccOpts"in t}const Mf=(t,e)=>wh(t,e,ui),If="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let yo;const Ua=typeof window<"u"&&window.trustedTypes;if(Ua)try{yo=Ua.createPolicy("vue",{createHTML:t=>t})}catch{}const tu=yo?t=>yo.createHTML(t):t=>t,Df="http://www.w3.org/2000/svg",Nf="http://www.w3.org/1998/Math/MathML",nn=typeof document<"u"?document:null,Ka=nn&&nn.createElement("template"),Gf={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,s)=>{const l=e==="svg"?nn.createElementNS(Df,t):e==="mathml"?nn.createElementNS(Nf,t):i?nn.createElement(t,{is:i}):nn.createElement(t);return t==="select"&&s&&s.multiple!=null&&l.setAttribute("multiple",s.multiple),l},createText:t=>nn.createTextNode(t),createComment:t=>nn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>nn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,s,l,o){const a=i?i.previousSibling:e.lastChild;if(l&&(l===o||l.nextSibling))for(;e.insertBefore(l.cloneNode(!0),i),!(l===o||!(l=l.nextSibling)););else{Ka.innerHTML=tu(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const c=Ka.content;if(s==="svg"||s==="mathml"){const h=c.firstChild;for(;h.firstChild;)c.appendChild(h.firstChild);c.removeChild(h)}e.insertBefore(c,i)}return[a?a.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},Lf=Symbol("_vtc");function Bf(t,e,i){const s=t[Lf];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}const ja=Symbol("_vod"),Uf=Symbol("_vsh"),Kf=Symbol(""),jf=/(^|;)\s*display\s*:/;function qf(t,e,i){const s=t.style,l=be(i);let o=!1;if(i&&!l){if(e)if(be(e))for(const a of e.split(";")){const c=a.slice(0,a.indexOf(":")).trim();i[c]==null&&ji(s,c,"")}else for(const a in e)i[a]==null&&ji(s,a,"");for(const a in i)a==="display"&&(o=!0),ji(s,a,i[a])}else if(l){if(e!==i){const a=s[Kf];a&&(i+=";"+a),s.cssText=i,o=jf.test(i)}}else e&&t.removeAttribute("style");ja in t&&(t[ja]=o?s.display:"",t[Uf]&&(s.display="none"))}const qa=/\s*!important$/;function ji(t,e,i){if(Vt(i))i.forEach(s=>ji(t,e,s));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const s=Vf(t,e);qa.test(i)?t.setProperty(Gn(s),i.replace(qa,""),"important"):t[s]=i}}const Va=["Webkit","Moz","ms"],$s={};function Vf(t,e){const i=$s[e];if(i)return i;let s=wn(e);if(s!=="filter"&&s in t)return $s[e]=s;s=ic(s);for(let l=0;l<Va.length;l++){const o=Va[l]+s;if(o in t)return $s[e]=o}return e}const Ha="http://www.w3.org/1999/xlink";function Wa(t,e,i,s,l,o=zu(e)){s&&e.startsWith("xlink:")?i==null?t.removeAttributeNS(Ha,e.slice(6,e.length)):t.setAttributeNS(Ha,e,i):i==null||o&&!oc(i)?t.removeAttribute(e):t.setAttribute(e,o?"":Jn(i)?String(i):i)}function za(t,e,i,s,l){if(e==="innerHTML"||e==="textContent"){i!=null&&(t[e]=e==="innerHTML"?tu(i):i);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const c=o==="OPTION"?t.getAttribute("value")||"":t.value,h=i==null?t.type==="checkbox"?"on":"":String(i);(c!==h||!("_value"in t))&&(t.value=h),i==null&&t.removeAttribute(e),t._value=i;return}let a=!1;if(i===""||i==null){const c=typeof t[e];c==="boolean"?i=oc(i):i==null&&c==="string"?(i="",a=!0):c==="number"&&(i=0,a=!0)}try{t[e]=i}catch{}a&&t.removeAttribute(l||e)}function Hf(t,e,i,s){t.addEventListener(e,i,s)}function Wf(t,e,i,s){t.removeEventListener(e,i,s)}const Ya=Symbol("_vei");function zf(t,e,i,s,l=null){const o=t[Ya]||(t[Ya]={}),a=o[e];if(s&&a)a.value=s;else{const[c,h]=Yf(e);if(s){const g=o[e]=Qf(s,l);Hf(t,c,g,h)}else a&&(Wf(t,c,a,h),o[e]=void 0)}}const $a=/(?:Once|Passive|Capture)$/;function Yf(t){let e;if($a.test(t)){e={};let s;for(;s=t.match($a);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Gn(t.slice(2)),e]}let Xs=0;const $f=Promise.resolve(),Xf=()=>Xs||($f.then(()=>Xs=0),Xs=Date.now());function Qf(t,e){const i=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=i.attached)return;Xe(Jf(s,i.value),e,5,[s])};return i.value=t,i.attached=Xf(),i}function Jf(t,e){if(Vt(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(s=>l=>!l._stopped&&s&&s(l))}else return e}const Xa=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Zf=(t,e,i,s,l,o)=>{const a=l==="svg";e==="class"?Bf(t,s,a):e==="style"?qf(t,i,s):Ji(e)?So(e)||zf(t,e,i,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):td(t,e,s,a))?(za(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Wa(t,e,s,a,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!be(s))?za(t,wn(e),s,o,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Wa(t,e,s,a))};function td(t,e,i,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Xa(e)&&qt(i));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const l=t.tagName;if(l==="IMG"||l==="VIDEO"||l==="CANVAS"||l==="SOURCE")return!1}return Xa(e)&&be(i)?!1:e in t}const ed=Ae({patchProp:Zf},Gf);let Qa;function nd(){return Qa||(Qa=of(ed))}const rd=(...t)=>{const e=nd().createApp(...t),{mount:i}=e;return e.mount=s=>{const l=sd(s);if(!l)return;const o=e._component;!qt(o)&&!o.render&&!o.template&&(o.template=l.innerHTML),l.nodeType===1&&(l.textContent="");const a=i(l,!1,id(l));return l instanceof Element&&(l.removeAttribute("v-cloak"),l.setAttribute("data-v-app","")),a},e};function id(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function sd(t){return be(t)?document.querySelector(t):t}var vo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qi={exports:{}},ur={},Qs={},Js={},Ja;function zt(){return Ja||(Ja=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof vo<"u"?vo:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.20",isBrowser:i(),isUnminified:/param/.test((function(l){}).toString()),dblClickWindow:400,getAngle(l){return t.Konva.angleDeg?l*e:l},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var l;return(l=t.Konva.Transformer)===null||l===void 0?void 0:l.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(l){t.glob.Konva=l}};const s=l=>{t.Konva[l.prototype.getClassName()]=l};t._registerNode=s,t.Konva._injectGlobal(t.Konva)}(Js)),Js}var Zs={},Za;function ue(){return Za||(Za=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=zt();class i{constructor(S=[1,0,0,1,0,0]){this.dirty=!1,this.m=S&&S.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(S){S.m[0]=this.m[0],S.m[1]=this.m[1],S.m[2]=this.m[2],S.m[3]=this.m[3],S.m[4]=this.m[4],S.m[5]=this.m[5]}point(S){const A=this.m;return{x:A[0]*S.x+A[2]*S.y+A[4],y:A[1]*S.x+A[3]*S.y+A[5]}}translate(S,A){return this.m[4]+=this.m[0]*S+this.m[2]*A,this.m[5]+=this.m[1]*S+this.m[3]*A,this}scale(S,A){return this.m[0]*=S,this.m[1]*=S,this.m[2]*=A,this.m[3]*=A,this}rotate(S){const A=Math.cos(S),M=Math.sin(S),j=this.m[0]*A+this.m[2]*M,D=this.m[1]*A+this.m[3]*M,I=this.m[0]*-M+this.m[2]*A,O=this.m[1]*-M+this.m[3]*A;return this.m[0]=j,this.m[1]=D,this.m[2]=I,this.m[3]=O,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(S,A){const M=this.m[0]+this.m[2]*A,j=this.m[1]+this.m[3]*A,D=this.m[2]+this.m[0]*S,I=this.m[3]+this.m[1]*S;return this.m[0]=M,this.m[1]=j,this.m[2]=D,this.m[3]=I,this}multiply(S){const A=this.m[0]*S.m[0]+this.m[2]*S.m[1],M=this.m[1]*S.m[0]+this.m[3]*S.m[1],j=this.m[0]*S.m[2]+this.m[2]*S.m[3],D=this.m[1]*S.m[2]+this.m[3]*S.m[3],I=this.m[0]*S.m[4]+this.m[2]*S.m[5]+this.m[4],O=this.m[1]*S.m[4]+this.m[3]*S.m[5]+this.m[5];return this.m[0]=A,this.m[1]=M,this.m[2]=j,this.m[3]=D,this.m[4]=I,this.m[5]=O,this}invert(){const S=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),A=this.m[3]*S,M=-this.m[1]*S,j=-this.m[2]*S,D=this.m[0]*S,I=S*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),O=S*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=A,this.m[1]=M,this.m[2]=j,this.m[3]=D,this.m[4]=I,this.m[5]=O,this}getMatrix(){return this.m}decompose(){const S=this.m[0],A=this.m[1],M=this.m[2],j=this.m[3],D=this.m[4],I=this.m[5],O=S*j-A*M,k={x:D,y:I,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(S!=0||A!=0){const K=Math.sqrt(S*S+A*A);k.rotation=A>0?Math.acos(S/K):-Math.acos(S/K),k.scaleX=K,k.scaleY=O/K,k.skewX=(S*M+A*j)/O,k.skewY=0}else if(M!=0||j!=0){const K=Math.sqrt(M*M+j*j);k.rotation=Math.PI/2-(j>0?Math.acos(-M/K):-Math.acos(M/K)),k.scaleX=O/K,k.scaleY=K,k.skewX=0,k.skewY=(S*M+A*j)/O}return k.rotation=t.Util._getRotation(k.rotation),k}}t.Transform=i;const s="[object Array]",l="[object Number]",o="[object String]",a="[object Boolean]",c=Math.PI/180,h=180/Math.PI,g="#",f="",b="0",x="Konva warning: ",v="Konva error: ",y="rgb(",w={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},T=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let F=[];const m=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(d){setTimeout(d,60)};t.Util={_isElement(d){return!!(d&&d.nodeType==1)},_isFunction(d){return!!(d&&d.constructor&&d.call&&d.apply)},_isPlainObject(d){return!!d&&d.constructor===Object},_isArray(d){return Object.prototype.toString.call(d)===s},_isNumber(d){return Object.prototype.toString.call(d)===l&&!isNaN(d)&&isFinite(d)},_isString(d){return Object.prototype.toString.call(d)===o},_isBoolean(d){return Object.prototype.toString.call(d)===a},isObject(d){return d instanceof Object},isValidSelector(d){if(typeof d!="string")return!1;const S=d[0];return S==="#"||S==="."||S===S.toUpperCase()},_sign(d){return d===0||d>0?1:-1},requestAnimFrame(d){F.push(d),F.length===1&&m(function(){const S=F;F=[],S.forEach(function(A){A()})})},createCanvasElement(){const d=document.createElement("canvas");try{d.style=d.style||{}}catch{}return d},createImageElement(){return document.createElement("img")},_isInDocument(d){for(;d=d.parentNode;)if(d==document)return!0;return!1},_urlToImage(d,S){const A=t.Util.createImageElement();A.onload=function(){S(A)},A.src=d},_rgbToHex(d,S,A){return((1<<24)+(d<<16)+(S<<8)+A).toString(16).slice(1)},_hexToRgb(d){d=d.replace(g,f);const S=parseInt(d,16);return{r:S>>16&255,g:S>>8&255,b:S&255}},getRandomColor(){let d=(Math.random()*16777215<<0).toString(16);for(;d.length<6;)d=b+d;return g+d},getRGB(d){let S;return d in w?(S=w[d],{r:S[0],g:S[1],b:S[2]}):d[0]===g?this._hexToRgb(d.substring(1)):d.substr(0,4)===y?(S=T.exec(d.replace(/ /g,"")),{r:parseInt(S[1],10),g:parseInt(S[2],10),b:parseInt(S[3],10)}):{r:0,g:0,b:0}},colorToRGBA(d){return d=d||"black",t.Util._namedColorToRBA(d)||t.Util._hex3ColorToRGBA(d)||t.Util._hex4ColorToRGBA(d)||t.Util._hex6ColorToRGBA(d)||t.Util._hex8ColorToRGBA(d)||t.Util._rgbColorToRGBA(d)||t.Util._rgbaColorToRGBA(d)||t.Util._hslColorToRGBA(d)},_namedColorToRBA(d){const S=w[d.toLowerCase()];return S?{r:S[0],g:S[1],b:S[2],a:1}:null},_rgbColorToRGBA(d){if(d.indexOf("rgb(")===0){d=d.match(/rgb\(([^)]+)\)/)[1];const S=d.split(/ *, */).map(Number);return{r:S[0],g:S[1],b:S[2],a:1}}},_rgbaColorToRGBA(d){if(d.indexOf("rgba(")===0){d=d.match(/rgba\(([^)]+)\)/)[1];const S=d.split(/ *, */).map((A,M)=>A.slice(-1)==="%"?M===3?parseInt(A)/100:parseInt(A)/100*255:Number(A));return{r:S[0],g:S[1],b:S[2],a:S[3]}}},_hex8ColorToRGBA(d){if(d[0]==="#"&&d.length===9)return{r:parseInt(d.slice(1,3),16),g:parseInt(d.slice(3,5),16),b:parseInt(d.slice(5,7),16),a:parseInt(d.slice(7,9),16)/255}},_hex6ColorToRGBA(d){if(d[0]==="#"&&d.length===7)return{r:parseInt(d.slice(1,3),16),g:parseInt(d.slice(3,5),16),b:parseInt(d.slice(5,7),16),a:1}},_hex4ColorToRGBA(d){if(d[0]==="#"&&d.length===5)return{r:parseInt(d[1]+d[1],16),g:parseInt(d[2]+d[2],16),b:parseInt(d[3]+d[3],16),a:parseInt(d[4]+d[4],16)/255}},_hex3ColorToRGBA(d){if(d[0]==="#"&&d.length===4)return{r:parseInt(d[1]+d[1],16),g:parseInt(d[2]+d[2],16),b:parseInt(d[3]+d[3],16),a:1}},_hslColorToRGBA(d){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(d)){const[S,...A]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(d),M=Number(A[0])/360,j=Number(A[1])/100,D=Number(A[2])/100;let I,O,k;if(j===0)return k=D*255,{r:Math.round(k),g:Math.round(k),b:Math.round(k),a:1};D<.5?I=D*(1+j):I=D+j-D*j;const K=2*D-I,p=[0,0,0];for(let E=0;E<3;E++)O=M+1/3*-(E-1),O<0&&O++,O>1&&O--,6*O<1?k=K+(I-K)*6*O:2*O<1?k=I:3*O<2?k=K+(I-K)*(2/3-O)*6:k=K,p[E]=k*255;return{r:Math.round(p[0]),g:Math.round(p[1]),b:Math.round(p[2]),a:1}}},haveIntersection(d,S){return!(S.x>d.x+d.width||S.x+S.width<d.x||S.y>d.y+d.height||S.y+S.height<d.y)},cloneObject(d){const S={};for(const A in d)this._isPlainObject(d[A])?S[A]=this.cloneObject(d[A]):this._isArray(d[A])?S[A]=this.cloneArray(d[A]):S[A]=d[A];return S},cloneArray(d){return d.slice(0)},degToRad(d){return d*c},radToDeg(d){return d*h},_degToRad(d){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(d)},_radToDeg(d){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(d)},_getRotation(d){return e.Konva.angleDeg?t.Util.radToDeg(d):d},_capitalize(d){return d.charAt(0).toUpperCase()+d.slice(1)},throw(d){throw new Error(v+d)},error(d){console.error(v+d)},warn(d){e.Konva.showWarnings&&console.warn(x+d)},each(d,S){for(const A in d)S(A,d[A])},_inRange(d,S,A){return S<=d&&d<A},_getProjectionToSegment(d,S,A,M,j,D){let I,O,k;const K=(d-A)*(d-A)+(S-M)*(S-M);if(K==0)I=d,O=S,k=(j-A)*(j-A)+(D-M)*(D-M);else{const p=((j-d)*(A-d)+(D-S)*(M-S))/K;p<0?(I=d,O=S,k=(d-j)*(d-j)+(S-D)*(S-D)):p>1?(I=A,O=M,k=(A-j)*(A-j)+(M-D)*(M-D)):(I=d+p*(A-d),O=S+p*(M-S),k=(I-j)*(I-j)+(O-D)*(O-D))}return[I,O,k]},_getProjectionToLine(d,S,A){const M=t.Util.cloneObject(d);let j=Number.MAX_VALUE;return S.forEach(function(D,I){if(!A&&I===S.length-1)return;const O=S[(I+1)%S.length],k=t.Util._getProjectionToSegment(D.x,D.y,O.x,O.y,d.x,d.y),K=k[0],p=k[1],E=k[2];E<j&&(M.x=K,M.y=p,j=E)}),M},_prepareArrayForTween(d,S,A){const M=[],j=[];if(d.length>S.length){const I=S;S=d,d=I}for(let I=0;I<d.length;I+=2)M.push({x:d[I],y:d[I+1]});for(let I=0;I<S.length;I+=2)j.push({x:S[I],y:S[I+1]});const D=[];return j.forEach(function(I){const O=t.Util._getProjectionToLine(I,M,A);D.push(O.x),D.push(O.y)}),D},_prepareToStringify(d){let S;d.visitedByCircularReferenceRemoval=!0;for(const A in d)if(d.hasOwnProperty(A)&&d[A]&&typeof d[A]=="object"){if(S=Object.getOwnPropertyDescriptor(d,A),d[A].visitedByCircularReferenceRemoval||t.Util._isElement(d[A]))if(S.configurable)delete d[A];else return null;else if(t.Util._prepareToStringify(d[A])===null)if(S.configurable)delete d[A];else return null}return delete d.visitedByCircularReferenceRemoval,d},_assign(d,S){for(const A in S)d[A]=S[A];return d},_getFirstPointerId(d){return d.touches?d.changedTouches[0].identifier:d.pointerId||999},releaseCanvas(...d){e.Konva.releaseCanvasOnDestroy&&d.forEach(S=>{S.width=0,S.height=0})},drawRoundedRectPath(d,S,A,M){let j=0,D=0,I=0,O=0;typeof M=="number"?j=D=I=O=Math.min(M,S/2,A/2):(j=Math.min(M[0]||0,S/2,A/2),D=Math.min(M[1]||0,S/2,A/2),O=Math.min(M[2]||0,S/2,A/2),I=Math.min(M[3]||0,S/2,A/2)),d.moveTo(j,0),d.lineTo(S-D,0),d.arc(S-D,D,D,Math.PI*3/2,0,!1),d.lineTo(S,A-O),d.arc(S-O,A-O,O,0,Math.PI/2,!1),d.lineTo(I,A),d.arc(I,A-I,I,Math.PI/2,Math.PI,!1),d.lineTo(0,j),d.arc(j,j,j,Math.PI,Math.PI*3/2,!1)}}}(Zs)),Zs}var hr={},to={},Ie={},tl;function $t(){if(tl)return Ie;tl=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.RGBComponent=s,Ie.alphaComponent=l,Ie.getNumberValidator=o,Ie.getNumberOrArrayOfNumbersValidator=a,Ie.getNumberOrAutoValidator=c,Ie.getStringValidator=h,Ie.getStringOrGradientValidator=g,Ie.getFunctionValidator=f,Ie.getNumberArrayValidator=b,Ie.getBooleanValidator=x,Ie.getComponentValidator=v;const t=zt(),e=ue();function i(y){return e.Util._isString(y)?'"'+y+'"':Object.prototype.toString.call(y)==="[object Number]"||e.Util._isBoolean(y)?y:Object.prototype.toString.call(y)}function s(y){return y>255?255:y<0?0:Math.round(y)}function l(y){return y>1?1:y<1e-4?1e-4:y}function o(){if(t.Konva.isUnminified)return function(y,w){return e.Util._isNumber(y)||e.Util.warn(i(y)+' is a not valid value for "'+w+'" attribute. The value should be a number.'),y}}function a(y){if(t.Konva.isUnminified)return function(w,T){let F=e.Util._isNumber(w),m=e.Util._isArray(w)&&w.length==y;return!F&&!m&&e.Util.warn(i(w)+' is a not valid value for "'+T+'" attribute. The value should be a number or Array<number>('+y+")"),w}}function c(){if(t.Konva.isUnminified)return function(y,w){var T=e.Util._isNumber(y),F=y==="auto";return T||F||e.Util.warn(i(y)+' is a not valid value for "'+w+'" attribute. The value should be a number or "auto".'),y}}function h(){if(t.Konva.isUnminified)return function(y,w){return e.Util._isString(y)||e.Util.warn(i(y)+' is a not valid value for "'+w+'" attribute. The value should be a string.'),y}}function g(){if(t.Konva.isUnminified)return function(y,w){const T=e.Util._isString(y),F=Object.prototype.toString.call(y)==="[object CanvasGradient]"||y&&y.addColorStop;return T||F||e.Util.warn(i(y)+' is a not valid value for "'+w+'" attribute. The value should be a string or a native gradient.'),y}}function f(){if(t.Konva.isUnminified)return function(y,w){return e.Util._isFunction(y)||e.Util.warn(i(y)+' is a not valid value for "'+w+'" attribute. The value should be a function.'),y}}function b(){if(t.Konva.isUnminified)return function(y,w){const T=Int8Array?Object.getPrototypeOf(Int8Array):null;return T&&y instanceof T||(e.Util._isArray(y)?y.forEach(function(F){e.Util._isNumber(F)||e.Util.warn('"'+w+'" attribute has non numeric element '+F+". Make sure that all elements are numbers.")}):e.Util.warn(i(y)+' is a not valid value for "'+w+'" attribute. The value should be a array of numbers.')),y}}function x(){if(t.Konva.isUnminified)return function(y,w){var T=y===!0||y===!1;return T||e.Util.warn(i(y)+' is a not valid value for "'+w+'" attribute. The value should be a boolean.'),y}}function v(y){if(t.Konva.isUnminified)return function(w,T){return w==null||e.Util.isObject(w)||e.Util.warn(i(w)+' is a not valid value for "'+T+'" attribute. The value should be an object with properties '+y),w}}return Ie}var el;function Yt(){return el||(el=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=ue(),i=$t(),s="get",l="set";t.Factory={addGetterSetter(o,a,c,h,g){t.Factory.addGetter(o,a,c),t.Factory.addSetter(o,a,h,g),t.Factory.addOverloadedGetterSetter(o,a)},addGetter(o,a,c){var h=s+e.Util._capitalize(a);o.prototype[h]=o.prototype[h]||function(){const g=this.attrs[a];return g===void 0?c:g}},addSetter(o,a,c,h){var g=l+e.Util._capitalize(a);o.prototype[g]||t.Factory.overWriteSetter(o,a,c,h)},overWriteSetter(o,a,c,h){var g=l+e.Util._capitalize(a);o.prototype[g]=function(f){return c&&f!==void 0&&f!==null&&(f=c.call(this,f,a)),this._setAttr(a,f),h&&h.call(this),this}},addComponentsGetterSetter(o,a,c,h,g){const f=c.length,b=e.Util._capitalize,x=s+b(a),v=l+b(a);o.prototype[x]=function(){const w={};for(let T=0;T<f;T++){const F=c[T];w[F]=this.getAttr(a+b(F))}return w};const y=(0,i.getComponentValidator)(c);o.prototype[v]=function(w){const T=this.attrs[a];h&&(w=h.call(this,w,a)),y&&y.call(this,w,a);for(const F in w)w.hasOwnProperty(F)&&this._setAttr(a+b(F),w[F]);return w||c.forEach(F=>{this._setAttr(a+b(F),void 0)}),this._fireChangeEvent(a,T,w),g&&g.call(this),this},t.Factory.addOverloadedGetterSetter(o,a)},addOverloadedGetterSetter(o,a){var c=e.Util._capitalize(a),h=l+c,g=s+c;o.prototype[a]=function(){return arguments.length?(this[h](arguments[0]),this):this[g]()}},addDeprecatedGetterSetter(o,a,c,h){e.Util.error("Adding deprecated "+a);const g=s+e.Util._capitalize(a),f=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";o.prototype[g]=function(){e.Util.error(f);const b=this.attrs[a];return b===void 0?c:b},t.Factory.addSetter(o,a,h,function(){e.Util.error(f)}),t.Factory.addOverloadedGetterSetter(o,a)},backCompat(o,a){e.Util.each(a,function(c,h){const g=o.prototype[h],f=s+e.Util._capitalize(c),b=l+e.Util._capitalize(c);function x(){g.apply(this,arguments),e.Util.error('"'+c+'" method is deprecated and will be removed soon. Use ""'+h+'" instead.')}o.prototype[c]=x,o.prototype[f]=x,o.prototype[b]=x})},afterSetFilter(){this._filterUpToDate=!1}}}(to)),to}var tn={},en={},nl;function nu(){if(nl)return en;nl=1,Object.defineProperty(en,"__esModule",{value:!0}),en.HitContext=en.SceneContext=en.Context=void 0;const t=ue(),e=zt();function i(F){const m=[],d=F.length,S=t.Util;for(let A=0;A<d;A++){let M=F[A];S._isNumber(M)?M=Math.round(M*1e3)/1e3:S._isString(M)||(M=M+""),m.push(M)}return m}const s=",",l="(",o=")",a="([",c="])",h=";",g="()",f="=",b=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],x=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],v=100;let y=class{constructor(m){this.canvas=m,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(m){m.fillEnabled()&&this._fill(m)}_fill(m){}strokeShape(m){m.hasStroke()&&this._stroke(m)}_stroke(m){}fillStrokeShape(m){m.attrs.fillAfterStrokeEnabled?(this.strokeShape(m),this.fillShape(m)):(this.fillShape(m),this.strokeShape(m))}getTrace(m,d){let S=this.traceArr,A=S.length,M="",j,D,I,O;for(j=0;j<A;j++)D=S[j],I=D.method,I?(O=D.args,M+=I,m?M+=g:t.Util._isArray(O[0])?M+=a+O.join(s)+c:(d&&(O=O.map(k=>typeof k=="number"?Math.floor(k):k)),M+=l+O.join(s)+o)):(M+=D.property,m||(M+=f+D.val)),M+=h;return M}clearTrace(){this.traceArr=[]}_trace(m){let d=this.traceArr,S;d.push(m),S=d.length,S>=v&&d.shift()}reset(){const m=this.getCanvas().getPixelRatio();this.setTransform(1*m,0,0,1*m,0,0)}getCanvas(){return this.canvas}clear(m){const d=this.getCanvas();m?this.clearRect(m.x||0,m.y||0,m.width||0,m.height||0):this.clearRect(0,0,d.getWidth()/d.pixelRatio,d.getHeight()/d.pixelRatio)}_applyLineCap(m){const d=m.attrs.lineCap;d&&this.setAttr("lineCap",d)}_applyOpacity(m){const d=m.getAbsoluteOpacity();d!==1&&this.setAttr("globalAlpha",d)}_applyLineJoin(m){const d=m.attrs.lineJoin;d&&this.setAttr("lineJoin",d)}setAttr(m,d){this._context[m]=d}arc(m,d,S,A,M,j){this._context.arc(m,d,S,A,M,j)}arcTo(m,d,S,A,M){this._context.arcTo(m,d,S,A,M)}beginPath(){this._context.beginPath()}bezierCurveTo(m,d,S,A,M,j){this._context.bezierCurveTo(m,d,S,A,M,j)}clearRect(m,d,S,A){this._context.clearRect(m,d,S,A)}clip(...m){this._context.clip.apply(this._context,m)}closePath(){this._context.closePath()}createImageData(m,d){const S=arguments;if(S.length===2)return this._context.createImageData(m,d);if(S.length===1)return this._context.createImageData(m)}createLinearGradient(m,d,S,A){return this._context.createLinearGradient(m,d,S,A)}createPattern(m,d){return this._context.createPattern(m,d)}createRadialGradient(m,d,S,A,M,j){return this._context.createRadialGradient(m,d,S,A,M,j)}drawImage(m,d,S,A,M,j,D,I,O){const k=arguments,K=this._context;k.length===3?K.drawImage(m,d,S):k.length===5?K.drawImage(m,d,S,A,M):k.length===9&&K.drawImage(m,d,S,A,M,j,D,I,O)}ellipse(m,d,S,A,M,j,D,I){this._context.ellipse(m,d,S,A,M,j,D,I)}isPointInPath(m,d,S,A){return S?this._context.isPointInPath(S,m,d,A):this._context.isPointInPath(m,d,A)}fill(...m){this._context.fill.apply(this._context,m)}fillRect(m,d,S,A){this._context.fillRect(m,d,S,A)}strokeRect(m,d,S,A){this._context.strokeRect(m,d,S,A)}fillText(m,d,S,A){A?this._context.fillText(m,d,S,A):this._context.fillText(m,d,S)}measureText(m){return this._context.measureText(m)}getImageData(m,d,S,A){return this._context.getImageData(m,d,S,A)}lineTo(m,d){this._context.lineTo(m,d)}moveTo(m,d){this._context.moveTo(m,d)}rect(m,d,S,A){this._context.rect(m,d,S,A)}roundRect(m,d,S,A,M){this._context.roundRect(m,d,S,A,M)}putImageData(m,d,S){this._context.putImageData(m,d,S)}quadraticCurveTo(m,d,S,A){this._context.quadraticCurveTo(m,d,S,A)}restore(){this._context.restore()}rotate(m){this._context.rotate(m)}save(){this._context.save()}scale(m,d){this._context.scale(m,d)}setLineDash(m){this._context.setLineDash?this._context.setLineDash(m):"mozDash"in this._context?this._context.mozDash=m:"webkitLineDash"in this._context&&(this._context.webkitLineDash=m)}getLineDash(){return this._context.getLineDash()}setTransform(m,d,S,A,M,j){this._context.setTransform(m,d,S,A,M,j)}stroke(m){m?this._context.stroke(m):this._context.stroke()}strokeText(m,d,S,A){this._context.strokeText(m,d,S,A)}transform(m,d,S,A,M,j){this._context.transform(m,d,S,A,M,j)}translate(m,d){this._context.translate(m,d)}_enableTrace(){let m=this,d=b.length,S=this.setAttr,A,M;const j=function(D){let I=m[D],O;m[D]=function(){return M=i(Array.prototype.slice.call(arguments,0)),O=I.apply(m,arguments),m._trace({method:D,args:M}),O}};for(A=0;A<d;A++)j(b[A]);m.setAttr=function(){S.apply(m,arguments);const D=arguments[0];let I=arguments[1];(D==="shadowOffsetX"||D==="shadowOffsetY"||D==="shadowBlur")&&(I=I/this.canvas.getPixelRatio()),m._trace({property:D,val:I})}}_applyGlobalCompositeOperation(m){const d=m.attrs.globalCompositeOperation;!d||d==="source-over"||this.setAttr("globalCompositeOperation",d)}};en.Context=y,x.forEach(function(F){Object.defineProperty(y.prototype,F,{get(){return this._context[F]},set(m){this._context[F]=m}})});class w extends y{constructor(m,{willReadFrequently:d=!1}={}){super(m),this._context=m._canvas.getContext("2d",{willReadFrequently:d})}_fillColor(m){const d=m.fill();this.setAttr("fillStyle",d),m._fillFunc(this)}_fillPattern(m){this.setAttr("fillStyle",m._getFillPattern()),m._fillFunc(this)}_fillLinearGradient(m){const d=m._getLinearGradient();d&&(this.setAttr("fillStyle",d),m._fillFunc(this))}_fillRadialGradient(m){const d=m._getRadialGradient();d&&(this.setAttr("fillStyle",d),m._fillFunc(this))}_fill(m){const d=m.fill(),S=m.getFillPriority();if(d&&S==="color"){this._fillColor(m);return}const A=m.getFillPatternImage();if(A&&S==="pattern"){this._fillPattern(m);return}const M=m.getFillLinearGradientColorStops();if(M&&S==="linear-gradient"){this._fillLinearGradient(m);return}const j=m.getFillRadialGradientColorStops();if(j&&S==="radial-gradient"){this._fillRadialGradient(m);return}d?this._fillColor(m):A?this._fillPattern(m):M?this._fillLinearGradient(m):j&&this._fillRadialGradient(m)}_strokeLinearGradient(m){const d=m.getStrokeLinearGradientStartPoint(),S=m.getStrokeLinearGradientEndPoint(),A=m.getStrokeLinearGradientColorStops(),M=this.createLinearGradient(d.x,d.y,S.x,S.y);if(A){for(let j=0;j<A.length;j+=2)M.addColorStop(A[j],A[j+1]);this.setAttr("strokeStyle",M)}}_stroke(m){const d=m.dash(),S=m.getStrokeScaleEnabled();if(m.hasStroke()){if(!S){this.save();const M=this.getCanvas().getPixelRatio();this.setTransform(M,0,0,M,0,0)}this._applyLineCap(m),d&&m.dashEnabled()&&(this.setLineDash(d),this.setAttr("lineDashOffset",m.dashOffset())),this.setAttr("lineWidth",m.strokeWidth()),m.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),m.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(m):this.setAttr("strokeStyle",m.stroke()),m._strokeFunc(this),S||this.restore()}}_applyShadow(m){var d,S,A;const M=(d=m.getShadowRGBA())!==null&&d!==void 0?d:"black",j=(S=m.getShadowBlur())!==null&&S!==void 0?S:5,D=(A=m.getShadowOffset())!==null&&A!==void 0?A:{x:0,y:0},I=m.getAbsoluteScale(),O=this.canvas.getPixelRatio(),k=I.x*O,K=I.y*O;this.setAttr("shadowColor",M),this.setAttr("shadowBlur",j*Math.min(Math.abs(k),Math.abs(K))),this.setAttr("shadowOffsetX",D.x*k),this.setAttr("shadowOffsetY",D.y*K)}}en.SceneContext=w;class T extends y{constructor(m){super(m),this._context=m._canvas.getContext("2d",{willReadFrequently:!0})}_fill(m){this.save(),this.setAttr("fillStyle",m.colorKey),m._fillFuncHit(this),this.restore()}strokeShape(m){m.hasHitStroke()&&this._stroke(m)}_stroke(m){if(m.hasHitStroke()){const d=m.getStrokeScaleEnabled();if(!d){this.save();const M=this.getCanvas().getPixelRatio();this.setTransform(M,0,0,M,0,0)}this._applyLineCap(m);const S=m.hitStrokeWidth(),A=S==="auto"?m.strokeWidth():S;this.setAttr("lineWidth",A),this.setAttr("strokeStyle",m.colorKey),m._strokeFuncHit(this),d||this.restore()}}}return en.HitContext=T,en}var rl;function os(){if(rl)return tn;rl=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.HitCanvas=tn.SceneCanvas=tn.Canvas=void 0;const t=ue(),e=nu(),i=zt();let s;function l(){if(s)return s;const h=t.Util.createCanvasElement(),g=h.getContext("2d");return s=function(){const f=i.Konva._global.devicePixelRatio||1,b=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;return f/b}(),t.Util.releaseCanvas(h),s}let o=class{constructor(g){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const b=(g||{}).pixelRatio||i.Konva.pixelRatio||l();this.pixelRatio=b,this._canvas=t.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(g){const f=this.pixelRatio;this.pixelRatio=g,this.setSize(this.getWidth()/f,this.getHeight()/f)}setWidth(g){this.width=this._canvas.width=g*this.pixelRatio,this._canvas.style.width=g+"px";const f=this.pixelRatio;this.getContext()._context.scale(f,f)}setHeight(g){this.height=this._canvas.height=g*this.pixelRatio,this._canvas.style.height=g+"px";const f=this.pixelRatio;this.getContext()._context.scale(f,f)}getWidth(){return this.width}getHeight(){return this.height}setSize(g,f){this.setWidth(g||0),this.setHeight(f||0)}toDataURL(g,f){try{return this._canvas.toDataURL(g,f)}catch{try{return this._canvas.toDataURL()}catch(x){return t.Util.error("Unable to get data URL. "+x.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};tn.Canvas=o;class a extends o{constructor(g={width:0,height:0,willReadFrequently:!1}){super(g),this.context=new e.SceneContext(this,{willReadFrequently:g.willReadFrequently}),this.setSize(g.width,g.height)}}tn.SceneCanvas=a;class c extends o{constructor(g={width:0,height:0}){super(g),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(g.width,g.height)}}return tn.HitCanvas=c,tn}var eo={},il;function Vo(){return il||(il=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=zt(),i=ue();t.DD={get isDragging(){let s=!1;return t.DD._dragElements.forEach(l=>{l.dragStatus==="dragging"&&(s=!0)}),s},justDragged:!1,get node(){let s;return t.DD._dragElements.forEach(l=>{s=l.node}),s},_dragElements:new Map,_drag(s){const l=[];t.DD._dragElements.forEach((o,a)=>{const{node:c}=o,h=c.getStage();h.setPointersPositions(s),o.pointerId===void 0&&(o.pointerId=i.Util._getFirstPointerId(s));const g=h._changedPointerPositions.find(f=>f.id===o.pointerId);if(g){if(o.dragStatus!=="dragging"){const f=c.dragDistance();if(Math.max(Math.abs(g.x-o.startPointerPos.x),Math.abs(g.y-o.startPointerPos.y))<f||(c.startDrag({evt:s}),!c.isDragging()))return}c._setDragPosition(s,o),l.push(c)}}),l.forEach(o=>{o.fire("dragmove",{type:"dragmove",target:o,evt:s},!0)})},_endDragBefore(s){const l=[];t.DD._dragElements.forEach(o=>{const{node:a}=o,c=a.getStage();if(s&&c.setPointersPositions(s),!c._changedPointerPositions.find(f=>f.id===o.pointerId))return;(o.dragStatus==="dragging"||o.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,o.dragStatus="stopped");const g=o.node.getLayer()||o.node instanceof e.Konva.Stage&&o.node;g&&l.indexOf(g)===-1&&l.push(g)}),l.forEach(o=>{o.draw()})},_endDragAfter(s){t.DD._dragElements.forEach((l,o)=>{l.dragStatus==="stopped"&&l.node.fire("dragend",{type:"dragend",target:l.node,evt:s},!0),l.dragStatus!=="dragging"&&t.DD._dragElements.delete(o)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))}(eo)),eo}var sl;function de(){if(sl)return hr;sl=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.Node=void 0;const t=ue(),e=Yt(),i=os(),s=zt(),l=Vo(),o=$t(),a="absoluteOpacity",c="allEventListeners",h="absoluteTransform",g="absoluteScale",f="canvas",b="Change",x="children",v="konva",y="listening",w="mouseenter",T="mouseleave",F="set",m="Shape",d=" ",S="stage",A="transform",M="Stage",j="visible",D=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(d);let I=1,O=class _o{constructor(p){this._id=I++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(p),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(p){(p===A||p===h)&&this._cache.get(p)?this._cache.get(p).dirty=!0:p?this._cache.delete(p):this._cache.clear()}_getCache(p,E){let P=this._cache.get(p);return(P===void 0||(p===A||p===h)&&P.dirty===!0)&&(P=E.call(this),this._cache.set(p,P)),P}_calculate(p,E,P){if(!this._attachedDepsListeners.get(p)){const N=E.map(B=>B+"Change.konva").join(d);this.on(N,()=>{this._clearCache(p)}),this._attachedDepsListeners.set(p,!0)}return this._getCache(p,P)}_getCanvasCache(){return this._cache.get(f)}_clearSelfAndDescendantCache(p){this._clearCache(p),p===h&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(f)){const{scene:p,filter:E,hit:P}=this._cache.get(f);t.Util.releaseCanvas(p,E,P),this._cache.delete(f)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(p){const E=p||{};let P={};(E.x===void 0||E.y===void 0||E.width===void 0||E.height===void 0)&&(P=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let N=Math.ceil(E.width||P.width),B=Math.ceil(E.height||P.height),W=E.pixelRatio,it=E.x===void 0?Math.floor(P.x):E.x,et=E.y===void 0?Math.floor(P.y):E.y,ht=E.offset||0,_t=E.drawBorder||!1,ut=E.hitCanvasPixelRatio||1;if(!N||!B){t.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const mt=Math.abs(Math.round(P.x)-it)>.5?1:0,At=Math.abs(Math.round(P.y)-et)>.5?1:0;N+=ht*2+mt,B+=ht*2+At,it-=ht,et-=ht;const Rt=new i.SceneCanvas({pixelRatio:W,width:N,height:B}),H=new i.SceneCanvas({pixelRatio:W,width:0,height:0,willReadFrequently:!0}),ct=new i.HitCanvas({pixelRatio:ut,width:N,height:B}),st=Rt.getContext(),St=ct.getContext();return ct.isCache=!0,Rt.isCache=!0,this._cache.delete(f),this._filterUpToDate=!1,E.imageSmoothingEnabled===!1&&(Rt.getContext()._context.imageSmoothingEnabled=!1,H.getContext()._context.imageSmoothingEnabled=!1),st.save(),St.save(),st.translate(-it,-et),St.translate(-it,-et),this._isUnderCache=!0,this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(g),this.drawScene(Rt,this),this.drawHit(ct,this),this._isUnderCache=!1,st.restore(),St.restore(),_t&&(st.save(),st.beginPath(),st.rect(0,0,N,B),st.closePath(),st.setAttr("strokeStyle","red"),st.setAttr("lineWidth",5),st.stroke(),st.restore()),this._cache.set(f,{scene:Rt,filter:H,hit:ct,x:it,y:et}),this._requestDraw(),this}isCached(){return this._cache.has(f)}getClientRect(p){throw new Error('abstract "getClientRect" method call')}_transformedRect(p,E){const P=[{x:p.x,y:p.y},{x:p.x+p.width,y:p.y},{x:p.x+p.width,y:p.y+p.height},{x:p.x,y:p.y+p.height}];let N=1/0,B=1/0,W=-1/0,it=-1/0;const et=this.getAbsoluteTransform(E);return P.forEach(function(ht){const _t=et.point(ht);N===void 0&&(N=W=_t.x,B=it=_t.y),N=Math.min(N,_t.x),B=Math.min(B,_t.y),W=Math.max(W,_t.x),it=Math.max(it,_t.y)}),{x:N,y:B,width:W-N,height:it-B}}_drawCachedSceneCanvas(p){p.save(),p._applyOpacity(this),p._applyGlobalCompositeOperation(this);const E=this._getCanvasCache();p.translate(E.x,E.y);const P=this._getCachedSceneCanvas(),N=P.pixelRatio;p.drawImage(P._canvas,0,0,P.width/N,P.height/N),p.restore()}_drawCachedHitCanvas(p){const E=this._getCanvasCache(),P=E.hit;p.save(),p.translate(E.x,E.y),p.drawImage(P._canvas,0,0,P.width/P.pixelRatio,P.height/P.pixelRatio),p.restore()}_getCachedSceneCanvas(){let p=this.filters(),E=this._getCanvasCache(),P=E.scene,N=E.filter,B=N.getContext(),W,it,et,ht;if(p){if(!this._filterUpToDate){const _t=P.pixelRatio;N.setSize(P.width/P.pixelRatio,P.height/P.pixelRatio);try{for(W=p.length,B.clear(),B.drawImage(P._canvas,0,0,P.getWidth()/_t,P.getHeight()/_t),it=B.getImageData(0,0,N.getWidth(),N.getHeight()),et=0;et<W;et++){if(ht=p[et],typeof ht!="function"){t.Util.error("Filter should be type of function, but got "+typeof ht+" instead. Please check correct filters");continue}ht.call(this,it),B.putImageData(it,0,0)}}catch(ut){t.Util.error("Unable to apply filter. "+ut.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return N}return P}on(p,E){if(this._cache&&this._cache.delete(c),arguments.length===3)return this._delegate.apply(this,arguments);let P=p.split(d),N=P.length,B,W,it,et,ht;for(B=0;B<N;B++)W=P[B],it=W.split("."),et=it[0],ht=it[1]||"",this.eventListeners[et]||(this.eventListeners[et]=[]),this.eventListeners[et].push({name:ht,handler:E});return this}off(p,E){let P=(p||"").split(d),N=P.length,B,W,it,et,ht,_t;if(this._cache&&this._cache.delete(c),!p)for(W in this.eventListeners)this._off(W);for(B=0;B<N;B++)if(it=P[B],et=it.split("."),ht=et[0],_t=et[1],ht)this.eventListeners[ht]&&this._off(ht,_t,E);else for(W in this.eventListeners)this._off(W,_t,E);return this}dispatchEvent(p){const E={target:this,type:p.type,evt:p};return this.fire(p.type,E),this}addEventListener(p,E){return this.on(p,function(P){E.call(this,P.evt)}),this}removeEventListener(p){return this.off(p),this}_delegate(p,E,P){const N=this;this.on(p,function(B){const W=B.target.findAncestors(E,!0,N);for(let it=0;it<W.length;it++)B=t.Util.cloneObject(B),B.currentTarget=W[it],P.call(W[it],B)})}remove(){return this.isDragging()&&this.stopDrag(),l.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(g),this._clearSelfAndDescendantCache(S),this._clearSelfAndDescendantCache(j),this._clearSelfAndDescendantCache(y)}_remove(){this._clearCaches();const p=this.getParent();p&&p.children&&(p.children.splice(this.index,1),p._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(p){const E="get"+t.Util._capitalize(p);return t.Util._isFunction(this[E])?this[E]():this.attrs[p]}getAncestors(){let p=this.getParent(),E=[];for(;p;)E.push(p),p=p.getParent();return E}getAttrs(){return this.attrs||{}}setAttrs(p){return this._batchTransformChanges(()=>{let E,P;if(!p)return this;for(E in p)E!==x&&(P=F+t.Util._capitalize(E),t.Util._isFunction(this[P])?this[P](p[E]):this._setAttr(E,p[E]))}),this}isListening(){return this._getCache(y,this._isListening)}_isListening(p){if(!this.listening())return!1;const P=this.getParent();return P&&P!==p&&this!==p?P._isListening(p):!0}isVisible(){return this._getCache(j,this._isVisible)}_isVisible(p){if(!this.visible())return!1;const P=this.getParent();return P&&P!==p&&this!==p?P._isVisible(p):!0}shouldDrawHit(p,E=!1){if(p)return this._isVisible(p)&&this._isListening(p);const P=this.getLayer();let N=!1;l.DD._dragElements.forEach(W=>{W.dragStatus==="dragging"&&(W.node.nodeType==="Stage"||W.node.getLayer()===P)&&(N=!0)});const B=!E&&!s.Konva.hitOnDragEnabled&&(N||s.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!B}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let p=this.getDepth(),E=this,P=0,N,B,W,it;function et(_t){for(N=[],B=_t.length,W=0;W<B;W++)it=_t[W],P++,it.nodeType!==m&&(N=N.concat(it.getChildren().slice())),it._id===E._id&&(W=B);N.length>0&&N[0].getDepth()<=p&&et(N)}const ht=this.getStage();return E.nodeType!==M&&ht&&et(ht.getChildren()),P}getDepth(){let p=0,E=this.parent;for(;E;)p++,E=E.parent;return p}_batchTransformChanges(p){this._batchingTransformChange=!0,p(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(A),this._clearSelfAndDescendantCache(h)),this._needClearTransformCache=!1}setPosition(p){return this._batchTransformChanges(()=>{this.x(p.x),this.y(p.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const p=this.getStage();if(!p)return null;const E=p.getPointerPosition();if(!E)return null;const P=this.getAbsoluteTransform().copy();return P.invert(),P.point(E)}getAbsolutePosition(p){let E=!1,P=this.parent;for(;P;){if(P.isCached()){E=!0;break}P=P.parent}E&&!p&&(p=!0);const N=this.getAbsoluteTransform(p).getMatrix(),B=new t.Transform,W=this.offset();return B.m=N.slice(),B.translate(W.x,W.y),B.getTranslation()}setAbsolutePosition(p){const{x:E,y:P,...N}=this._clearTransform();this.attrs.x=E,this.attrs.y=P,this._clearCache(A);const B=this._getAbsoluteTransform().copy();return B.invert(),B.translate(p.x,p.y),p={x:this.attrs.x+B.getTranslation().x,y:this.attrs.y+B.getTranslation().y},this._setTransform(N),this.setPosition({x:p.x,y:p.y}),this._clearCache(A),this._clearSelfAndDescendantCache(h),this}_setTransform(p){let E;for(E in p)this.attrs[E]=p[E]}_clearTransform(){const p={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,p}move(p){let E=p.x,P=p.y,N=this.x(),B=this.y();return E!==void 0&&(N+=E),P!==void 0&&(B+=P),this.setPosition({x:N,y:B}),this}_eachAncestorReverse(p,E){let P=[],N=this.getParent(),B,W;if(!(E&&E._id===this._id)){for(P.unshift(this);N&&(!E||N._id!==E._id);)P.unshift(N),N=N.parent;for(B=P.length,W=0;W<B;W++)p(P[W])}}rotate(p){return this.rotation(this.rotation()+p),this}moveToTop(){if(!this.parent)return t.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const p=this.index,E=this.parent.getChildren().length;return p<E-1?(this.parent.children.splice(p,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return t.Util.warn("Node has no parent. moveUp function is ignored."),!1;const p=this.index,E=this.parent.getChildren().length;return p<E-1?(this.parent.children.splice(p,1),this.parent.children.splice(p+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return t.Util.warn("Node has no parent. moveDown function is ignored."),!1;const p=this.index;return p>0?(this.parent.children.splice(p,1),this.parent.children.splice(p-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return t.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const p=this.index;return p>0?(this.parent.children.splice(p,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(p){if(!this.parent)return t.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(p<0||p>=this.parent.children.length)&&t.Util.warn("Unexpected value "+p+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const E=this.index;return this.parent.children.splice(E,1),this.parent.children.splice(p,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(a,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let p=this.opacity();const E=this.getParent();return E&&!E._isUnderCache&&(p*=E.getAbsoluteOpacity()),p}moveTo(p){return this.getParent()!==p&&(this._remove(),p.add(this)),this}toObject(){let p=this.getAttrs(),E,P,N,B,W;const it={attrs:{},className:this.getClassName()};for(E in p)P=p[E],W=t.Util.isObject(P)&&!t.Util._isPlainObject(P)&&!t.Util._isArray(P),!W&&(N=typeof this[E]=="function"&&this[E],delete p[E],B=N?N.call(this):null,p[E]=P,B!==P&&(it.attrs[E]=P));return t.Util._prepareToStringify(it)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(p,E,P){const N=[];E&&this._isMatch(p)&&N.push(this);let B=this.parent;for(;B;){if(B===P)return N;B._isMatch(p)&&N.push(B),B=B.parent}return N}isAncestorOf(p){return!1}findAncestor(p,E,P){return this.findAncestors(p,E,P)[0]}_isMatch(p){if(!p)return!1;if(typeof p=="function")return p(this);let E=p.replace(/ /g,"").split(","),P=E.length,N,B;for(N=0;N<P;N++)if(B=E[N],t.Util.isValidSelector(B)||(t.Util.warn('Selector "'+B+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),t.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),t.Util.warn("Konva is awesome, right?")),B.charAt(0)==="#"){if(this.id()===B.slice(1))return!0}else if(B.charAt(0)==="."){if(this.hasName(B.slice(1)))return!0}else if(this.className===B||this.nodeType===B)return!0;return!1}getLayer(){const p=this.getParent();return p?p.getLayer():null}getStage(){return this._getCache(S,this._getStage)}_getStage(){const p=this.getParent();return p?p.getStage():null}fire(p,E={},P){return E.target=E.target||this,P?this._fireAndBubble(p,E):this._fire(p,E),this}getAbsoluteTransform(p){return p?this._getAbsoluteTransform(p):this._getCache(h,this._getAbsoluteTransform)}_getAbsoluteTransform(p){let E;if(p)return E=new t.Transform,this._eachAncestorReverse(function(P){const N=P.transformsEnabled();N==="all"?E.multiply(P.getTransform()):N==="position"&&E.translate(P.x()-P.offsetX(),P.y()-P.offsetY())},p),E;{E=this._cache.get(h)||new t.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(E):E.reset();const P=this.transformsEnabled();if(P==="all")E.multiply(this.getTransform());else if(P==="position"){const N=this.attrs.x||0,B=this.attrs.y||0,W=this.attrs.offsetX||0,it=this.attrs.offsetY||0;E.translate(N-W,B-it)}return E.dirty=!1,E}}getAbsoluteScale(p){let E=this;for(;E;)E._isUnderCache&&(p=E),E=E.getParent();const N=this.getAbsoluteTransform(p).decompose();return{x:N.scaleX,y:N.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(A,this._getTransform)}_getTransform(){var p,E;const P=this._cache.get(A)||new t.Transform;P.reset();const N=this.x(),B=this.y(),W=s.Konva.getAngle(this.rotation()),it=(p=this.attrs.scaleX)!==null&&p!==void 0?p:1,et=(E=this.attrs.scaleY)!==null&&E!==void 0?E:1,ht=this.attrs.skewX||0,_t=this.attrs.skewY||0,ut=this.attrs.offsetX||0,mt=this.attrs.offsetY||0;return(N!==0||B!==0)&&P.translate(N,B),W!==0&&P.rotate(W),(ht!==0||_t!==0)&&P.skew(ht,_t),(it!==1||et!==1)&&P.scale(it,et),(ut!==0||mt!==0)&&P.translate(-1*ut,-1*mt),P.dirty=!1,P}clone(p){let E=t.Util.cloneObject(this.attrs),P,N,B,W,it;for(P in p)E[P]=p[P];const et=new this.constructor(E);for(P in this.eventListeners)for(N=this.eventListeners[P],B=N.length,W=0;W<B;W++)it=N[W],it.name.indexOf(v)<0&&(et.eventListeners[P]||(et.eventListeners[P]=[]),et.eventListeners[P].push(it));return et}_toKonvaCanvas(p){p=p||{};const E=this.getClientRect(),P=this.getStage(),N=p.x!==void 0?p.x:Math.floor(E.x),B=p.y!==void 0?p.y:Math.floor(E.y),W=p.pixelRatio||1,it=new i.SceneCanvas({width:p.width||Math.ceil(E.width)||(P?P.width():0),height:p.height||Math.ceil(E.height)||(P?P.height():0),pixelRatio:W}),et=it.getContext(),ht=new i.SceneCanvas({width:it.width/it.pixelRatio+Math.abs(N),height:it.height/it.pixelRatio+Math.abs(B),pixelRatio:it.pixelRatio});return p.imageSmoothingEnabled===!1&&(et._context.imageSmoothingEnabled=!1),et.save(),(N||B)&&et.translate(-1*N,-1*B),this.drawScene(it,void 0,ht),et.restore(),it}toCanvas(p){return this._toKonvaCanvas(p)._canvas}toDataURL(p){p=p||{};const E=p.mimeType||null,P=p.quality||null,N=this._toKonvaCanvas(p).toDataURL(E,P);return p.callback&&p.callback(N),N}toImage(p){return new Promise((E,P)=>{try{const N=p==null?void 0:p.callback;N&&delete p.callback,t.Util._urlToImage(this.toDataURL(p),function(B){E(B),N==null||N(B)})}catch(N){P(N)}})}toBlob(p){return new Promise((E,P)=>{try{const N=p==null?void 0:p.callback;N&&delete p.callback,this.toCanvas(p).toBlob(B=>{E(B),N==null||N(B)},p==null?void 0:p.mimeType,p==null?void 0:p.quality)}catch(N){P(N)}})}setSize(p){return this.width(p.width),this.height(p.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():s.Konva.dragDistance}_off(p,E,P){let N=this.eventListeners[p],B,W,it;for(B=0;B<N.length;B++)if(W=N[B].name,it=N[B].handler,(W!=="konva"||E==="konva")&&(!E||W===E)&&(!P||P===it)){if(N.splice(B,1),N.length===0){delete this.eventListeners[p];break}B--}}_fireChangeEvent(p,E,P){this._fire(p+b,{oldVal:E,newVal:P})}addName(p){if(!this.hasName(p)){const E=this.name(),P=E?E+" "+p:p;this.name(P)}return this}hasName(p){if(!p)return!1;const E=this.name();return E?(E||"").split(/\s/g).indexOf(p)!==-1:!1}removeName(p){const E=(this.name()||"").split(/\s/g),P=E.indexOf(p);return P!==-1&&(E.splice(P,1),this.name(E.join(" "))),this}setAttr(p,E){const P=this[F+t.Util._capitalize(p)];return t.Util._isFunction(P)?P.call(this,E):this._setAttr(p,E),this}_requestDraw(){if(s.Konva.autoDrawEnabled){const p=this.getLayer()||this.getStage();p==null||p.batchDraw()}}_setAttr(p,E){const P=this.attrs[p];P===E&&!t.Util.isObject(E)||(E==null?delete this.attrs[p]:this.attrs[p]=E,this._shouldFireChangeEvents&&this._fireChangeEvent(p,P,E),this._requestDraw())}_setComponentAttr(p,E,P){let N;P!==void 0&&(N=this.attrs[p],N||(this.attrs[p]=this.getAttr(p)),this.attrs[p][E]=P,this._fireChangeEvent(p,N,P))}_fireAndBubble(p,E,P){if(E&&this.nodeType===m&&(E.target=this),!((p===w||p===T)&&(P&&(this===P||this.isAncestorOf&&this.isAncestorOf(P))||this.nodeType==="Stage"&&!P))){this._fire(p,E);const B=(p===w||p===T)&&P&&P.isAncestorOf&&P.isAncestorOf(this)&&!P.isAncestorOf(this.parent);(E&&!E.cancelBubble||!E)&&this.parent&&this.parent.isListening()&&!B&&(P&&P.parent?this._fireAndBubble.call(this.parent,p,E,P):this._fireAndBubble.call(this.parent,p,E))}}_getProtoListeners(p){var E,P,N;const B=(E=this._cache.get(c))!==null&&E!==void 0?E:{};let W=B==null?void 0:B[p];if(W===void 0){W=[];let it=Object.getPrototypeOf(this);for(;it;){const et=(N=(P=it.eventListeners)===null||P===void 0?void 0:P[p])!==null&&N!==void 0?N:[];W.push(...et),it=Object.getPrototypeOf(it)}B[p]=W,this._cache.set(c,B)}return W}_fire(p,E){E=E||{},E.currentTarget=this,E.type=p;const P=this._getProtoListeners(p);if(P)for(var N=0;N<P.length;N++)P[N].handler.call(this,E);const B=this.eventListeners[p];if(B)for(var N=0;N<B.length;N++)B[N].handler.call(this,E)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(p){const E=p?p.pointerId:void 0,P=this.getStage(),N=this.getAbsolutePosition();if(!P)return;const B=P._getPointerById(E)||P._changedPointerPositions[0]||N;l.DD._dragElements.set(this._id,{node:this,startPointerPos:B,offset:{x:B.x-N.x,y:B.y-N.y},dragStatus:"ready",pointerId:E})}startDrag(p,E=!0){l.DD._dragElements.has(this._id)||this._createDragElement(p);const P=l.DD._dragElements.get(this._id);P.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:p&&p.evt},E)}_setDragPosition(p,E){const P=this.getStage()._getPointerById(E.pointerId);if(!P)return;let N={x:P.x-E.offset.x,y:P.y-E.offset.y};const B=this.dragBoundFunc();if(B!==void 0){const W=B.call(this,N,p);W?N=W:t.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==N.x||this._lastPos.y!==N.y)&&(this.setAbsolutePosition(N),this._requestDraw()),this._lastPos=N}stopDrag(p){const E=l.DD._dragElements.get(this._id);E&&(E.dragStatus="stopped"),l.DD._endDragBefore(p),l.DD._endDragAfter(p)}setDraggable(p){this._setAttr("draggable",p),this._dragChange()}isDragging(){const p=l.DD._dragElements.get(this._id);return p?p.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(p){if(!(!(p.evt.button!==void 0)||s.Konva.dragButtons.indexOf(p.evt.button)>=0)||this.isDragging())return;let N=!1;l.DD._dragElements.forEach(B=>{this.isAncestorOf(B.node)&&(N=!0)}),N||this._createDragElement(p)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const E=l.DD._dragElements.get(this._id),P=E&&E.dragStatus==="dragging",N=E&&E.dragStatus==="ready";P?this.stopDrag():N&&l.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(p={x:0,y:0}){const E=this.getStage();if(!E)return!1;const P={x:-p.x,y:-p.y,width:E.width()+2*p.x,height:E.height()+2*p.y};return t.Util.haveIntersection(P,this.getClientRect())}static create(p,E){return t.Util._isString(p)&&(p=JSON.parse(p)),this._createNode(p,E)}static _createNode(p,E){let P=_o.prototype.getClassName.call(p),N=p.children,B,W,it;E&&(p.attrs.container=E),s.Konva[P]||(t.Util.warn('Can not find a node with class name "'+P+'". Fallback to "Shape".'),P="Shape");const et=s.Konva[P];if(B=new et(p.attrs),N)for(W=N.length,it=0;it<W;it++)B.add(_o._createNode(N[it]));return B}};hr.Node=O,O.prototype.nodeType="Node",O.prototype._attrsAffectingSize=[],O.prototype.eventListeners={},O.prototype.on.call(O.prototype,D,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(A),this._clearSelfAndDescendantCache(h)}),O.prototype.on.call(O.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(j)}),O.prototype.on.call(O.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(y)}),O.prototype.on.call(O.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(a)});const k=e.Factory.addGetterSetter;return k(O,"zIndex"),k(O,"absolutePosition"),k(O,"position"),k(O,"x",0,(0,o.getNumberValidator)()),k(O,"y",0,(0,o.getNumberValidator)()),k(O,"globalCompositeOperation","source-over",(0,o.getStringValidator)()),k(O,"opacity",1,(0,o.getNumberValidator)()),k(O,"name","",(0,o.getStringValidator)()),k(O,"id","",(0,o.getStringValidator)()),k(O,"rotation",0,(0,o.getNumberValidator)()),e.Factory.addComponentsGetterSetter(O,"scale",["x","y"]),k(O,"scaleX",1,(0,o.getNumberValidator)()),k(O,"scaleY",1,(0,o.getNumberValidator)()),e.Factory.addComponentsGetterSetter(O,"skew",["x","y"]),k(O,"skewX",0,(0,o.getNumberValidator)()),k(O,"skewY",0,(0,o.getNumberValidator)()),e.Factory.addComponentsGetterSetter(O,"offset",["x","y"]),k(O,"offsetX",0,(0,o.getNumberValidator)()),k(O,"offsetY",0,(0,o.getNumberValidator)()),k(O,"dragDistance",void 0,(0,o.getNumberValidator)()),k(O,"width",0,(0,o.getNumberValidator)()),k(O,"height",0,(0,o.getNumberValidator)()),k(O,"listening",!0,(0,o.getBooleanValidator)()),k(O,"preventDefault",!0,(0,o.getBooleanValidator)()),k(O,"filters",void 0,function(K){return this._filterUpToDate=!1,K}),k(O,"visible",!0,(0,o.getBooleanValidator)()),k(O,"transformsEnabled","all",(0,o.getStringValidator)()),k(O,"size"),k(O,"dragBoundFunc"),k(O,"draggable",!1,(0,o.getBooleanValidator)()),e.Factory.backCompat(O,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),hr}var fr={},ol;function as(){if(ol)return fr;ol=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.Container=void 0;const t=Yt(),e=de(),i=$t();let s=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(o){if(!o)return this.children||[];const a=this.children||[],c=[];return a.forEach(function(h){o(h)&&c.push(h)}),c}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(o=>{o.parent=null,o.index=0,o.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(o=>{o.parent=null,o.index=0,o.destroy()}),this.children=[],this._requestDraw(),this}add(...o){if(o.length===0)return this;if(o.length>1){for(let c=0;c<o.length;c++)this.add(o[c]);return this}const a=o[0];return a.getParent()?(a.moveTo(this),this):(this._validateAdd(a),a.index=this.getChildren().length,a.parent=this,a._clearCaches(),this.getChildren().push(a),this._fire("add",{child:a}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(o){return this._generalFind(o,!1)}findOne(o){const a=this._generalFind(o,!0);return a.length>0?a[0]:void 0}_generalFind(o,a){const c=[];return this._descendants(h=>{const g=h._isMatch(o);return g&&c.push(h),!!(g&&a)}),c}_descendants(o){let a=!1;const c=this.getChildren();for(const h of c){if(a=o(h),a)return!0;if(h.hasChildren()&&(a=h._descendants(o),a))return!0}return!1}toObject(){const o=e.Node.prototype.toObject.call(this);return o.children=[],this.getChildren().forEach(a=>{o.children.push(a.toObject())}),o}isAncestorOf(o){let a=o.getParent();for(;a;){if(a._id===this._id)return!0;a=a.getParent()}return!1}clone(o){const a=e.Node.prototype.clone.call(this,o);return this.getChildren().forEach(function(c){a.add(c.clone())}),a}getAllIntersections(o){const a=[];return this.find("Shape").forEach(c=>{c.isVisible()&&c.intersects(o)&&a.push(c)}),a}_clearSelfAndDescendantCache(o){var a;super._clearSelfAndDescendantCache(o),!this.isCached()&&((a=this.children)===null||a===void 0||a.forEach(function(c){c._clearSelfAndDescendantCache(o)}))}_setChildrenIndices(){var o;(o=this.children)===null||o===void 0||o.forEach(function(a,c){a.index=c}),this._requestDraw()}drawScene(o,a,c){const h=this.getLayer(),g=o||h&&h.getCanvas(),f=g&&g.getContext(),b=this._getCanvasCache(),x=b&&b.scene,v=g&&g.isCache;if(!this.isVisible()&&!v)return this;if(x){f.save();const y=this.getAbsoluteTransform(a).getMatrix();f.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedSceneCanvas(f),f.restore()}else this._drawChildren("drawScene",g,a,c);return this}drawHit(o,a){if(!this.shouldDrawHit(a))return this;const c=this.getLayer(),h=o||c&&c.hitCanvas,g=h&&h.getContext(),f=this._getCanvasCache();if(f&&f.hit){g.save();const x=this.getAbsoluteTransform(a).getMatrix();g.transform(x[0],x[1],x[2],x[3],x[4],x[5]),this._drawCachedHitCanvas(g),g.restore()}else this._drawChildren("drawHit",h,a);return this}_drawChildren(o,a,c,h){var g;const f=a&&a.getContext(),b=this.clipWidth(),x=this.clipHeight(),v=this.clipFunc(),y=typeof b=="number"&&typeof x=="number"||v,w=c===this;if(y){f.save();const F=this.getAbsoluteTransform(c);let m=F.getMatrix();f.transform(m[0],m[1],m[2],m[3],m[4],m[5]),f.beginPath();let d;if(v)d=v.call(this,f,this);else{const S=this.clipX(),A=this.clipY();f.rect(S||0,A||0,b,x)}f.clip.apply(f,d),m=F.copy().invert().getMatrix(),f.transform(m[0],m[1],m[2],m[3],m[4],m[5])}const T=!w&&this.globalCompositeOperation()!=="source-over"&&o==="drawScene";T&&(f.save(),f._applyGlobalCompositeOperation(this)),(g=this.children)===null||g===void 0||g.forEach(function(F){F[o](a,c,h)}),T&&f.restore(),y&&f.restore()}getClientRect(o={}){var a;const c=o.skipTransform,h=o.relativeTo;let g,f,b,x,v={x:1/0,y:1/0,width:0,height:0};const y=this;(a=this.children)===null||a===void 0||a.forEach(function(F){if(!F.visible())return;const m=F.getClientRect({relativeTo:y,skipShadow:o.skipShadow,skipStroke:o.skipStroke});m.width===0&&m.height===0||(g===void 0?(g=m.x,f=m.y,b=m.x+m.width,x=m.y+m.height):(g=Math.min(g,m.x),f=Math.min(f,m.y),b=Math.max(b,m.x+m.width),x=Math.max(x,m.y+m.height)))});const w=this.find("Shape");let T=!1;for(let F=0;F<w.length;F++)if(w[F]._isVisible(this)){T=!0;break}return T&&g!==void 0?v={x:g,y:f,width:b-g,height:x-f}:v={x:0,y:0,width:0,height:0},c?v:this._transformedRect(v,h)}};return fr.Container=s,t.Factory.addComponentsGetterSetter(s,"clip",["x","y","width","height"]),t.Factory.addGetterSetter(s,"clipX",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"clipY",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"clipWidth",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"clipHeight",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"clipFunc"),fr}var no={},gn={},al;function ru(){if(al)return gn;al=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.getCapturedShape=s,gn.createEvent=l,gn.hasPointerCapture=o,gn.setPointerCapture=a,gn.releaseCapture=c;const t=zt(),e=new Map,i=t.Konva._global.PointerEvent!==void 0;function s(h){return e.get(h)}function l(h){return{evt:h,pointerId:h.pointerId}}function o(h,g){return e.get(h)===g}function a(h,g){c(h),g.getStage()&&(e.set(h,g),i&&g._fire("gotpointercapture",l(new PointerEvent("gotpointercapture"))))}function c(h,g){const f=e.get(h);if(!f)return;const b=f.getStage();b&&b.content,e.delete(h),i&&f._fire("lostpointercapture",l(new PointerEvent("lostpointercapture")))}return gn}var ll;function od(){return ll||(ll=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=ue(),i=Yt(),s=as(),l=zt(),o=os(),a=Vo(),c=zt(),h=ru(),g="Stage",f="string",b="px",x="mouseout",v="mouseleave",y="mouseover",w="mouseenter",T="mousemove",F="mousedown",m="mouseup",d="pointermove",S="pointerdown",A="pointerup",M="pointercancel",j="lostpointercapture",D="pointerout",I="pointerleave",O="pointerover",k="pointerenter",K="contextmenu",p="touchstart",E="touchend",P="touchmove",N="touchcancel",B="wheel",W=5,it=[[w,"_pointerenter"],[F,"_pointerdown"],[T,"_pointermove"],[m,"_pointerup"],[v,"_pointerleave"],[p,"_pointerdown"],[P,"_pointermove"],[E,"_pointerup"],[N,"_pointercancel"],[y,"_pointerover"],[B,"_wheel"],[K,"_contextmenu"],[S,"_pointerdown"],[d,"_pointermove"],[A,"_pointerup"],[M,"_pointercancel"],[j,"_lostpointercapture"]],et={mouse:{[D]:x,[I]:v,[O]:y,[k]:w,[d]:T,[S]:F,[A]:m,[M]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[D]:"touchout",[I]:"touchleave",[O]:"touchover",[k]:"touchenter",[d]:P,[S]:p,[A]:E,[M]:N,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[D]:D,[I]:I,[O]:O,[k]:k,[d]:d,[S]:S,[A]:A,[M]:M,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},ht=Rt=>Rt.indexOf("pointer")>=0?"pointer":Rt.indexOf("touch")>=0?"touch":"mouse",_t=Rt=>{const H=ht(Rt);if(H==="pointer")return l.Konva.pointerEventsEnabled&&et.pointer;if(H==="touch")return et.touch;if(H==="mouse")return et.mouse};function ut(Rt={}){return(Rt.clipFunc||Rt.clipWidth||Rt.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Rt}const mt="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class At extends s.Container{constructor(H){super(ut(H)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{ut(this.attrs)}),this._checkVisibility()}_validateAdd(H){const ct=H.getType()==="Layer",st=H.getType()==="FastLayer";ct||st||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const H=this.visible()?"":"none";this.content.style.display=H}setContainer(H){if(typeof H===f){if(H.charAt(0)==="."){const st=H.slice(1);H=document.getElementsByClassName(st)[0]}else{var ct;H.charAt(0)!=="#"?ct=H:ct=H.slice(1),H=document.getElementById(ct)}if(!H)throw"Can not find container in document with id "+ct}return this._setAttr("container",H),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),H.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const H=this.children,ct=H.length;for(let st=0;st<ct;st++)H[st].clear();return this}clone(H){return H||(H={}),H.container=typeof document<"u"&&document.createElement("div"),s.Container.prototype.clone.call(this,H)}destroy(){super.destroy();const H=this.content;H&&e.Util._isInDocument(H)&&this.container().removeChild(H);const ct=t.stages.indexOf(this);return ct>-1&&t.stages.splice(ct,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const H=this._pointerPositions[0]||this._changedPointerPositions[0];return H?{x:H.x,y:H.y}:(e.Util.warn(mt),null)}_getPointerById(H){return this._pointerPositions.find(ct=>ct.id===H)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(H){H=H||{},H.x=H.x||0,H.y=H.y||0,H.width=H.width||this.width(),H.height=H.height||this.height();const ct=new o.SceneCanvas({width:H.width,height:H.height,pixelRatio:H.pixelRatio||1}),st=ct.getContext()._context,St=this.children;return(H.x||H.y)&&st.translate(-1*H.x,-1*H.y),St.forEach(function(Mt){if(!Mt.isVisible())return;const G=Mt._toKonvaCanvas(H);st.drawImage(G._canvas,H.x,H.y,G.getWidth()/G.getPixelRatio(),G.getHeight()/G.getPixelRatio())}),ct}getIntersection(H){if(!H)return null;const ct=this.children,st=ct.length,St=st-1;for(let Mt=St;Mt>=0;Mt--){const G=ct[Mt].getIntersection(H);if(G)return G}return null}_resizeDOM(){const H=this.width(),ct=this.height();this.content&&(this.content.style.width=H+b,this.content.style.height=ct+b),this.bufferCanvas.setSize(H,ct),this.bufferHitCanvas.setSize(H,ct),this.children.forEach(st=>{st.setSize({width:H,height:ct}),st.draw()})}add(H,...ct){if(arguments.length>1){for(let St=0;St<arguments.length;St++)this.add(arguments[St]);return this}super.add(H);const st=this.children.length;return st>W&&e.Util.warn("The stage has "+st+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),H.setSize({width:this.width(),height:this.height()}),H.draw(),l.Konva.isBrowser&&this.content.appendChild(H.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(H){return h.hasPointerCapture(H,this)}setPointerCapture(H){h.setPointerCapture(H,this)}releaseCapture(H){h.releaseCapture(H,this)}getLayers(){return this.children}_bindContentEvents(){l.Konva.isBrowser&&it.forEach(([H,ct])=>{this.content.addEventListener(H,st=>{this[ct](st)},{passive:!1})})}_pointerenter(H){this.setPointersPositions(H);const ct=_t(H.type);ct&&this._fire(ct.pointerenter,{evt:H,target:this,currentTarget:this})}_pointerover(H){this.setPointersPositions(H);const ct=_t(H.type);ct&&this._fire(ct.pointerover,{evt:H,target:this,currentTarget:this})}_getTargetShape(H){let ct=this[H+"targetShape"];return ct&&!ct.getStage()&&(ct=null),ct}_pointerleave(H){const ct=_t(H.type),st=ht(H.type);if(!ct)return;this.setPointersPositions(H);const St=this._getTargetShape(st),Mt=!(l.Konva.isDragging()||l.Konva.isTransforming())||l.Konva.hitOnDragEnabled;St&&Mt?(St._fireAndBubble(ct.pointerout,{evt:H}),St._fireAndBubble(ct.pointerleave,{evt:H}),this._fire(ct.pointerleave,{evt:H,target:this,currentTarget:this}),this[st+"targetShape"]=null):Mt&&(this._fire(ct.pointerleave,{evt:H,target:this,currentTarget:this}),this._fire(ct.pointerout,{evt:H,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(H){const ct=_t(H.type),st=ht(H.type);if(!ct)return;this.setPointersPositions(H);let St=!1;this._changedPointerPositions.forEach(Mt=>{const G=this.getIntersection(Mt);if(a.DD.justDragged=!1,l.Konva["_"+st+"ListenClick"]=!0,!G||!G.isListening()){this[st+"ClickStartShape"]=void 0;return}l.Konva.capturePointerEventsEnabled&&G.setPointerCapture(Mt.id),this[st+"ClickStartShape"]=G,G._fireAndBubble(ct.pointerdown,{evt:H,pointerId:Mt.id}),St=!0;const q=H.type.indexOf("touch")>=0;G.preventDefault()&&H.cancelable&&q&&H.preventDefault()}),St||this._fire(ct.pointerdown,{evt:H,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(H){const ct=_t(H.type),st=ht(H.type);if(!ct||(l.Konva.isDragging()&&a.DD.node.preventDefault()&&H.cancelable&&H.preventDefault(),this.setPointersPositions(H),!(!(l.Konva.isDragging()||l.Konva.isTransforming())||l.Konva.hitOnDragEnabled)))return;const Mt={};let G=!1;const q=this._getTargetShape(st);this._changedPointerPositions.forEach(nt=>{const lt=h.getCapturedShape(nt.id)||this.getIntersection(nt),gt=nt.id,ft={evt:H,pointerId:gt},yt=q!==lt;if(yt&&q&&(q._fireAndBubble(ct.pointerout,{...ft},lt),q._fireAndBubble(ct.pointerleave,{...ft},lt)),lt){if(Mt[lt._id])return;Mt[lt._id]=!0}lt&&lt.isListening()?(G=!0,yt&&(lt._fireAndBubble(ct.pointerover,{...ft},q),lt._fireAndBubble(ct.pointerenter,{...ft},q),this[st+"targetShape"]=lt),lt._fireAndBubble(ct.pointermove,{...ft})):q&&(this._fire(ct.pointerover,{evt:H,target:this,currentTarget:this,pointerId:gt}),this[st+"targetShape"]=null)}),G||this._fire(ct.pointermove,{evt:H,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(H){const ct=_t(H.type),st=ht(H.type);if(!ct)return;this.setPointersPositions(H);const St=this[st+"ClickStartShape"],Mt=this[st+"ClickEndShape"],G={};let q=!1;this._changedPointerPositions.forEach(nt=>{const lt=h.getCapturedShape(nt.id)||this.getIntersection(nt);if(lt){if(lt.releaseCapture(nt.id),G[lt._id])return;G[lt._id]=!0}const gt=nt.id,ft={evt:H,pointerId:gt};let yt=!1;l.Konva["_"+st+"InDblClickWindow"]?(yt=!0,clearTimeout(this[st+"DblTimeout"])):a.DD.justDragged||(l.Konva["_"+st+"InDblClickWindow"]=!0,clearTimeout(this[st+"DblTimeout"])),this[st+"DblTimeout"]=setTimeout(function(){l.Konva["_"+st+"InDblClickWindow"]=!1},l.Konva.dblClickWindow),lt&&lt.isListening()?(q=!0,this[st+"ClickEndShape"]=lt,lt._fireAndBubble(ct.pointerup,{...ft}),l.Konva["_"+st+"ListenClick"]&&St&&St===lt&&(lt._fireAndBubble(ct.pointerclick,{...ft}),yt&&Mt&&Mt===lt&&lt._fireAndBubble(ct.pointerdblclick,{...ft}))):(this[st+"ClickEndShape"]=null,l.Konva["_"+st+"ListenClick"]&&this._fire(ct.pointerclick,{evt:H,target:this,currentTarget:this,pointerId:gt}),yt&&this._fire(ct.pointerdblclick,{evt:H,target:this,currentTarget:this,pointerId:gt}))}),q||this._fire(ct.pointerup,{evt:H,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),l.Konva["_"+st+"ListenClick"]=!1,H.cancelable&&st!=="touch"&&st!=="pointer"&&H.preventDefault()}_contextmenu(H){this.setPointersPositions(H);const ct=this.getIntersection(this.getPointerPosition());ct&&ct.isListening()?ct._fireAndBubble(K,{evt:H}):this._fire(K,{evt:H,target:this,currentTarget:this})}_wheel(H){this.setPointersPositions(H);const ct=this.getIntersection(this.getPointerPosition());ct&&ct.isListening()?ct._fireAndBubble(B,{evt:H}):this._fire(B,{evt:H,target:this,currentTarget:this})}_pointercancel(H){this.setPointersPositions(H);const ct=h.getCapturedShape(H.pointerId)||this.getIntersection(this.getPointerPosition());ct&&ct._fireAndBubble(A,h.createEvent(H)),h.releaseCapture(H.pointerId)}_lostpointercapture(H){h.releaseCapture(H.pointerId)}setPointersPositions(H){const ct=this._getContentPosition();let st=null,St=null;H=H||window.event,H.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(H.touches,Mt=>{this._pointerPositions.push({id:Mt.identifier,x:(Mt.clientX-ct.left)/ct.scaleX,y:(Mt.clientY-ct.top)/ct.scaleY})}),Array.prototype.forEach.call(H.changedTouches||H.touches,Mt=>{this._changedPointerPositions.push({id:Mt.identifier,x:(Mt.clientX-ct.left)/ct.scaleX,y:(Mt.clientY-ct.top)/ct.scaleY})})):(st=(H.clientX-ct.left)/ct.scaleX,St=(H.clientY-ct.top)/ct.scaleY,this.pointerPos={x:st,y:St},this._pointerPositions=[{x:st,y:St,id:e.Util._getFirstPointerId(H)}],this._changedPointerPositions=[{x:st,y:St,id:e.Util._getFirstPointerId(H)}])}_setPointerPosition(H){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(H)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const H=this.content.getBoundingClientRect();return{top:H.top,left:H.left,scaleX:H.width/this.content.clientWidth||1,scaleY:H.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new o.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new o.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!l.Konva.isBrowser)return;const H=this.container();if(!H)throw"Stage has no container. A container is required.";H.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),H.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(H){H.batchDraw()}),this}}t.Stage=At,At.prototype.nodeType=g,(0,c._registerNode)(At),i.Factory.addGetterSetter(At,"container"),l.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(Rt=>{Rt.batchDraw()})})}(no)),no}var dr={},ro={},cl;function we(){return cl||(cl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=zt(),i=ue(),s=Yt(),l=de(),o=$t(),a=zt(),c=ru(),h="hasShadow",g="shadowRGBA",f="patternImage",b="linearGradient",x="radialGradient";let v;function y(){return v||(v=i.Util.createCanvasElement().getContext("2d"),v)}t.shapes={};function w(I){const O=this.attrs.fillRule;O?I.fill(O):I.fill()}function T(I){I.stroke()}function F(I){const O=this.attrs.fillRule;O?I.fill(O):I.fill()}function m(I){I.stroke()}function d(){this._clearCache(h)}function S(){this._clearCache(g)}function A(){this._clearCache(f)}function M(){this._clearCache(b)}function j(){this._clearCache(x)}class D extends l.Node{constructor(O){super(O);let k;for(;k=i.Util.getRandomColor(),!(k&&!(k in t.shapes)););this.colorKey=k,t.shapes[k]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(h,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(f,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const k=y().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(k&&k.setTransform){const K=new i.Transform;K.translate(this.fillPatternX(),this.fillPatternY()),K.rotate(e.Konva.getAngle(this.fillPatternRotation())),K.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),K.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const p=K.getMatrix(),E=typeof DOMMatrix>"u"?{a:p[0],b:p[1],c:p[2],d:p[3],e:p[4],f:p[5]}:new DOMMatrix(p);k.setTransform(E)}return k}}_getLinearGradient(){return this._getCache(b,this.__getLinearGradient)}__getLinearGradient(){const O=this.fillLinearGradientColorStops();if(O){const k=y(),K=this.fillLinearGradientStartPoint(),p=this.fillLinearGradientEndPoint(),E=k.createLinearGradient(K.x,K.y,p.x,p.y);for(let P=0;P<O.length;P+=2)E.addColorStop(O[P],O[P+1]);return E}}_getRadialGradient(){return this._getCache(x,this.__getRadialGradient)}__getRadialGradient(){const O=this.fillRadialGradientColorStops();if(O){const k=y(),K=this.fillRadialGradientStartPoint(),p=this.fillRadialGradientEndPoint(),E=k.createRadialGradient(K.x,K.y,this.fillRadialGradientStartRadius(),p.x,p.y,this.fillRadialGradientEndRadius());for(let P=0;P<O.length;P+=2)E.addColorStop(O[P],O[P+1]);return E}}getShadowRGBA(){return this._getCache(g,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const O=i.Util.colorToRGBA(this.shadowColor());if(O)return"rgba("+O.r+","+O.g+","+O.b+","+O.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const O=this.hitStrokeWidth();return O==="auto"?this.hasStroke():this.strokeEnabled()&&!!O}intersects(O){const k=this.getStage();if(!k)return!1;const K=k.bufferHitCanvas;return K.getContext().clear(),this.drawHit(K,void 0,!0),K.context.getImageData(Math.round(O.x),Math.round(O.y),1,1).data[3]>0}destroy(){return l.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(O){var k;if(!((k=this.attrs.perfectDrawEnabled)!==null&&k!==void 0?k:!0))return!1;const p=O||this.hasFill(),E=this.hasStroke(),P=this.getAbsoluteOpacity()!==1;if(p&&E&&P)return!0;const N=this.hasShadow(),B=this.shadowForStrokeEnabled();return!!(p&&E&&N&&B)}setStrokeHitEnabled(O){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),O?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const O=this.size();return{x:this._centroid?-O.width/2:0,y:this._centroid?-O.height/2:0,width:O.width,height:O.height}}getClientRect(O={}){let k=!1,K=this.getParent();for(;K;){if(K.isCached()){k=!0;break}K=K.getParent()}const p=O.skipTransform,E=O.relativeTo||k&&this.getStage()||void 0,P=this.getSelfRect(),B=!O.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,W=P.width+B,it=P.height+B,et=!O.skipShadow&&this.hasShadow(),ht=et?this.shadowOffsetX():0,_t=et?this.shadowOffsetY():0,ut=W+Math.abs(ht),mt=it+Math.abs(_t),At=et&&this.shadowBlur()||0,Rt=ut+At*2,H=mt+At*2,ct={width:Rt,height:H,x:-(B/2+At)+Math.min(ht,0)+P.x,y:-(B/2+At)+Math.min(_t,0)+P.y};return p?ct:this._transformedRect(ct,E)}drawScene(O,k,K){const p=this.getLayer();let E=O||p.getCanvas(),P=E.getContext(),N=this._getCanvasCache(),B=this.getSceneFunc(),W=this.hasShadow(),it,et;const ht=E.isCache,_t=k===this;if(!this.isVisible()&&!_t)return this;if(N){P.save();const mt=this.getAbsoluteTransform(k).getMatrix();return P.transform(mt[0],mt[1],mt[2],mt[3],mt[4],mt[5]),this._drawCachedSceneCanvas(P),P.restore(),this}if(!B)return this;if(P.save(),this._useBufferCanvas()&&!ht){it=this.getStage();const mt=K||it.bufferCanvas;et=mt.getContext(),et.clear(),et.save(),et._applyLineJoin(this);var ut=this.getAbsoluteTransform(k).getMatrix();et.transform(ut[0],ut[1],ut[2],ut[3],ut[4],ut[5]),B.call(this,et,this),et.restore();const At=mt.pixelRatio;W&&P._applyShadow(this),P._applyOpacity(this),P._applyGlobalCompositeOperation(this),P.drawImage(mt._canvas,0,0,mt.width/At,mt.height/At)}else{if(P._applyLineJoin(this),!_t){var ut=this.getAbsoluteTransform(k).getMatrix();P.transform(ut[0],ut[1],ut[2],ut[3],ut[4],ut[5]),P._applyOpacity(this),P._applyGlobalCompositeOperation(this)}W&&P._applyShadow(this),B.call(this,P,this)}return P.restore(),this}drawHit(O,k,K=!1){if(!this.shouldDrawHit(k,K))return this;const p=this.getLayer(),E=O||p.hitCanvas,P=E&&E.getContext(),N=this.hitFunc()||this.sceneFunc(),B=this._getCanvasCache(),W=B&&B.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),W){P.save();const et=this.getAbsoluteTransform(k).getMatrix();return P.transform(et[0],et[1],et[2],et[3],et[4],et[5]),this._drawCachedHitCanvas(P),P.restore(),this}if(!N)return this;if(P.save(),P._applyLineJoin(this),!(this===k)){const et=this.getAbsoluteTransform(k).getMatrix();P.transform(et[0],et[1],et[2],et[3],et[4],et[5])}return N.call(this,P,this),P.restore(),this}drawHitFromCache(O=0){const k=this._getCanvasCache(),K=this._getCachedSceneCanvas(),p=k.hit,E=p.getContext(),P=p.getWidth(),N=p.getHeight();E.clear(),E.drawImage(K._canvas,0,0,P,N);try{const B=E.getImageData(0,0,P,N),W=B.data,it=W.length,et=i.Util._hexToRgb(this.colorKey);for(let ht=0;ht<it;ht+=4)W[ht+3]>O?(W[ht]=et.r,W[ht+1]=et.g,W[ht+2]=et.b,W[ht+3]=255):W[ht+3]=0;E.putImageData(B,0,0)}catch(B){i.Util.error("Unable to draw hit graph from cached scene canvas. "+B.message)}return this}hasPointerCapture(O){return c.hasPointerCapture(O,this)}setPointerCapture(O){c.setPointerCapture(O,this)}releaseCapture(O){c.releaseCapture(O,this)}}t.Shape=D,D.prototype._fillFunc=w,D.prototype._strokeFunc=T,D.prototype._fillFuncHit=F,D.prototype._strokeFuncHit=m,D.prototype._centroid=!1,D.prototype.nodeType="Shape",(0,a._registerNode)(D),D.prototype.eventListeners={},D.prototype.on.call(D.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",d),D.prototype.on.call(D.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",S),D.prototype.on.call(D.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",A),D.prototype.on.call(D.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",M),D.prototype.on.call(D.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",j),s.Factory.addGetterSetter(D,"stroke",void 0,(0,o.getStringOrGradientValidator)()),s.Factory.addGetterSetter(D,"strokeWidth",2,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(D,"fillAfterStrokeEnabled",!1),s.Factory.addGetterSetter(D,"hitStrokeWidth","auto",(0,o.getNumberOrAutoValidator)()),s.Factory.addGetterSetter(D,"strokeHitEnabled",!0,(0,o.getBooleanValidator)()),s.Factory.addGetterSetter(D,"perfectDrawEnabled",!0,(0,o.getBooleanValidator)()),s.Factory.addGetterSetter(D,"shadowForStrokeEnabled",!0,(0,o.getBooleanValidator)()),s.Factory.addGetterSetter(D,"lineJoin"),s.Factory.addGetterSetter(D,"lineCap"),s.Factory.addGetterSetter(D,"sceneFunc"),s.Factory.addGetterSetter(D,"hitFunc"),s.Factory.addGetterSetter(D,"dash"),s.Factory.addGetterSetter(D,"dashOffset",0,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(D,"shadowColor",void 0,(0,o.getStringValidator)()),s.Factory.addGetterSetter(D,"shadowBlur",0,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(D,"shadowOpacity",1,(0,o.getNumberValidator)()),s.Factory.addComponentsGetterSetter(D,"shadowOffset",["x","y"]),s.Factory.addGetterSetter(D,"shadowOffsetX",0,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(D,"shadowOffsetY",0,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(D,"fillPatternImage"),s.Factory.addGetterSetter(D,"fill",void 0,(0,o.getStringOrGradientValidator)()),s.Factory.addGetterSetter(D,"fillPatternX",0,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(D,"fillPatternY",0,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(D,"fillLinearGradientColorStops"),s.Factory.addGetterSetter(D,"strokeLinearGradientColorStops"),s.Factory.addGetterSetter(D,"fillRadialGradientStartRadius",0),s.Factory.addGetterSetter(D,"fillRadialGradientEndRadius",0),s.Factory.addGetterSetter(D,"fillRadialGradientColorStops"),s.Factory.addGetterSetter(D,"fillPatternRepeat","repeat"),s.Factory.addGetterSetter(D,"fillEnabled",!0),s.Factory.addGetterSetter(D,"strokeEnabled",!0),s.Factory.addGetterSetter(D,"shadowEnabled",!0),s.Factory.addGetterSetter(D,"dashEnabled",!0),s.Factory.addGetterSetter(D,"strokeScaleEnabled",!0),s.Factory.addGetterSetter(D,"fillPriority","color"),s.Factory.addComponentsGetterSetter(D,"fillPatternOffset",["x","y"]),s.Factory.addGetterSetter(D,"fillPatternOffsetX",0,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(D,"fillPatternOffsetY",0,(0,o.getNumberValidator)()),s.Factory.addComponentsGetterSetter(D,"fillPatternScale",["x","y"]),s.Factory.addGetterSetter(D,"fillPatternScaleX",1,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(D,"fillPatternScaleY",1,(0,o.getNumberValidator)()),s.Factory.addComponentsGetterSetter(D,"fillLinearGradientStartPoint",["x","y"]),s.Factory.addComponentsGetterSetter(D,"strokeLinearGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(D,"fillLinearGradientStartPointX",0),s.Factory.addGetterSetter(D,"strokeLinearGradientStartPointX",0),s.Factory.addGetterSetter(D,"fillLinearGradientStartPointY",0),s.Factory.addGetterSetter(D,"strokeLinearGradientStartPointY",0),s.Factory.addComponentsGetterSetter(D,"fillLinearGradientEndPoint",["x","y"]),s.Factory.addComponentsGetterSetter(D,"strokeLinearGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(D,"fillLinearGradientEndPointX",0),s.Factory.addGetterSetter(D,"strokeLinearGradientEndPointX",0),s.Factory.addGetterSetter(D,"fillLinearGradientEndPointY",0),s.Factory.addGetterSetter(D,"strokeLinearGradientEndPointY",0),s.Factory.addComponentsGetterSetter(D,"fillRadialGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(D,"fillRadialGradientStartPointX",0),s.Factory.addGetterSetter(D,"fillRadialGradientStartPointY",0),s.Factory.addComponentsGetterSetter(D,"fillRadialGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(D,"fillRadialGradientEndPointX",0),s.Factory.addGetterSetter(D,"fillRadialGradientEndPointY",0),s.Factory.addGetterSetter(D,"fillPatternRotation",0),s.Factory.addGetterSetter(D,"fillRule",void 0,(0,o.getStringValidator)()),s.Factory.backCompat(D,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(ro)),ro}var ul;function iu(){if(ul)return dr;ul=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.Layer=void 0;const t=ue(),e=as(),i=de(),s=Yt(),l=os(),o=$t(),a=we(),c=zt(),h="#",g="beforeDraw",f="draw",b=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],x=b.length;let v=class extends e.Container{constructor(w){super(w),this.canvas=new l.SceneCanvas,this.hitCanvas=new l.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(w){return this.getContext().clear(w),this.getHitCanvas().getContext().clear(w),this}setZIndex(w){super.setZIndex(w);const T=this.getStage();return T&&T.content&&(T.content.removeChild(this.getNativeCanvasElement()),w<T.children.length-1?T.content.insertBefore(this.getNativeCanvasElement(),T.children[w+1].getCanvas()._canvas):T.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){i.Node.prototype.moveToTop.call(this);const w=this.getStage();return w&&w.content&&(w.content.removeChild(this.getNativeCanvasElement()),w.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!i.Node.prototype.moveUp.call(this))return!1;const T=this.getStage();return!T||!T.content?!1:(T.content.removeChild(this.getNativeCanvasElement()),this.index<T.children.length-1?T.content.insertBefore(this.getNativeCanvasElement(),T.children[this.index+1].getCanvas()._canvas):T.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(i.Node.prototype.moveDown.call(this)){const w=this.getStage();if(w){const T=w.children;w.content&&(w.content.removeChild(this.getNativeCanvasElement()),w.content.insertBefore(this.getNativeCanvasElement(),T[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(i.Node.prototype.moveToBottom.call(this)){const w=this.getStage();if(w){const T=w.children;w.content&&(w.content.removeChild(this.getNativeCanvasElement()),w.content.insertBefore(this.getNativeCanvasElement(),T[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const w=this.getNativeCanvasElement();return i.Node.prototype.remove.call(this),w&&w.parentNode&&t.Util._isInDocument(w)&&w.parentNode.removeChild(w),this}getStage(){return this.parent}setSize({width:w,height:T}){return this.canvas.setSize(w,T),this.hitCanvas.setSize(w,T),this._setSmoothEnabled(),this}_validateAdd(w){const T=w.getType();T!=="Group"&&T!=="Shape"&&t.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(w){return w=w||{},w.width=w.width||this.getWidth(),w.height=w.height||this.getHeight(),w.x=w.x!==void 0?w.x:this.x(),w.y=w.y!==void 0?w.y:this.y(),i.Node.prototype._toKonvaCanvas.call(this,w)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){t.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){t.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,t.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(w){if(!this.isListening()||!this.isVisible())return null;let T=1,F=!1;for(;;){for(let m=0;m<x;m++){const d=b[m],S=this._getIntersection({x:w.x+d.x*T,y:w.y+d.y*T}),A=S.shape;if(A)return A;if(F=!!S.antialiased,!S.antialiased)break}if(F)T+=1;else return null}}_getIntersection(w){const T=this.hitCanvas.pixelRatio,F=this.hitCanvas.context.getImageData(Math.round(w.x*T),Math.round(w.y*T),1,1).data,m=F[3];if(m===255){const d=t.Util._rgbToHex(F[0],F[1],F[2]),S=a.shapes[h+d];return S?{shape:S}:{antialiased:!0}}else if(m>0)return{antialiased:!0};return{}}drawScene(w,T){const F=this.getLayer(),m=w||F&&F.getCanvas();return this._fire(g,{node:this}),this.clearBeforeDraw()&&m.getContext().clear(),e.Container.prototype.drawScene.call(this,m,T),this._fire(f,{node:this}),this}drawHit(w,T){const F=this.getLayer(),m=w||F&&F.hitCanvas;return F&&F.clearBeforeDraw()&&F.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,m,T),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(w){t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(w)}getHitGraphEnabled(w){return t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const w=this.parent;!!this.hitCanvas._canvas.parentNode?w.content.removeChild(this.hitCanvas._canvas):w.content.appendChild(this.hitCanvas._canvas)}destroy(){return t.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return dr.Layer=v,v.prototype.nodeType="Layer",(0,c._registerNode)(v),s.Factory.addGetterSetter(v,"imageSmoothingEnabled",!0),s.Factory.addGetterSetter(v,"clearBeforeDraw",!0),s.Factory.addGetterSetter(v,"hitGraphEnabled",!0,(0,o.getBooleanValidator)()),dr}var gr={},hl;function ad(){if(hl)return gr;hl=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.FastLayer=void 0;const t=ue(),e=iu(),i=zt();let s=class extends e.Layer{constructor(o){super(o),this.listening(!1),t.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return gr.FastLayer=s,s.prototype.nodeType="FastLayer",(0,i._registerNode)(s),gr}var pr={},fl;function Ho(){if(fl)return pr;fl=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.Group=void 0;const t=ue(),e=as(),i=zt();let s=class extends e.Container{_validateAdd(o){const a=o.getType();a!=="Group"&&a!=="Shape"&&t.Util.throw("You may only add groups and shapes to groups.")}};return pr.Group=s,s.prototype.nodeType="Group",(0,i._registerNode)(s),pr}var mr={},dl;function Wo(){if(dl)return mr;dl=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.Animation=void 0;const t=zt(),e=ue(),i=function(){return t.glob.performance&&t.glob.performance.now?function(){return t.glob.performance.now()}:function(){return new Date().getTime()}}();let s=class Yn{constructor(o,a){this.id=Yn.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=o,this.setLayers(a)}setLayers(o){let a=[];return o&&(a=Array.isArray(o)?o:[o]),this.layers=a,this}getLayers(){return this.layers}addLayer(o){const a=this.layers,c=a.length;for(let h=0;h<c;h++)if(a[h]._id===o._id)return!1;return this.layers.push(o),!0}isRunning(){const a=Yn.animations,c=a.length;for(let h=0;h<c;h++)if(a[h].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),Yn._addAnimation(this),this}stop(){return Yn._removeAnimation(this),this}_updateFrameObject(o){this.frame.timeDiff=o-this.frame.lastTime,this.frame.lastTime=o,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(o){this.animations.push(o),this._handleAnimation()}static _removeAnimation(o){const a=o.id,c=this.animations,h=c.length;for(let g=0;g<h;g++)if(c[g].id===a){this.animations.splice(g,1);break}}static _runFrames(){const o={},a=this.animations;for(let c=0;c<a.length;c++){const h=a[c],g=h.layers,f=h.func;h._updateFrameObject(i());const b=g.length;let x;if(f?x=f.call(h,h.frame)!==!1:x=!0,!!x)for(let v=0;v<b;v++){const y=g[v];y._id!==void 0&&(o[y._id]=y)}}for(const c in o)o.hasOwnProperty(c)&&o[c].batchDraw()}static _animationLoop(){const o=Yn;o.animations.length?(o._runFrames(),e.Util.requestAnimFrame(o._animationLoop)):o.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return mr.Animation=s,s.animations=[],s.animIdCounter=0,s.animRunning=!1,mr}var io={},gl;function ld(){return gl||(gl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=ue(),i=Wo(),s=de(),l=zt(),o={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,c=2,h=3,g=["fill","stroke","shadowColor"];let f=0;class b{constructor(y,w,T,F,m,d,S){this.prop=y,this.propFunc=w,this.begin=F,this._pos=F,this.duration=d,this._change=0,this.prevPos=0,this.yoyo=S,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=T,this._change=m-this.begin,this.pause()}fire(y){const w=this[y];w&&w()}setTime(y){y>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():y<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=y,this.update())}getTime(){return this._time}setPosition(y){this.prevPos=this._pos,this.propFunc(y),this._pos=y}getPosition(y){return y===void 0&&(y=this._time),this.func(y,this.begin,this._change,this.duration)}play(){this.state=c,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=h,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(y){this.pause(),this._time=y,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const y=this.getTimer()-this._startTime;this.state===c?this.setTime(y):this.state===h&&this.setTime(this.duration-y)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class x{constructor(y){const w=this,T=y.node,F=T._id,m=y.easing||t.Easings.Linear,d=!!y.yoyo;let S,A;typeof y.duration>"u"?S=.3:y.duration===0?S=.001:S=y.duration,this.node=T,this._id=f++;const M=T.getLayer()||(T instanceof l.Konva.Stage?T.getLayers():null);M||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){w.tween.onEnterFrame()},M),this.tween=new b(A,function(j){w._tweenFunc(j)},m,0,1,S*1e3,d),this._addListeners(),x.attrs[F]||(x.attrs[F]={}),x.attrs[F][this._id]||(x.attrs[F][this._id]={}),x.tweens[F]||(x.tweens[F]={});for(A in y)o[A]===void 0&&this._addAttr(A,y[A]);this.reset(),this.onFinish=y.onFinish,this.onReset=y.onReset,this.onUpdate=y.onUpdate}_addAttr(y,w){const T=this.node,F=T._id;let m,d,S,A,M;const j=x.tweens[F][y];j&&delete x.attrs[F][j][y];let D=T.getAttr(y);if(e.Util._isArray(w))if(m=[],d=Math.max(w.length,D.length),y==="points"&&w.length!==D.length&&(w.length>D.length?(A=D,D=e.Util._prepareArrayForTween(D,w,T.closed())):(S=w,w=e.Util._prepareArrayForTween(w,D,T.closed()))),y.indexOf("fill")===0)for(let I=0;I<d;I++)if(I%2===0)m.push(w[I]-D[I]);else{const O=e.Util.colorToRGBA(D[I]);M=e.Util.colorToRGBA(w[I]),D[I]=O,m.push({r:M.r-O.r,g:M.g-O.g,b:M.b-O.b,a:M.a-O.a})}else for(let I=0;I<d;I++)m.push(w[I]-D[I]);else g.indexOf(y)!==-1?(D=e.Util.colorToRGBA(D),M=e.Util.colorToRGBA(w),m={r:M.r-D.r,g:M.g-D.g,b:M.b-D.b,a:M.a-D.a}):m=w-D;x.attrs[F][this._id][y]={start:D,diff:m,end:w,trueEnd:S,trueStart:A},x.tweens[F][y]=this._id}_tweenFunc(y){const w=this.node,T=x.attrs[w._id][this._id];let F,m,d,S,A,M,j,D;for(F in T){if(m=T[F],d=m.start,S=m.diff,D=m.end,e.Util._isArray(d))if(A=[],j=Math.max(d.length,D.length),F.indexOf("fill")===0)for(M=0;M<j;M++)M%2===0?A.push((d[M]||0)+S[M]*y):A.push("rgba("+Math.round(d[M].r+S[M].r*y)+","+Math.round(d[M].g+S[M].g*y)+","+Math.round(d[M].b+S[M].b*y)+","+(d[M].a+S[M].a*y)+")");else for(M=0;M<j;M++)A.push((d[M]||0)+S[M]*y);else g.indexOf(F)!==-1?A="rgba("+Math.round(d.r+S.r*y)+","+Math.round(d.g+S.g*y)+","+Math.round(d.b+S.b*y)+","+(d.a+S.a*y)+")":A=d+S*y;w.setAttr(F,A)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const y=this.node,w=x.attrs[y._id][this._id];w.points&&w.points.trueEnd&&y.setAttr("points",w.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const y=this.node,w=x.attrs[y._id][this._id];w.points&&w.points.trueStart&&y.points(w.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(y){return this.tween.seek(y*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const y=this.node._id,w=this._id,T=x.tweens[y];this.pause();for(const F in T)delete x.tweens[y][F];delete x.attrs[y][w]}}t.Tween=x,x.attrs={},x.tweens={},s.Node.prototype.to=function(v){const y=v.onFinish;v.node=this,v.onFinish=function(){this.destroy(),y&&y()},new x(v).play()},t.Easings={BackEaseIn(v,y,w,T){return w*(v/=T)*v*((1.70158+1)*v-1.70158)+y},BackEaseOut(v,y,w,T){return w*((v=v/T-1)*v*((1.70158+1)*v+1.70158)+1)+y},BackEaseInOut(v,y,w,T){let F=1.70158;return(v/=T/2)<1?w/2*(v*v*(((F*=1.525)+1)*v-F))+y:w/2*((v-=2)*v*(((F*=1.525)+1)*v+F)+2)+y},ElasticEaseIn(v,y,w,T,F,m){let d=0;return v===0?y:(v/=T)===1?y+w:(m||(m=T*.3),!F||F<Math.abs(w)?(F=w,d=m/4):d=m/(2*Math.PI)*Math.asin(w/F),-(F*Math.pow(2,10*(v-=1))*Math.sin((v*T-d)*(2*Math.PI)/m))+y)},ElasticEaseOut(v,y,w,T,F,m){let d=0;return v===0?y:(v/=T)===1?y+w:(m||(m=T*.3),!F||F<Math.abs(w)?(F=w,d=m/4):d=m/(2*Math.PI)*Math.asin(w/F),F*Math.pow(2,-10*v)*Math.sin((v*T-d)*(2*Math.PI)/m)+w+y)},ElasticEaseInOut(v,y,w,T,F,m){let d=0;return v===0?y:(v/=T/2)===2?y+w:(m||(m=T*(.3*1.5)),!F||F<Math.abs(w)?(F=w,d=m/4):d=m/(2*Math.PI)*Math.asin(w/F),v<1?-.5*(F*Math.pow(2,10*(v-=1))*Math.sin((v*T-d)*(2*Math.PI)/m))+y:F*Math.pow(2,-10*(v-=1))*Math.sin((v*T-d)*(2*Math.PI)/m)*.5+w+y)},BounceEaseOut(v,y,w,T){return(v/=T)<1/2.75?w*(7.5625*v*v)+y:v<2/2.75?w*(7.5625*(v-=1.5/2.75)*v+.75)+y:v<2.5/2.75?w*(7.5625*(v-=2.25/2.75)*v+.9375)+y:w*(7.5625*(v-=2.625/2.75)*v+.984375)+y},BounceEaseIn(v,y,w,T){return w-t.Easings.BounceEaseOut(T-v,0,w,T)+y},BounceEaseInOut(v,y,w,T){return v<T/2?t.Easings.BounceEaseIn(v*2,0,w,T)*.5+y:t.Easings.BounceEaseOut(v*2-T,0,w,T)*.5+w*.5+y},EaseIn(v,y,w,T){return w*(v/=T)*v+y},EaseOut(v,y,w,T){return-w*(v/=T)*(v-2)+y},EaseInOut(v,y,w,T){return(v/=T/2)<1?w/2*v*v+y:-w/2*(--v*(v-2)-1)+y},StrongEaseIn(v,y,w,T){return w*(v/=T)*v*v*v*v+y},StrongEaseOut(v,y,w,T){return w*((v=v/T-1)*v*v*v*v+1)+y},StrongEaseInOut(v,y,w,T){return(v/=T/2)<1?w/2*v*v*v*v*v+y:w/2*((v-=2)*v*v*v*v+2)+y},Linear(v,y,w,T){return w*v/T+y}}}(io)),io}var pl;function cd(){return pl||(pl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=zt(),i=ue(),s=de(),l=as(),o=od(),a=iu(),c=ad(),h=Ho(),g=Vo(),f=we(),b=Wo(),x=ld(),v=nu(),y=os();t.Konva=i.Util._assign(e.Konva,{Util:i.Util,Transform:i.Transform,Node:s.Node,Container:l.Container,Stage:o.Stage,stages:o.stages,Layer:a.Layer,FastLayer:c.FastLayer,Group:h.Group,DD:g.DD,Shape:f.Shape,shapes:f.shapes,Animation:b.Animation,Tween:x.Tween,Easings:x.Easings,Context:v.Context,Canvas:y.Canvas}),t.default=t.Konva}(Qs)),Qs}var yr={},ml;function ud(){if(ml)return yr;ml=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.Arc=void 0;const t=Yt(),e=we(),i=zt(),s=$t(),l=zt();let o=class extends e.Shape{_sceneFunc(c){const h=i.Konva.getAngle(this.angle()),g=this.clockwise();c.beginPath(),c.arc(0,0,this.outerRadius(),0,h,g),c.arc(0,0,this.innerRadius(),h,0,!g),c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(c){this.outerRadius(c/2)}setHeight(c){this.outerRadius(c/2)}getSelfRect(){const c=this.innerRadius(),h=this.outerRadius(),g=this.clockwise(),f=i.Konva.getAngle(g?360-this.angle():this.angle()),b=Math.cos(Math.min(f,Math.PI)),x=1,v=Math.sin(Math.min(Math.max(Math.PI,f),3*Math.PI/2)),y=Math.sin(Math.min(f,Math.PI/2)),w=b*(b>0?c:h),T=x*h,F=v*(v>0?c:h),m=y*(y>0?h:c);return{x:w,y:g?-1*m:F,width:T-w,height:m-F}}};return yr.Arc=o,o.prototype._centroid=!0,o.prototype.className="Arc",o.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,l._registerNode)(o),t.Factory.addGetterSetter(o,"innerRadius",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(o,"outerRadius",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(o,"angle",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(o,"clockwise",!1,(0,s.getBooleanValidator)()),yr}var vr={},_r={},yl;function su(){if(yl)return _r;yl=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.Line=void 0;const t=Yt(),e=zt(),i=we(),s=$t();function l(c,h,g,f,b,x,v){const y=Math.sqrt(Math.pow(g-c,2)+Math.pow(f-h,2)),w=Math.sqrt(Math.pow(b-g,2)+Math.pow(x-f,2)),T=v*y/(y+w),F=v*w/(y+w),m=g-T*(b-c),d=f-T*(x-h),S=g+F*(b-c),A=f+F*(x-h);return[m,d,S,A]}function o(c,h){const g=c.length,f=[];for(let b=2;b<g-2;b+=2){const x=l(c[b-2],c[b-1],c[b],c[b+1],c[b+2],c[b+3],h);isNaN(x[0])||(f.push(x[0]),f.push(x[1]),f.push(c[b]),f.push(c[b+1]),f.push(x[2]),f.push(x[3]))}return f}let a=class extends i.Shape{constructor(h){super(h),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(h){let g=this.points(),f=g.length,b=this.tension(),x=this.closed(),v=this.bezier(),y,w,T;if(f){if(h.beginPath(),h.moveTo(g[0],g[1]),b!==0&&f>4){for(y=this.getTensionPoints(),w=y.length,T=x?0:4,x||h.quadraticCurveTo(y[0],y[1],y[2],y[3]);T<w-2;)h.bezierCurveTo(y[T++],y[T++],y[T++],y[T++],y[T++],y[T++]);x||h.quadraticCurveTo(y[w-2],y[w-1],g[f-2],g[f-1])}else if(v)for(T=2;T<f;)h.bezierCurveTo(g[T++],g[T++],g[T++],g[T++],g[T++],g[T++]);else for(T=2;T<f;T+=2)h.lineTo(g[T],g[T+1]);x?(h.closePath(),h.fillStrokeShape(this)):h.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():o(this.points(),this.tension())}_getTensionPointsClosed(){const h=this.points(),g=h.length,f=this.tension(),b=l(h[g-2],h[g-1],h[0],h[1],h[2],h[3],f),x=l(h[g-4],h[g-3],h[g-2],h[g-1],h[0],h[1],f),v=o(h,f);return[b[2],b[3]].concat(v).concat([x[0],x[1],h[g-2],h[g-1],x[2],x[3],b[0],b[1],h[0],h[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let h=this.points();if(h.length<4)return{x:h[0]||0,y:h[1]||0,width:0,height:0};this.tension()!==0?h=[h[0],h[1],...this._getTensionPoints(),h[h.length-2],h[h.length-1]]:h=this.points();let g=h[0],f=h[0],b=h[1],x=h[1],v,y;for(let w=0;w<h.length/2;w++)v=h[w*2],y=h[w*2+1],g=Math.min(g,v),f=Math.max(f,v),b=Math.min(b,y),x=Math.max(x,y);return{x:g,y:b,width:f-g,height:x-b}}};return _r.Line=a,a.prototype.className="Line",a.prototype._attrsAffectingSize=["points","bezier","tension"],(0,e._registerNode)(a),t.Factory.addGetterSetter(a,"closed",!1),t.Factory.addGetterSetter(a,"bezier",!1),t.Factory.addGetterSetter(a,"tension",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"points",[],(0,s.getNumberArrayValidator)()),_r}var br={},so={},vl;function hd(){return vl||(vl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(a,c,h)=>{let g,f;const x=h/2;g=0;for(let v=0;v<20;v++)f=x*t.tValues[20][v]+x,g+=t.cValues[20][v]*s(a,c,f);return x*g};t.getCubicArcLength=e;const i=(a,c,h)=>{h===void 0&&(h=1);const g=a[0]-2*a[1]+a[2],f=c[0]-2*c[1]+c[2],b=2*a[1]-2*a[0],x=2*c[1]-2*c[0],v=4*(g*g+f*f),y=4*(g*b+f*x),w=b*b+x*x;if(v===0)return h*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(c[2]-c[0],2));const T=y/(2*v),F=w/v,m=h+T,d=F-T*T,S=m*m+d>0?Math.sqrt(m*m+d):0,A=T*T+d>0?Math.sqrt(T*T+d):0,M=T+Math.sqrt(T*T+d)!==0?d*Math.log(Math.abs((m+S)/(T+A))):0;return Math.sqrt(v)/2*(m*S-T*A+M)};t.getQuadraticArcLength=i;function s(a,c,h){const g=l(1,h,a),f=l(1,h,c),b=g*g+f*f;return Math.sqrt(b)}const l=(a,c,h)=>{const g=h.length-1;let f,b;if(g===0)return 0;if(a===0){b=0;for(let x=0;x<=g;x++)b+=t.binomialCoefficients[g][x]*Math.pow(1-c,g-x)*Math.pow(c,x)*h[x];return b}else{f=new Array(g);for(let x=0;x<g;x++)f[x]=g*(h[x+1]-h[x]);return l(a-1,c,f)}},o=(a,c,h)=>{let g=1,f=a/c,b=(a-h(f))/c,x=0;for(;g>.001;){const v=h(f+b),y=Math.abs(a-v)/c;if(y<g)g=y,f+=b;else{const w=h(f-b),T=Math.abs(a-w)/c;T<g?(g=T,f-=b):b/=2}if(x++,x>500)break}return f};t.t2length=o}(so)),so}var _l;function zo(){if(_l)return br;_l=1,Object.defineProperty(br,"__esModule",{value:!0}),br.Path=void 0;const t=Yt(),e=we(),i=zt(),s=hd();let l=class De extends e.Shape{constructor(a){super(a),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=De.parsePathData(this.data()),this.pathLength=De.getPathLength(this.dataArray)}_sceneFunc(a){const c=this.dataArray;a.beginPath();let h=!1;for(let S=0;S<c.length;S++){const A=c[S].command,M=c[S].points;switch(A){case"L":a.lineTo(M[0],M[1]);break;case"M":a.moveTo(M[0],M[1]);break;case"C":a.bezierCurveTo(M[0],M[1],M[2],M[3],M[4],M[5]);break;case"Q":a.quadraticCurveTo(M[0],M[1],M[2],M[3]);break;case"A":var g=M[0],f=M[1],b=M[2],x=M[3],v=M[4],y=M[5],w=M[6],T=M[7],F=b>x?b:x,m=b>x?1:b/x,d=b>x?x/b:1;a.translate(g,f),a.rotate(w),a.scale(m,d),a.arc(0,0,F,v,v+y,1-T),a.scale(1/m,1/d),a.rotate(-w),a.translate(-g,-f);break;case"z":h=!0,a.closePath();break}}!h&&!this.hasFill()?a.strokeShape(this):a.fillStrokeShape(this)}getSelfRect(){let a=[];this.dataArray.forEach(function(v){if(v.command==="A"){const y=v.points[4],w=v.points[5],T=v.points[4]+w;let F=Math.PI/180;if(Math.abs(y-T)<F&&(F=Math.abs(y-T)),w<0)for(let m=y-F;m>T;m-=F){const d=De.getPointOnEllipticalArc(v.points[0],v.points[1],v.points[2],v.points[3],m,0);a.push(d.x,d.y)}else for(let m=y+F;m<T;m+=F){const d=De.getPointOnEllipticalArc(v.points[0],v.points[1],v.points[2],v.points[3],m,0);a.push(d.x,d.y)}}else if(v.command==="C")for(let y=0;y<=1;y+=.01){const w=De.getPointOnCubicBezier(y,v.start.x,v.start.y,v.points[0],v.points[1],v.points[2],v.points[3],v.points[4],v.points[5]);a.push(w.x,w.y)}else a=a.concat(v.points)});let c=a[0],h=a[0],g=a[1],f=a[1],b,x;for(let v=0;v<a.length/2;v++)b=a[v*2],x=a[v*2+1],isNaN(b)||(c=Math.min(c,b),h=Math.max(h,b)),isNaN(x)||(g=Math.min(g,x),f=Math.max(f,x));return{x:c,y:g,width:h-c,height:f-g}}getLength(){return this.pathLength}getPointAtLength(a){return De.getPointAtLengthOfDataArray(a,this.dataArray)}static getLineLength(a,c,h,g){return Math.sqrt((h-a)*(h-a)+(g-c)*(g-c))}static getPathLength(a){let c=0;for(let h=0;h<a.length;++h)c+=a[h].pathLength;return c}static getPointAtLengthOfDataArray(a,c){let h,g=0,f=c.length;if(!f)return null;for(;g<f&&a>c[g].pathLength;)a-=c[g].pathLength,++g;if(g===f)return h=c[g-1].points.slice(-2),{x:h[0],y:h[1]};if(a<.01)return h=c[g].points.slice(0,2),{x:h[0],y:h[1]};const b=c[g],x=b.points;switch(b.command){case"L":return De.getPointOnLine(a,b.start.x,b.start.y,x[0],x[1]);case"C":return De.getPointOnCubicBezier((0,s.t2length)(a,De.getPathLength(c),S=>(0,s.getCubicArcLength)([b.start.x,x[0],x[2],x[4]],[b.start.y,x[1],x[3],x[5]],S)),b.start.x,b.start.y,x[0],x[1],x[2],x[3],x[4],x[5]);case"Q":return De.getPointOnQuadraticBezier((0,s.t2length)(a,De.getPathLength(c),S=>(0,s.getQuadraticArcLength)([b.start.x,x[0],x[2]],[b.start.y,x[1],x[3]],S)),b.start.x,b.start.y,x[0],x[1],x[2],x[3]);case"A":var v=x[0],y=x[1],w=x[2],T=x[3],F=x[4],m=x[5],d=x[6];return F+=m*a/b.pathLength,De.getPointOnEllipticalArc(v,y,w,T,F,d)}return null}static getPointOnLine(a,c,h,g,f,b,x){b=b??c,x=x??h;const v=this.getLineLength(c,h,g,f);if(v<1e-10)return{x:c,y:h};if(g===c)return{x:b,y:x+(f>h?a:-a)};const y=(f-h)/(g-c),w=Math.sqrt(a*a/(1+y*y))*(g<c?-1:1),T=y*w;if(Math.abs(x-h-y*(b-c))<1e-10)return{x:b+w,y:x+T};const F=((b-c)*(g-c)+(x-h)*(f-h))/(v*v),m=c+F*(g-c),d=h+F*(f-h),S=this.getLineLength(b,x,m,d),A=Math.sqrt(a*a-S*S),M=Math.sqrt(A*A/(1+y*y))*(g<c?-1:1),j=y*M;return{x:m+M,y:d+j}}static getPointOnCubicBezier(a,c,h,g,f,b,x,v,y){function w(A){return A*A*A}function T(A){return 3*A*A*(1-A)}function F(A){return 3*A*(1-A)*(1-A)}function m(A){return(1-A)*(1-A)*(1-A)}const d=v*w(a)+b*T(a)+g*F(a)+c*m(a),S=y*w(a)+x*T(a)+f*F(a)+h*m(a);return{x:d,y:S}}static getPointOnQuadraticBezier(a,c,h,g,f,b,x){function v(m){return m*m}function y(m){return 2*m*(1-m)}function w(m){return(1-m)*(1-m)}const T=b*v(a)+g*y(a)+c*w(a),F=x*v(a)+f*y(a)+h*w(a);return{x:T,y:F}}static getPointOnEllipticalArc(a,c,h,g,f,b){const x=Math.cos(b),v=Math.sin(b),y={x:h*Math.cos(f),y:g*Math.sin(f)};return{x:a+(y.x*x-y.y*v),y:c+(y.x*v+y.y*x)}}static parsePathData(a){if(!a)return[];let c=a;const h=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];c=c.replace(new RegExp(" ","g"),",");for(var g=0;g<h.length;g++)c=c.replace(new RegExp(h[g],"g"),"|"+h[g]);const f=c.split("|"),b=[],x=[];let v=0,y=0;const w=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let T;for(g=1;g<f.length;g++){let p=f[g],E=p.charAt(0);for(p=p.slice(1),x.length=0;T=w.exec(p);)x.push(T[0]);const P=[];for(let N=0,B=x.length;N<B;N++){if(x[N]==="00"){P.push(0,0);continue}const W=parseFloat(x[N]);isNaN(W)?P.push(0):P.push(W)}for(;P.length>0&&!isNaN(P[0]);){let N="",B=[];const W=v,it=y;var F,m,d,S,A,M,j,D,I,O;switch(E){case"l":v+=P.shift(),y+=P.shift(),N="L",B.push(v,y);break;case"L":v=P.shift(),y=P.shift(),B.push(v,y);break;case"m":var k=P.shift(),K=P.shift();if(v+=k,y+=K,N="M",b.length>2&&b[b.length-1].command==="z"){for(let et=b.length-2;et>=0;et--)if(b[et].command==="M"){v=b[et].points[0]+k,y=b[et].points[1]+K;break}}B.push(v,y),E="l";break;case"M":v=P.shift(),y=P.shift(),N="M",B.push(v,y),E="L";break;case"h":v+=P.shift(),N="L",B.push(v,y);break;case"H":v=P.shift(),N="L",B.push(v,y);break;case"v":y+=P.shift(),N="L",B.push(v,y);break;case"V":y=P.shift(),N="L",B.push(v,y);break;case"C":B.push(P.shift(),P.shift(),P.shift(),P.shift()),v=P.shift(),y=P.shift(),B.push(v,y);break;case"c":B.push(v+P.shift(),y+P.shift(),v+P.shift(),y+P.shift()),v+=P.shift(),y+=P.shift(),N="C",B.push(v,y);break;case"S":m=v,d=y,F=b[b.length-1],F.command==="C"&&(m=v+(v-F.points[2]),d=y+(y-F.points[3])),B.push(m,d,P.shift(),P.shift()),v=P.shift(),y=P.shift(),N="C",B.push(v,y);break;case"s":m=v,d=y,F=b[b.length-1],F.command==="C"&&(m=v+(v-F.points[2]),d=y+(y-F.points[3])),B.push(m,d,v+P.shift(),y+P.shift()),v+=P.shift(),y+=P.shift(),N="C",B.push(v,y);break;case"Q":B.push(P.shift(),P.shift()),v=P.shift(),y=P.shift(),B.push(v,y);break;case"q":B.push(v+P.shift(),y+P.shift()),v+=P.shift(),y+=P.shift(),N="Q",B.push(v,y);break;case"T":m=v,d=y,F=b[b.length-1],F.command==="Q"&&(m=v+(v-F.points[0]),d=y+(y-F.points[1])),v=P.shift(),y=P.shift(),N="Q",B.push(m,d,v,y);break;case"t":m=v,d=y,F=b[b.length-1],F.command==="Q"&&(m=v+(v-F.points[0]),d=y+(y-F.points[1])),v+=P.shift(),y+=P.shift(),N="Q",B.push(m,d,v,y);break;case"A":S=P.shift(),A=P.shift(),M=P.shift(),j=P.shift(),D=P.shift(),I=v,O=y,v=P.shift(),y=P.shift(),N="A",B=this.convertEndpointToCenterParameterization(I,O,v,y,j,D,S,A,M);break;case"a":S=P.shift(),A=P.shift(),M=P.shift(),j=P.shift(),D=P.shift(),I=v,O=y,v+=P.shift(),y+=P.shift(),N="A",B=this.convertEndpointToCenterParameterization(I,O,v,y,j,D,S,A,M);break}b.push({command:N||E,points:B,start:{x:W,y:it},pathLength:this.calcLength(W,it,N||E,B)})}(E==="z"||E==="Z")&&b.push({command:"z",points:[],start:void 0,pathLength:0})}return b}static calcLength(a,c,h,g){let f,b,x,v;const y=De;switch(h){case"L":return y.getLineLength(a,c,g[0],g[1]);case"C":return(0,s.getCubicArcLength)([a,g[0],g[2],g[4]],[c,g[1],g[3],g[5]],1);case"Q":return(0,s.getQuadraticArcLength)([a,g[0],g[2]],[c,g[1],g[3]],1);case"A":f=0;var w=g[4],T=g[5],F=g[4]+T,m=Math.PI/180;if(Math.abs(w-F)<m&&(m=Math.abs(w-F)),b=y.getPointOnEllipticalArc(g[0],g[1],g[2],g[3],w,0),T<0)for(v=w-m;v>F;v-=m)x=y.getPointOnEllipticalArc(g[0],g[1],g[2],g[3],v,0),f+=y.getLineLength(b.x,b.y,x.x,x.y),b=x;else for(v=w+m;v<F;v+=m)x=y.getPointOnEllipticalArc(g[0],g[1],g[2],g[3],v,0),f+=y.getLineLength(b.x,b.y,x.x,x.y),b=x;return x=y.getPointOnEllipticalArc(g[0],g[1],g[2],g[3],F,0),f+=y.getLineLength(b.x,b.y,x.x,x.y),f}return 0}static convertEndpointToCenterParameterization(a,c,h,g,f,b,x,v,y){const w=y*(Math.PI/180),T=Math.cos(w)*(a-h)/2+Math.sin(w)*(c-g)/2,F=-1*Math.sin(w)*(a-h)/2+Math.cos(w)*(c-g)/2,m=T*T/(x*x)+F*F/(v*v);m>1&&(x*=Math.sqrt(m),v*=Math.sqrt(m));let d=Math.sqrt((x*x*(v*v)-x*x*(F*F)-v*v*(T*T))/(x*x*(F*F)+v*v*(T*T)));f===b&&(d*=-1),isNaN(d)&&(d=0);const S=d*x*F/v,A=d*-v*T/x,M=(a+h)/2+Math.cos(w)*S-Math.sin(w)*A,j=(c+g)/2+Math.sin(w)*S+Math.cos(w)*A,D=function(P){return Math.sqrt(P[0]*P[0]+P[1]*P[1])},I=function(P,N){return(P[0]*N[0]+P[1]*N[1])/(D(P)*D(N))},O=function(P,N){return(P[0]*N[1]<P[1]*N[0]?-1:1)*Math.acos(I(P,N))},k=O([1,0],[(T-S)/x,(F-A)/v]),K=[(T-S)/x,(F-A)/v],p=[(-1*T-S)/x,(-1*F-A)/v];let E=O(K,p);return I(K,p)<=-1&&(E=Math.PI),I(K,p)>=1&&(E=0),b===0&&E>0&&(E=E-2*Math.PI),b===1&&E<0&&(E=E+2*Math.PI),[M,j,x,v,k,E,w,b]}};return br.Path=l,l.prototype.className="Path",l.prototype._attrsAffectingSize=["data"],(0,i._registerNode)(l),t.Factory.addGetterSetter(l,"data"),br}var bl;function fd(){if(bl)return vr;bl=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.Arrow=void 0;const t=Yt(),e=su(),i=$t(),s=zt(),l=zo();let o=class extends e.Line{_sceneFunc(c){super._sceneFunc(c);const h=Math.PI*2,g=this.points();let f=g;const b=this.tension()!==0&&g.length>4;b&&(f=this.getTensionPoints());const x=this.pointerLength(),v=g.length;let y,w;if(b){const m=[f[f.length-4],f[f.length-3],f[f.length-2],f[f.length-1],g[v-2],g[v-1]],d=l.Path.calcLength(f[f.length-4],f[f.length-3],"C",m),S=l.Path.getPointOnQuadraticBezier(Math.min(1,1-x/d),m[0],m[1],m[2],m[3],m[4],m[5]);y=g[v-2]-S.x,w=g[v-1]-S.y}else y=g[v-2]-g[v-4],w=g[v-1]-g[v-3];const T=(Math.atan2(w,y)+h)%h,F=this.pointerWidth();this.pointerAtEnding()&&(c.save(),c.beginPath(),c.translate(g[v-2],g[v-1]),c.rotate(T),c.moveTo(0,0),c.lineTo(-x,F/2),c.lineTo(-x,-F/2),c.closePath(),c.restore(),this.__fillStroke(c)),this.pointerAtBeginning()&&(c.save(),c.beginPath(),c.translate(g[0],g[1]),b?(y=(f[0]+f[2])/2-g[0],w=(f[1]+f[3])/2-g[1]):(y=g[2]-g[0],w=g[3]-g[1]),c.rotate((Math.atan2(-w,-y)+h)%h),c.moveTo(0,0),c.lineTo(-x,F/2),c.lineTo(-x,-F/2),c.closePath(),c.restore(),this.__fillStroke(c))}__fillStroke(c){const h=this.dashEnabled();h&&(this.attrs.dashEnabled=!1,c.setLineDash([])),c.fillStrokeShape(this),h&&(this.attrs.dashEnabled=!0)}getSelfRect(){const c=super.getSelfRect(),h=this.pointerWidth()/2;return{x:c.x,y:c.y-h,width:c.width,height:c.height+h*2}}};return vr.Arrow=o,o.prototype.className="Arrow",(0,s._registerNode)(o),t.Factory.addGetterSetter(o,"pointerLength",10,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(o,"pointerWidth",10,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(o,"pointerAtBeginning",!1),t.Factory.addGetterSetter(o,"pointerAtEnding",!0),vr}var wr={},wl;function dd(){if(wl)return wr;wl=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.Circle=void 0;const t=Yt(),e=we(),i=$t(),s=zt();let l=class extends e.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius()!==a/2&&this.radius(a/2)}setHeight(a){this.radius()!==a/2&&this.radius(a/2)}};return wr.Circle=l,l.prototype._centroid=!0,l.prototype.className="Circle",l.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(l),t.Factory.addGetterSetter(l,"radius",0,(0,i.getNumberValidator)()),wr}var Sr={},Sl;function gd(){if(Sl)return Sr;Sl=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.Ellipse=void 0;const t=Yt(),e=we(),i=$t(),s=zt();let l=class extends e.Shape{_sceneFunc(a){const c=this.radiusX(),h=this.radiusY();a.beginPath(),a.save(),c!==h&&a.scale(1,h/c),a.arc(0,0,c,0,Math.PI*2,!1),a.restore(),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(a){this.radiusX(a/2)}setHeight(a){this.radiusY(a/2)}};return Sr.Ellipse=l,l.prototype.className="Ellipse",l.prototype._centroid=!0,l.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,s._registerNode)(l),t.Factory.addComponentsGetterSetter(l,"radius",["x","y"]),t.Factory.addGetterSetter(l,"radiusX",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(l,"radiusY",0,(0,i.getNumberValidator)()),Sr}var xr={},xl;function pd(){if(xl)return xr;xl=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.Image=void 0;const t=ue(),e=Yt(),i=we(),s=zt(),l=$t();class o extends i.Shape{constructor(c){super(c),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",h=>{this._removeImageLoad(h.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const c=this.image();c&&c.complete||c&&c.readyState===4||c&&c.addEventListener&&c.addEventListener("load",this._loadListener)}_removeImageLoad(c){c&&c.removeEventListener&&c.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const c=!!this.cornerRadius(),h=this.hasShadow();return c&&h?!0:super._useBufferCanvas(!0)}_sceneFunc(c){const h=this.getWidth(),g=this.getHeight(),f=this.cornerRadius(),b=this.attrs.image;let x;if(b){const v=this.attrs.cropWidth,y=this.attrs.cropHeight;v&&y?x=[b,this.cropX(),this.cropY(),v,y,0,0,h,g]:x=[b,0,0,h,g]}(this.hasFill()||this.hasStroke()||f)&&(c.beginPath(),f?t.Util.drawRoundedRectPath(c,h,g,f):c.rect(0,0,h,g),c.closePath(),c.fillStrokeShape(this)),b&&(f&&c.clip(),c.drawImage.apply(c,x))}_hitFunc(c){const h=this.width(),g=this.height(),f=this.cornerRadius();c.beginPath(),f?t.Util.drawRoundedRectPath(c,h,g,f):c.rect(0,0,h,g),c.closePath(),c.fillStrokeShape(this)}getWidth(){var c,h;return(c=this.attrs.width)!==null&&c!==void 0?c:(h=this.image())===null||h===void 0?void 0:h.width}getHeight(){var c,h;return(c=this.attrs.height)!==null&&c!==void 0?c:(h=this.image())===null||h===void 0?void 0:h.height}static fromURL(c,h,g=null){const f=t.Util.createImageElement();f.onload=function(){const b=new o({image:f});h(b)},f.onerror=g,f.crossOrigin="Anonymous",f.src=c}}return xr.Image=o,o.prototype.className="Image",(0,s._registerNode)(o),e.Factory.addGetterSetter(o,"cornerRadius",0,(0,l.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(o,"image"),e.Factory.addComponentsGetterSetter(o,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(o,"cropX",0,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(o,"cropY",0,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(o,"cropWidth",0,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(o,"cropHeight",0,(0,l.getNumberValidator)()),xr}var Mn={},Cl;function md(){if(Cl)return Mn;Cl=1,Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Tag=Mn.Label=void 0;const t=Yt(),e=we(),i=Ho(),s=$t(),l=zt(),o=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],a="Change.konva",c="none",h="up",g="right",f="down",b="left",x=o.length;let v=class extends i.Group{constructor(T){super(T),this.on("add.konva",function(F){this._addListeners(F.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(T){let F=this,m;const d=function(){F._sync()};for(m=0;m<x;m++)T.on(o[m]+a,d)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let T=this.getText(),F=this.getTag(),m,d,S,A,M,j,D;if(T&&F){switch(m=T.width(),d=T.height(),S=F.pointerDirection(),A=F.pointerWidth(),D=F.pointerHeight(),M=0,j=0,S){case h:M=m/2,j=-1*D;break;case g:M=m+A,j=d/2;break;case f:M=m/2,j=d+D;break;case b:M=-1*A,j=d/2;break}F.setAttrs({x:-1*M,y:-1*j,width:m,height:d}),T.setAttrs({x:-1*M,y:-1*j})}}};Mn.Label=v,v.prototype.className="Label",(0,l._registerNode)(v);class y extends e.Shape{_sceneFunc(T){const F=this.width(),m=this.height(),d=this.pointerDirection(),S=this.pointerWidth(),A=this.pointerHeight(),M=this.cornerRadius();let j=0,D=0,I=0,O=0;typeof M=="number"?j=D=I=O=Math.min(M,F/2,m/2):(j=Math.min(M[0]||0,F/2,m/2),D=Math.min(M[1]||0,F/2,m/2),O=Math.min(M[2]||0,F/2,m/2),I=Math.min(M[3]||0,F/2,m/2)),T.beginPath(),T.moveTo(j,0),d===h&&(T.lineTo((F-S)/2,0),T.lineTo(F/2,-1*A),T.lineTo((F+S)/2,0)),T.lineTo(F-D,0),T.arc(F-D,D,D,Math.PI*3/2,0,!1),d===g&&(T.lineTo(F,(m-A)/2),T.lineTo(F+S,m/2),T.lineTo(F,(m+A)/2)),T.lineTo(F,m-O),T.arc(F-O,m-O,O,0,Math.PI/2,!1),d===f&&(T.lineTo((F+S)/2,m),T.lineTo(F/2,m+A),T.lineTo((F-S)/2,m)),T.lineTo(I,m),T.arc(I,m-I,I,Math.PI/2,Math.PI,!1),d===b&&(T.lineTo(0,(m+A)/2),T.lineTo(-1*S,m/2),T.lineTo(0,(m-A)/2)),T.lineTo(0,j),T.arc(j,j,j,Math.PI,Math.PI*3/2,!1),T.closePath(),T.fillStrokeShape(this)}getSelfRect(){let T=0,F=0,m=this.pointerWidth(),d=this.pointerHeight(),S=this.pointerDirection(),A=this.width(),M=this.height();return S===h?(F-=d,M+=d):S===f?M+=d:S===b?(T-=m*1.5,A+=m):S===g&&(A+=m*1.5),{x:T,y:F,width:A,height:M}}}return Mn.Tag=y,y.prototype.className="Tag",(0,l._registerNode)(y),t.Factory.addGetterSetter(y,"pointerDirection",c),t.Factory.addGetterSetter(y,"pointerWidth",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(y,"pointerHeight",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(y,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),Mn}var Cr={},Pl;function ou(){if(Pl)return Cr;Pl=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.Rect=void 0;const t=Yt(),e=we(),i=zt(),s=ue(),l=$t();let o=class extends e.Shape{_sceneFunc(c){const h=this.cornerRadius(),g=this.width(),f=this.height();c.beginPath(),h?s.Util.drawRoundedRectPath(c,g,f,h):c.rect(0,0,g,f),c.closePath(),c.fillStrokeShape(this)}};return Cr.Rect=o,o.prototype.className="Rect",(0,i._registerNode)(o),t.Factory.addGetterSetter(o,"cornerRadius",0,(0,l.getNumberOrArrayOfNumbersValidator)(4)),Cr}var Pr={},Tl;function yd(){if(Tl)return Pr;Tl=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.RegularPolygon=void 0;const t=Yt(),e=we(),i=$t(),s=zt();let l=class extends e.Shape{_sceneFunc(a){const c=this._getPoints();a.beginPath(),a.moveTo(c[0].x,c[0].y);for(let h=1;h<c.length;h++)a.lineTo(c[h].x,c[h].y);a.closePath(),a.fillStrokeShape(this)}_getPoints(){const a=this.attrs.sides,c=this.attrs.radius||0,h=[];for(let g=0;g<a;g++)h.push({x:c*Math.sin(g*2*Math.PI/a),y:-1*c*Math.cos(g*2*Math.PI/a)});return h}getSelfRect(){const a=this._getPoints();let c=a[0].x,h=a[0].y,g=a[0].x,f=a[0].y;return a.forEach(b=>{c=Math.min(c,b.x),h=Math.max(h,b.x),g=Math.min(g,b.y),f=Math.max(f,b.y)}),{x:c,y:g,width:h-c,height:f-g}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return Pr.RegularPolygon=l,l.prototype.className="RegularPolygon",l.prototype._centroid=!0,l.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(l),t.Factory.addGetterSetter(l,"radius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(l,"sides",0,(0,i.getNumberValidator)()),Pr}var Tr={},El;function vd(){if(El)return Tr;El=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.Ring=void 0;const t=Yt(),e=we(),i=$t(),s=zt(),l=Math.PI*2;let o=class extends e.Shape{_sceneFunc(c){c.beginPath(),c.arc(0,0,this.innerRadius(),0,l,!1),c.moveTo(this.outerRadius(),0),c.arc(0,0,this.outerRadius(),l,0,!0),c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(c){this.outerRadius(c/2)}setHeight(c){this.outerRadius(c/2)}};return Tr.Ring=o,o.prototype.className="Ring",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(o),t.Factory.addGetterSetter(o,"innerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(o,"outerRadius",0,(0,i.getNumberValidator)()),Tr}var Er={},Al;function _d(){if(Al)return Er;Al=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.Sprite=void 0;const t=Yt(),e=we(),i=Wo(),s=$t(),l=zt();let o=class extends e.Shape{constructor(c){super(c),this._updated=!0,this.anim=new i.Animation(()=>{const h=this._updated;return this._updated=!1,h}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(c){const h=this.animation(),g=this.frameIndex(),f=g*4,b=this.animations()[h],x=this.frameOffsets(),v=b[f+0],y=b[f+1],w=b[f+2],T=b[f+3],F=this.image();if((this.hasFill()||this.hasStroke())&&(c.beginPath(),c.rect(0,0,w,T),c.closePath(),c.fillStrokeShape(this)),F)if(x){const m=x[h],d=g*2;c.drawImage(F,v,y,w,T,m[d+0],m[d+1],w,T)}else c.drawImage(F,v,y,w,T,0,0,w,T)}_hitFunc(c){const h=this.animation(),g=this.frameIndex(),f=g*4,b=this.animations()[h],x=this.frameOffsets(),v=b[f+2],y=b[f+3];if(c.beginPath(),x){const w=x[h],T=g*2;c.rect(w[T+0],w[T+1],v,y)}else c.rect(0,0,v,y);c.closePath(),c.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const c=this;this.interval=setInterval(function(){c._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const c=this.getLayer();this.anim.setLayers(c),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const c=this.frameIndex(),h=this.animation(),g=this.animations(),f=g[h],b=f.length/4;c<b-1?this.frameIndex(c+1):this.frameIndex(0)}};return Er.Sprite=o,o.prototype.className="Sprite",(0,l._registerNode)(o),t.Factory.addGetterSetter(o,"animation"),t.Factory.addGetterSetter(o,"animations"),t.Factory.addGetterSetter(o,"frameOffsets"),t.Factory.addGetterSetter(o,"image"),t.Factory.addGetterSetter(o,"frameIndex",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(o,"frameRate",17,(0,s.getNumberValidator)()),t.Factory.backCompat(o,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Er}var Ar={},Rl;function bd(){if(Rl)return Ar;Rl=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.Star=void 0;const t=Yt(),e=we(),i=$t(),s=zt();let l=class extends e.Shape{_sceneFunc(a){const c=this.innerRadius(),h=this.outerRadius(),g=this.numPoints();a.beginPath(),a.moveTo(0,0-h);for(let f=1;f<g*2;f++){const b=f%2===0?h:c,x=b*Math.sin(f*Math.PI/g),v=-1*b*Math.cos(f*Math.PI/g);a.lineTo(x,v)}a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return Ar.Star=l,l.prototype.className="Star",l.prototype._centroid=!0,l.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(l),t.Factory.addGetterSetter(l,"numPoints",5,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(l,"innerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(l,"outerRadius",0,(0,i.getNumberValidator)()),Ar}var Wn={},kl;function au(){if(kl)return Wn;kl=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.Text=void 0,Wn.stringToArray=a;const t=ue(),e=Yt(),i=we(),s=zt(),l=$t(),o=zt();function a(_t){return[..._t].reduce((ut,mt,At,Rt)=>{if(new RegExp("\\p{Emoji}","u").test(mt)){const H=Rt[At+1];H&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(H)?(ut.push(mt+H),Rt[At+1]=""):ut.push(mt)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(mt+(Rt[At+1]||""))?ut.push(mt+Rt[At+1]):At>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(mt)?ut[ut.length-1]+=mt:mt&&ut.push(mt);return ut},[])}const c="auto",h="center",g="inherit",f="justify",b="Change.konva",x="2d",v="-",y="left",w="text",T="Text",F="top",m="bottom",d="middle",S="normal",A="px ",M=" ",j="right",D="rtl",I="word",O="char",k="none",K="…",p=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],E=p.length;function P(_t){return _t.split(",").map(ut=>{ut=ut.trim();const mt=ut.indexOf(" ")>=0,At=ut.indexOf('"')>=0||ut.indexOf("'")>=0;return mt&&!At&&(ut=`"${ut}"`),ut}).join(", ")}let N;function B(){return N||(N=t.Util.createCanvasElement().getContext(x),N)}function W(_t){_t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function it(_t){_t.setAttr("miterLimit",2),_t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function et(_t){return _t=_t||{},!_t.fillLinearGradientColorStops&&!_t.fillRadialGradientColorStops&&!_t.fillPatternImage&&(_t.fill=_t.fill||"black"),_t}let ht=class extends i.Shape{constructor(ut){super(et(ut)),this._partialTextX=0,this._partialTextY=0;for(let mt=0;mt<E;mt++)this.on(p[mt]+b,this._setTextData);this._setTextData()}_sceneFunc(ut){const mt=this.textArr,At=mt.length;if(!this.text())return;let Rt=this.padding(),H=this.fontSize(),ct=this.lineHeight()*H,st=this.verticalAlign(),St=this.direction(),Mt=0,G=this.align(),q=this.getWidth(),nt=this.letterSpacing(),lt=this.fill(),gt=this.textDecoration(),ft=gt.indexOf("underline")!==-1,yt=gt.indexOf("line-through")!==-1,Ct;St=St===g?ut.direction:St;let vt=ct/2,pt=d;if(s.Konva._fixTextRendering){const ne=this.measureSize("M");pt="alphabetic",vt=(ne.fontBoundingBoxAscent-ne.fontBoundingBoxDescent)/2+ct/2}var Ot=0,xt=0;for(St===D&&ut.setAttr("direction",St),ut.setAttr("font",this._getContextFont()),ut.setAttr("textBaseline",pt),ut.setAttr("textAlign",y),st===d?Mt=(this.getHeight()-At*ct-Rt*2)/2:st===m&&(Mt=this.getHeight()-At*ct-Rt*2),ut.translate(Rt,Mt+Rt),Ct=0;Ct<At;Ct++){var Ot=0,xt=0,Nt=mt[Ct],Gt=Nt.text,Lt=Nt.width,Bt=Nt.lastInParagraph,Ut,ee;if(ut.save(),G===j?Ot+=q-Lt-Rt*2:G===h&&(Ot+=(q-Lt-Rt*2)/2),ft){ut.save(),ut.beginPath();const Jt=s.Konva._fixTextRendering?Math.round(H/4):Math.round(H/2),ce=Ot,ye=vt+xt+Jt;ut.moveTo(ce,ye),Ut=Gt.split(" ").length-1,ee=G===f&&!Bt?q-Rt*2:Lt,ut.lineTo(ce+Math.round(ee),ye),ut.lineWidth=H/15;const re=this._getLinearGradient();ut.strokeStyle=re||lt,ut.stroke(),ut.restore()}if(yt){ut.save(),ut.beginPath();const Jt=s.Konva._fixTextRendering?-Math.round(H/4):0;ut.moveTo(Ot,vt+xt+Jt),Ut=Gt.split(" ").length-1,ee=G===f&&!Bt?q-Rt*2:Lt,ut.lineTo(Ot+Math.round(ee),vt+xt+Jt),ut.lineWidth=H/15;const ce=this._getLinearGradient();ut.strokeStyle=ce||lt,ut.stroke(),ut.restore()}if(St!==D&&(nt!==0||G===f)){Ut=Gt.split(" ").length-1;const Jt=a(Gt);for(let ce=0;ce<Jt.length;ce++){const ye=Jt[ce];ye===" "&&!Bt&&G===f&&(Ot+=(q-Rt*2-Lt)/Ut),this._partialTextX=Ot,this._partialTextY=vt+xt,this._partialText=ye,ut.fillStrokeShape(this),Ot+=this.measureSize(ye).width+nt}}else nt!==0&&ut.setAttr("letterSpacing",`${nt}px`),this._partialTextX=Ot,this._partialTextY=vt+xt,this._partialText=Gt,ut.fillStrokeShape(this);ut.restore(),At>1&&(vt+=ct)}}_hitFunc(ut){const mt=this.getWidth(),At=this.getHeight();ut.beginPath(),ut.rect(0,0,mt,At),ut.closePath(),ut.fillStrokeShape(this)}setText(ut){const mt=t.Util._isString(ut)?ut:ut==null?"":ut+"";return this._setAttr(w,mt),this}getWidth(){return this.attrs.width===c||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===c||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(ut){var mt,At,Rt,H,ct,st,St,Mt,G,q,nt;let lt=B(),gt=this.fontSize(),ft;lt.save(),lt.font=this._getContextFont(),ft=lt.measureText(ut),lt.restore();const yt=gt/100;return{actualBoundingBoxAscent:(mt=ft.actualBoundingBoxAscent)!==null&&mt!==void 0?mt:71.58203125*yt,actualBoundingBoxDescent:(At=ft.actualBoundingBoxDescent)!==null&&At!==void 0?At:0,actualBoundingBoxLeft:(Rt=ft.actualBoundingBoxLeft)!==null&&Rt!==void 0?Rt:-7.421875*yt,actualBoundingBoxRight:(H=ft.actualBoundingBoxRight)!==null&&H!==void 0?H:75.732421875*yt,alphabeticBaseline:(ct=ft.alphabeticBaseline)!==null&&ct!==void 0?ct:0,emHeightAscent:(st=ft.emHeightAscent)!==null&&st!==void 0?st:100*yt,emHeightDescent:(St=ft.emHeightDescent)!==null&&St!==void 0?St:-20*yt,fontBoundingBoxAscent:(Mt=ft.fontBoundingBoxAscent)!==null&&Mt!==void 0?Mt:91*yt,fontBoundingBoxDescent:(G=ft.fontBoundingBoxDescent)!==null&&G!==void 0?G:21*yt,hangingBaseline:(q=ft.hangingBaseline)!==null&&q!==void 0?q:72.80000305175781*yt,ideographicBaseline:(nt=ft.ideographicBaseline)!==null&&nt!==void 0?nt:-21*yt,width:ft.width,height:gt}}_getContextFont(){return this.fontStyle()+M+this.fontVariant()+M+(this.fontSize()+A)+P(this.fontFamily())}_addTextLine(ut){this.align()===f&&(ut=ut.trim());const At=this._getTextWidth(ut);return this.textArr.push({text:ut,width:At,lastInParagraph:!1})}_getTextWidth(ut){const mt=this.letterSpacing(),At=ut.length;return B().measureText(ut).width+mt*At}_setTextData(){let ut=this.text().split(`
`),mt=+this.fontSize(),At=0,Rt=this.lineHeight()*mt,H=this.attrs.width,ct=this.attrs.height,st=H!==c&&H!==void 0,St=ct!==c&&ct!==void 0,Mt=this.padding(),G=H-Mt*2,q=ct-Mt*2,nt=0,lt=this.wrap(),gt=lt!==k,ft=lt!==O&&gt,yt=this.ellipsis();this.textArr=[],B().font=this._getContextFont();const Ct=yt?this._getTextWidth(K):0;for(let vt=0,pt=ut.length;vt<pt;++vt){let Ot=ut[vt],xt=this._getTextWidth(Ot);if(st&&xt>G)for(;Ot.length>0;){let Nt=0,Gt=a(Ot).length,Lt="",Bt=0;for(;Nt<Gt;){const Ut=Nt+Gt>>>1,ee=a(Ot),ne=ee.slice(0,Ut+1).join(""),ae=this._getTextWidth(ne);(yt&&St&&nt+Rt>q?ae+Ct:ae)<=G?(Nt=Ut+1,Lt=ne,Bt=ae):Gt=Ut}if(Lt){if(ft){const ne=a(Ot),ae=a(Lt),Jt=ne[ae.length],ce=Jt===M||Jt===v;let ye;if(ce&&Bt<=G)ye=ae.length;else{const re=ae.lastIndexOf(M),It=ae.lastIndexOf(v);ye=Math.max(re,It)+1}ye>0&&(Nt=ye,Lt=ne.slice(0,Nt).join(""),Bt=this._getTextWidth(Lt))}if(Lt=Lt.trimRight(),this._addTextLine(Lt),At=Math.max(At,Bt),nt+=Rt,this._shouldHandleEllipsis(nt)){this._tryToAddEllipsisToLastLine();break}if(Ot=a(Ot).slice(Nt).join("").trimLeft(),Ot.length>0&&(xt=this._getTextWidth(Ot),xt<=G)){this._addTextLine(Ot),nt+=Rt,At=Math.max(At,xt);break}}else break}else this._addTextLine(Ot),nt+=Rt,At=Math.max(At,xt),this._shouldHandleEllipsis(nt)&&vt<pt-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),St&&nt+Rt>q)break}this.textHeight=mt,this.textWidth=At}_shouldHandleEllipsis(ut){const mt=+this.fontSize(),At=this.lineHeight()*mt,Rt=this.attrs.height,H=Rt!==c&&Rt!==void 0,ct=this.padding(),st=Rt-ct*2;return!(this.wrap()!==k)||H&&ut+At>st}_tryToAddEllipsisToLastLine(){const ut=this.attrs.width,mt=ut!==c&&ut!==void 0,At=this.padding(),Rt=ut-At*2,H=this.ellipsis(),ct=this.textArr[this.textArr.length-1];!ct||!H||(mt&&(this._getTextWidth(ct.text+K)<Rt||(ct.text=ct.text.slice(0,ct.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(ct.text+K))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const ut=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,mt=this.hasShadow();return ut&&mt?!0:super._useBufferCanvas()}};return Wn.Text=ht,ht.prototype._fillFunc=W,ht.prototype._strokeFunc=it,ht.prototype.className=T,ht.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,o._registerNode)(ht),e.Factory.overWriteSetter(ht,"width",(0,l.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(ht,"height",(0,l.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(ht,"direction",g),e.Factory.addGetterSetter(ht,"fontFamily","Arial"),e.Factory.addGetterSetter(ht,"fontSize",12,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(ht,"fontStyle",S),e.Factory.addGetterSetter(ht,"fontVariant",S),e.Factory.addGetterSetter(ht,"padding",0,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(ht,"align",y),e.Factory.addGetterSetter(ht,"verticalAlign",F),e.Factory.addGetterSetter(ht,"lineHeight",1,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(ht,"wrap",I),e.Factory.addGetterSetter(ht,"ellipsis",!1,(0,l.getBooleanValidator)()),e.Factory.addGetterSetter(ht,"letterSpacing",0,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(ht,"text","",(0,l.getStringValidator)()),e.Factory.addGetterSetter(ht,"textDecoration",""),Wn}var Rr={},Ol;function wd(){if(Ol)return Rr;Ol=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.TextPath=void 0;const t=ue(),e=Yt(),i=we(),s=zo(),l=au(),o=$t(),a=zt(),c="",h="normal";function g(x){x.fillText(this.partialText,0,0)}function f(x){x.strokeText(this.partialText,0,0)}let b=class extends i.Shape{constructor(v){super(v),this.dummyCanvas=t.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return s.Path.getPathLength(this.dataArray)}_getPointAtLength(v){if(!this.attrs.data)return null;const y=this.pathLength;return v-1>y?null:s.Path.getPointAtLengthOfDataArray(v,this.dataArray)}_readDataAttribute(){this.dataArray=s.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(v){v.setAttr("font",this._getContextFont()),v.setAttr("textBaseline",this.textBaseline()),v.setAttr("textAlign","left"),v.save();const y=this.textDecoration(),w=this.fill(),T=this.fontSize(),F=this.glyphInfo;y==="underline"&&v.beginPath();for(let m=0;m<F.length;m++){v.save();const d=F[m].p0;v.translate(d.x,d.y),v.rotate(F[m].rotation),this.partialText=F[m].text,v.fillStrokeShape(this),y==="underline"&&(m===0&&v.moveTo(0,T/2+1),v.lineTo(T,T/2+1)),v.restore()}y==="underline"&&(v.strokeStyle=w,v.lineWidth=T/20,v.stroke()),v.restore()}_hitFunc(v){v.beginPath();const y=this.glyphInfo;if(y.length>=1){const w=y[0].p0;v.moveTo(w.x,w.y)}for(let w=0;w<y.length;w++){const T=y[w].p1;v.lineTo(T.x,T.y)}v.setAttr("lineWidth",this.fontSize()),v.setAttr("strokeStyle",this.colorKey),v.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(v){return l.Text.prototype.setText.call(this,v)}_getContextFont(){return l.Text.prototype._getContextFont.call(this)}_getTextSize(v){const w=this.dummyCanvas.getContext("2d");w.save(),w.font=this._getContextFont();const T=w.measureText(v);return w.restore(),{width:T.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:v,height:y}=this._getTextSize(this.attrs.text);if(this.textWidth=v,this.textHeight=y,this.glyphInfo=[],!this.attrs.data)return null;const w=this.letterSpacing(),T=this.align(),F=this.kerningFunc(),m=Math.max(this.textWidth+((this.attrs.text||"").length-1)*w,0);let d=0;T==="center"&&(d=Math.max(0,this.pathLength/2-m/2)),T==="right"&&(d=Math.max(0,this.pathLength-m));const S=(0,l.stringToArray)(this.text());let A=d;for(let M=0;M<S.length;M++){const j=this._getPointAtLength(A);if(!j)return;let D=this._getTextSize(S[M]).width+w;if(S[M]===" "&&T==="justify"){const E=this.text().split(" ").length-1;D+=(this.pathLength-m)/E}const I=this._getPointAtLength(A+D);if(!I)return;const O=s.Path.getLineLength(j.x,j.y,I.x,I.y);let k=0;if(F)try{k=F(S[M-1],S[M])*this.fontSize()}catch{k=0}j.x+=k,I.x+=k,this.textWidth+=k;const K=s.Path.getPointOnLine(k+O/2,j.x,j.y,I.x,I.y),p=Math.atan2(I.y-j.y,I.x-j.x);this.glyphInfo.push({transposeX:K.x,transposeY:K.y,text:S[M],rotation:p,p0:j,p1:I}),A+=D}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const v=[];this.glyphInfo.forEach(function(A){v.push(A.p0.x),v.push(A.p0.y),v.push(A.p1.x),v.push(A.p1.y)});let y=v[0]||0,w=v[0]||0,T=v[1]||0,F=v[1]||0,m,d;for(let A=0;A<v.length/2;A++)m=v[A*2],d=v[A*2+1],y=Math.min(y,m),w=Math.max(w,m),T=Math.min(T,d),F=Math.max(F,d);const S=this.fontSize();return{x:y-S/2,y:T-S/2,width:w-y+S,height:F-T+S}}destroy(){return t.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Rr.TextPath=b,b.prototype._fillFunc=g,b.prototype._strokeFunc=f,b.prototype._fillFuncHit=g,b.prototype._strokeFuncHit=f,b.prototype.className="TextPath",b.prototype._attrsAffectingSize=["text","fontSize","data"],(0,a._registerNode)(b),e.Factory.addGetterSetter(b,"data"),e.Factory.addGetterSetter(b,"fontFamily","Arial"),e.Factory.addGetterSetter(b,"fontSize",12,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(b,"fontStyle",h),e.Factory.addGetterSetter(b,"align","left"),e.Factory.addGetterSetter(b,"letterSpacing",0,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(b,"textBaseline","middle"),e.Factory.addGetterSetter(b,"fontVariant",h),e.Factory.addGetterSetter(b,"text",c),e.Factory.addGetterSetter(b,"textDecoration",""),e.Factory.addGetterSetter(b,"kerningFunc",void 0),Rr}var kr={},Fl;function Sd(){if(Fl)return kr;Fl=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.Transformer=void 0;const t=ue(),e=Yt(),i=de(),s=we(),l=ou(),o=Ho(),a=zt(),c=$t(),h=zt(),g="tr-konva",f=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(D=>D+`.${g}`).join(" "),b="nodesRect",x=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],v={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},y="ontouchstart"in a.Konva._global;function w(D,I,O){if(D==="rotater")return O;I+=t.Util.degToRad(v[D]||0);const k=(t.Util.radToDeg(I)%360+360)%360;return t.Util._inRange(k,315+22.5,360)||t.Util._inRange(k,0,22.5)?"ns-resize":t.Util._inRange(k,45-22.5,45+22.5)?"nesw-resize":t.Util._inRange(k,90-22.5,90+22.5)?"ew-resize":t.Util._inRange(k,135-22.5,135+22.5)?"nwse-resize":t.Util._inRange(k,180-22.5,180+22.5)?"ns-resize":t.Util._inRange(k,225-22.5,225+22.5)?"nesw-resize":t.Util._inRange(k,270-22.5,270+22.5)?"ew-resize":t.Util._inRange(k,315-22.5,315+22.5)?"nwse-resize":(t.Util.error("Transformer has unknown angle for cursor detection: "+k),"pointer")}const T=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function F(D){return{x:D.x+D.width/2*Math.cos(D.rotation)+D.height/2*Math.sin(-D.rotation),y:D.y+D.height/2*Math.cos(D.rotation)+D.width/2*Math.sin(D.rotation)}}function m(D,I,O){const k=O.x+(D.x-O.x)*Math.cos(I)-(D.y-O.y)*Math.sin(I),K=O.y+(D.x-O.x)*Math.sin(I)+(D.y-O.y)*Math.cos(I);return{...D,rotation:D.rotation+I,x:k,y:K}}function d(D,I){const O=F(D);return m(D,I,O)}function S(D,I,O){let k=I;for(let K=0;K<D.length;K++){const p=a.Konva.getAngle(D[K]),E=Math.abs(p-I)%(Math.PI*2);Math.min(E,Math.PI*2-E)<O&&(k=p)}return k}let A=0,M=class extends o.Group{constructor(I){super(I),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(f,this.update),this.getNode()&&this.update()}attachTo(I){return this.setNode(I),this}setNode(I){return t.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([I])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return g+this._id}setNodes(I=[]){this._nodes&&this._nodes.length&&this.detach();const O=I.filter(K=>K.isAncestorOf(this)?(t.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=I=O,I.length===1&&this.useSingleNodeRotation()?this.rotation(I[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(K=>{const p=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(K._attrsAffectingSize.length){const E=K._attrsAffectingSize.map(P=>P+"Change."+this._getEventNamespace()).join(" ");K.on(E,p)}K.on(x.map(E=>E+`.${this._getEventNamespace()}`).join(" "),p),K.on(`absoluteTransformChange.${this._getEventNamespace()}`,p),this._proxyDrag(K)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(I){let O;I.on(`dragstart.${this._getEventNamespace()}`,k=>{O=I.getAbsolutePosition(),!this.isDragging()&&I!==this.findOne(".back")&&this.startDrag(k,!1)}),I.on(`dragmove.${this._getEventNamespace()}`,k=>{if(!O)return;const K=I.getAbsolutePosition(),p=K.x-O.x,E=K.y-O.y;this.nodes().forEach(P=>{if(P===I||P.isDragging())return;const N=P.getAbsolutePosition();P.setAbsolutePosition({x:N.x+p,y:N.y+E}),P.startDrag(k)}),O=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(I=>{I.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(b),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(b,this.__getNodeRect)}__getNodeShape(I,O=this.rotation(),k){const K=I.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),p=I.getAbsoluteScale(k),E=I.getAbsolutePosition(k),P=K.x*p.x-I.offsetX()*p.x,N=K.y*p.y-I.offsetY()*p.y,B=(a.Konva.getAngle(I.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),W={x:E.x+P*Math.cos(B)+N*Math.sin(-B),y:E.y+N*Math.cos(B)+P*Math.sin(B),width:K.width*p.x,height:K.height*p.y,rotation:B};return m(W,-a.Konva.getAngle(O),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const O=[];this.nodes().map(B=>{const W=B.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),it=[{x:W.x,y:W.y},{x:W.x+W.width,y:W.y},{x:W.x+W.width,y:W.y+W.height},{x:W.x,y:W.y+W.height}],et=B.getAbsoluteTransform();it.forEach(function(ht){const _t=et.point(ht);O.push(_t)})});const k=new t.Transform;k.rotate(-a.Konva.getAngle(this.rotation()));let K=1/0,p=1/0,E=-1/0,P=-1/0;O.forEach(function(B){const W=k.point(B);K===void 0&&(K=E=W.x,p=P=W.y),K=Math.min(K,W.x),p=Math.min(p,W.y),E=Math.max(E,W.x),P=Math.max(P,W.y)}),k.invert();const N=k.point({x:K,y:p});return{x:N.x,y:N.y,width:E-K,height:P-p,rotation:a.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),T.forEach(I=>{this._createAnchor(I)}),this._createAnchor("rotater")}_createAnchor(I){const O=new l.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:I+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:y?10:"auto"}),k=this;O.on("mousedown touchstart",function(K){k._handleMouseDown(K)}),O.on("dragstart",K=>{O.stopDrag(),K.cancelBubble=!0}),O.on("dragend",K=>{K.cancelBubble=!0}),O.on("mouseenter",()=>{const K=a.Konva.getAngle(this.rotation()),p=this.rotateAnchorCursor(),E=w(I,K,p);O.getStage().content&&(O.getStage().content.style.cursor=E),this._cursorChange=!0}),O.on("mouseout",()=>{O.getStage().content&&(O.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(O)}_createBack(){const I=new s.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(O,k){const K=k.getParent(),p=K.padding();O.beginPath(),O.rect(-p,-p,k.width()+p*2,k.height()+p*2),O.moveTo(k.width()/2,-p),K.rotateEnabled()&&K.rotateLineVisible()&&O.lineTo(k.width()/2,-K.rotateAnchorOffset()*t.Util._sign(k.height())-p),O.fillStrokeShape(k)},hitFunc:(O,k)=>{if(!this.shouldOverdrawWholeArea())return;const K=this.padding();O.beginPath(),O.rect(-K,-K,k.width()+K*2,k.height()+K*2),O.fillStrokeShape(k)}});this.add(I),this._proxyDrag(I),I.on("dragstart",O=>{O.cancelBubble=!0}),I.on("dragmove",O=>{O.cancelBubble=!0}),I.on("dragend",O=>{O.cancelBubble=!0}),this.on("dragmove",O=>{this.update()})}_handleMouseDown(I){if(this._transforming)return;this._movingAnchorName=I.target.name().split(" ")[0];const O=this._getNodeRect(),k=O.width,K=O.height,p=Math.sqrt(Math.pow(k,2)+Math.pow(K,2));this.sin=Math.abs(K/p),this.cos=Math.abs(k/p),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const E=I.target.getAbsolutePosition(),P=I.target.getStage().getPointerPosition();this._anchorDragOffset={x:P.x-E.x,y:P.y-E.y},A++,this._fire("transformstart",{evt:I.evt,target:this.getNode()}),this._nodes.forEach(N=>{N._fire("transformstart",{evt:I.evt,target:N})})}_handleMouseMove(I){let O,k,K;const p=this.findOne("."+this._movingAnchorName),E=p.getStage();E.setPointersPositions(I);const P=E.getPointerPosition();let N={x:P.x-this._anchorDragOffset.x,y:P.y-this._anchorDragOffset.y};const B=p.getAbsolutePosition();this.anchorDragBoundFunc()&&(N=this.anchorDragBoundFunc()(B,N,I)),p.setAbsolutePosition(N);const W=p.getAbsolutePosition();if(B.x===W.x&&B.y===W.y)return;if(this._movingAnchorName==="rotater"){const st=this._getNodeRect();O=p.x()-st.width/2,k=-p.y()+st.height/2;let St=Math.atan2(-k,O)+Math.PI/2;st.height<0&&(St-=Math.PI);const G=a.Konva.getAngle(this.rotation())+St,q=a.Konva.getAngle(this.rotationSnapTolerance()),lt=S(this.rotationSnaps(),G,q)-st.rotation,gt=d(st,lt);this._fitNodesInto(gt,I);return}const it=this.shiftBehavior();let et;it==="inverted"?et=this.keepRatio()&&!I.shiftKey:it==="none"?et=this.keepRatio():et=this.keepRatio()||I.shiftKey;var At=this.centeredScaling()||I.altKey;if(this._movingAnchorName==="top-left"){if(et){var ht=At?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};K=Math.sqrt(Math.pow(ht.x-p.x(),2)+Math.pow(ht.y-p.y(),2));var _t=this.findOne(".top-left").x()>ht.x?-1:1,ut=this.findOne(".top-left").y()>ht.y?-1:1;O=K*this.cos*_t,k=K*this.sin*ut,this.findOne(".top-left").x(ht.x-O),this.findOne(".top-left").y(ht.y-k)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(p.y());else if(this._movingAnchorName==="top-right"){if(et){var ht=At?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};K=Math.sqrt(Math.pow(p.x()-ht.x,2)+Math.pow(ht.y-p.y(),2));var _t=this.findOne(".top-right").x()<ht.x?-1:1,ut=this.findOne(".top-right").y()>ht.y?-1:1;O=K*this.cos*_t,k=K*this.sin*ut,this.findOne(".top-right").x(ht.x+O),this.findOne(".top-right").y(ht.y-k)}var mt=p.position();this.findOne(".top-left").y(mt.y),this.findOne(".bottom-right").x(mt.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(p.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(p.x());else if(this._movingAnchorName==="bottom-left"){if(et){var ht=At?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};K=Math.sqrt(Math.pow(ht.x-p.x(),2)+Math.pow(p.y()-ht.y,2));var _t=ht.x<p.x()?-1:1,ut=p.y()<ht.y?-1:1;O=K*this.cos*_t,k=K*this.sin*ut,p.x(ht.x-O),p.y(ht.y+k)}mt=p.position(),this.findOne(".top-left").x(mt.x),this.findOne(".bottom-right").y(mt.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(p.y());else if(this._movingAnchorName==="bottom-right"){if(et){var ht=At?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};K=Math.sqrt(Math.pow(p.x()-ht.x,2)+Math.pow(p.y()-ht.y,2));var _t=this.findOne(".bottom-right").x()<ht.x?-1:1,ut=this.findOne(".bottom-right").y()<ht.y?-1:1;O=K*this.cos*_t,k=K*this.sin*ut,this.findOne(".bottom-right").x(ht.x+O),this.findOne(".bottom-right").y(ht.y+k)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var At=this.centeredScaling()||I.altKey;if(At){const st=this.findOne(".top-left"),St=this.findOne(".bottom-right"),Mt=st.x(),G=st.y(),q=this.getWidth()-St.x(),nt=this.getHeight()-St.y();St.move({x:-Mt,y:-G}),st.move({x:q,y:nt})}const Rt=this.findOne(".top-left").getAbsolutePosition();O=Rt.x,k=Rt.y;const H=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),ct=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:O,y:k,width:H,height:ct,rotation:a.Konva.getAngle(this.rotation())},I)}_handleMouseUp(I){this._removeEvents(I)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(I){var O;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const k=this.getNode();A--,this._fire("transformend",{evt:I,target:k}),(O=this.getLayer())===null||O===void 0||O.batchDraw(),k&&this._nodes.forEach(K=>{var p;K._fire("transformend",{evt:I,target:K}),(p=K.getLayer())===null||p===void 0||p.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(I,O){const k=this._getNodeRect(),K=1;if(t.Util._inRange(I.width,-this.padding()*2-K,K)){this.update();return}if(t.Util._inRange(I.height,-this.padding()*2-K,K)){this.update();return}const p=new t.Transform;if(p.rotate(a.Konva.getAngle(this.rotation())),this._movingAnchorName&&I.width<0&&this._movingAnchorName.indexOf("left")>=0){const et=p.point({x:-this.padding()*2,y:0});I.x+=et.x,I.y+=et.y,I.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=et.x,this._anchorDragOffset.y-=et.y}else if(this._movingAnchorName&&I.width<0&&this._movingAnchorName.indexOf("right")>=0){const et=p.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=et.x,this._anchorDragOffset.y-=et.y,I.width+=this.padding()*2}if(this._movingAnchorName&&I.height<0&&this._movingAnchorName.indexOf("top")>=0){const et=p.point({x:0,y:-this.padding()*2});I.x+=et.x,I.y+=et.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=et.x,this._anchorDragOffset.y-=et.y,I.height+=this.padding()*2}else if(this._movingAnchorName&&I.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const et=p.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=et.x,this._anchorDragOffset.y-=et.y,I.height+=this.padding()*2}if(this.boundBoxFunc()){const et=this.boundBoxFunc()(k,I);et?I=et:t.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const E=1e7,P=new t.Transform;P.translate(k.x,k.y),P.rotate(k.rotation),P.scale(k.width/E,k.height/E);const N=new t.Transform,B=I.width/E,W=I.height/E;this.flipEnabled()===!1?(N.translate(I.x,I.y),N.rotate(I.rotation),N.translate(I.width<0?I.width:0,I.height<0?I.height:0),N.scale(Math.abs(B),Math.abs(W))):(N.translate(I.x,I.y),N.rotate(I.rotation),N.scale(B,W));const it=N.multiply(P.invert());this._nodes.forEach(et=>{var ht;const _t=et.getParent().getAbsoluteTransform(),ut=et.getTransform().copy();ut.translate(et.offsetX(),et.offsetY());const mt=new t.Transform;mt.multiply(_t.copy().invert()).multiply(it).multiply(_t).multiply(ut);const At=mt.decompose();et.setAttrs(At),(ht=et.getLayer())===null||ht===void 0||ht.batchDraw()}),this.rotation(t.Util._getRotation(I.rotation)),this._nodes.forEach(et=>{this._fire("transform",{evt:O,target:et}),et._fire("transform",{evt:O,target:et})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(I,O){this.findOne(I).setAttrs(O)}update(){var I;const O=this._getNodeRect();this.rotation(t.Util._getRotation(O.rotation));const k=O.width,K=O.height,p=this.enabledAnchors(),E=this.resizeEnabled(),P=this.padding(),N=this.anchorSize(),B=this.find("._anchor");B.forEach(it=>{it.setAttrs({width:N,height:N,offsetX:N/2,offsetY:N/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:N/2+P,offsetY:N/2+P,visible:E&&p.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:k/2,y:0,offsetY:N/2+P,visible:E&&p.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:k,y:0,offsetX:N/2-P,offsetY:N/2+P,visible:E&&p.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:K/2,offsetX:N/2+P,visible:E&&p.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:k,y:K/2,offsetX:N/2-P,visible:E&&p.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:K,offsetX:N/2+P,offsetY:N/2-P,visible:E&&p.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:k/2,y:K,offsetY:N/2-P,visible:E&&p.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:k,y:K,offsetX:N/2-P,offsetY:N/2-P,visible:E&&p.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:k/2,y:-this.rotateAnchorOffset()*t.Util._sign(K)-P,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:k,height:K,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const W=this.anchorStyleFunc();W&&B.forEach(it=>{W(it)}),(I=this.getLayer())===null||I===void 0||I.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const I=this.findOne("."+this._movingAnchorName);I&&I.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),o.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return i.Node.prototype.toObject.call(this)}clone(I){return i.Node.prototype.clone.call(this,I)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};kr.Transformer=M,M.isTransforming=()=>A>0;function j(D){return D instanceof Array||t.Util.warn("enabledAnchors value should be an array"),D instanceof Array&&D.forEach(function(I){T.indexOf(I)===-1&&t.Util.warn("Unknown anchor name: "+I+". Available names are: "+T.join(", "))}),D||[]}return M.prototype.className="Transformer",(0,h._registerNode)(M),e.Factory.addGetterSetter(M,"enabledAnchors",T,j),e.Factory.addGetterSetter(M,"flipEnabled",!0,(0,c.getBooleanValidator)()),e.Factory.addGetterSetter(M,"resizeEnabled",!0),e.Factory.addGetterSetter(M,"anchorSize",10,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(M,"rotateEnabled",!0),e.Factory.addGetterSetter(M,"rotateLineVisible",!0),e.Factory.addGetterSetter(M,"rotationSnaps",[]),e.Factory.addGetterSetter(M,"rotateAnchorOffset",50,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(M,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(M,"rotationSnapTolerance",5,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(M,"borderEnabled",!0),e.Factory.addGetterSetter(M,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(M,"anchorStrokeWidth",1,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(M,"anchorFill","white"),e.Factory.addGetterSetter(M,"anchorCornerRadius",0,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(M,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(M,"borderStrokeWidth",1,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(M,"borderDash"),e.Factory.addGetterSetter(M,"keepRatio",!0),e.Factory.addGetterSetter(M,"shiftBehavior","default"),e.Factory.addGetterSetter(M,"centeredScaling",!1),e.Factory.addGetterSetter(M,"ignoreStroke",!1),e.Factory.addGetterSetter(M,"padding",0,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(M,"nodes"),e.Factory.addGetterSetter(M,"node"),e.Factory.addGetterSetter(M,"boundBoxFunc"),e.Factory.addGetterSetter(M,"anchorDragBoundFunc"),e.Factory.addGetterSetter(M,"anchorStyleFunc"),e.Factory.addGetterSetter(M,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(M,"useSingleNodeRotation",!0),e.Factory.backCompat(M,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),kr}var Or={},Ml;function xd(){if(Ml)return Or;Ml=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.Wedge=void 0;const t=Yt(),e=we(),i=zt(),s=$t(),l=zt();let o=class extends e.Shape{_sceneFunc(c){c.beginPath(),c.arc(0,0,this.radius(),0,i.Konva.getAngle(this.angle()),this.clockwise()),c.lineTo(0,0),c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(c){this.radius(c/2)}setHeight(c){this.radius(c/2)}};return Or.Wedge=o,o.prototype.className="Wedge",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["radius"],(0,l._registerNode)(o),t.Factory.addGetterSetter(o,"radius",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(o,"angle",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(o,"clockwise",!1),t.Factory.backCompat(o,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Or}var Fr={},Il;function Cd(){if(Il)return Fr;Il=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.Blur=void 0;const t=Yt(),e=de(),i=$t();function s(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const l=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function a(h,g){const f=h.data,b=h.width,x=h.height;let v,y,w,T,F,m,d,S,A,M,j,D,I,O,k,K,p,E,P,N,B,W,it,et;const ht=g+g+1,_t=b-1,ut=x-1,mt=g+1,At=mt*(mt+1)/2,Rt=new s,H=l[g],ct=o[g];let st=null,St=Rt,Mt=null,G=null;for(w=1;w<ht;w++)St=St.next=new s,w===mt&&(st=St);for(St.next=Rt,d=m=0,y=0;y<x;y++){for(K=p=E=P=S=A=M=j=0,D=mt*(N=f[m]),I=mt*(B=f[m+1]),O=mt*(W=f[m+2]),k=mt*(it=f[m+3]),S+=At*N,A+=At*B,M+=At*W,j+=At*it,St=Rt,w=0;w<mt;w++)St.r=N,St.g=B,St.b=W,St.a=it,St=St.next;for(w=1;w<mt;w++)T=m+((_t<w?_t:w)<<2),S+=(St.r=N=f[T])*(et=mt-w),A+=(St.g=B=f[T+1])*et,M+=(St.b=W=f[T+2])*et,j+=(St.a=it=f[T+3])*et,K+=N,p+=B,E+=W,P+=it,St=St.next;for(Mt=Rt,G=st,v=0;v<b;v++)f[m+3]=it=j*H>>ct,it!==0?(it=255/it,f[m]=(S*H>>ct)*it,f[m+1]=(A*H>>ct)*it,f[m+2]=(M*H>>ct)*it):f[m]=f[m+1]=f[m+2]=0,S-=D,A-=I,M-=O,j-=k,D-=Mt.r,I-=Mt.g,O-=Mt.b,k-=Mt.a,T=d+((T=v+g+1)<_t?T:_t)<<2,K+=Mt.r=f[T],p+=Mt.g=f[T+1],E+=Mt.b=f[T+2],P+=Mt.a=f[T+3],S+=K,A+=p,M+=E,j+=P,Mt=Mt.next,D+=N=G.r,I+=B=G.g,O+=W=G.b,k+=it=G.a,K-=N,p-=B,E-=W,P-=it,G=G.next,m+=4;d+=b}for(v=0;v<b;v++){for(p=E=P=K=A=M=j=S=0,m=v<<2,D=mt*(N=f[m]),I=mt*(B=f[m+1]),O=mt*(W=f[m+2]),k=mt*(it=f[m+3]),S+=At*N,A+=At*B,M+=At*W,j+=At*it,St=Rt,w=0;w<mt;w++)St.r=N,St.g=B,St.b=W,St.a=it,St=St.next;for(F=b,w=1;w<=g;w++)m=F+v<<2,S+=(St.r=N=f[m])*(et=mt-w),A+=(St.g=B=f[m+1])*et,M+=(St.b=W=f[m+2])*et,j+=(St.a=it=f[m+3])*et,K+=N,p+=B,E+=W,P+=it,St=St.next,w<ut&&(F+=b);for(m=v,Mt=Rt,G=st,y=0;y<x;y++)T=m<<2,f[T+3]=it=j*H>>ct,it>0?(it=255/it,f[T]=(S*H>>ct)*it,f[T+1]=(A*H>>ct)*it,f[T+2]=(M*H>>ct)*it):f[T]=f[T+1]=f[T+2]=0,S-=D,A-=I,M-=O,j-=k,D-=Mt.r,I-=Mt.g,O-=Mt.b,k-=Mt.a,T=v+((T=y+mt)<ut?T:ut)*b<<2,S+=K+=Mt.r=f[T],A+=p+=Mt.g=f[T+1],M+=E+=Mt.b=f[T+2],j+=P+=Mt.a=f[T+3],Mt=Mt.next,D+=N=G.r,I+=B=G.g,O+=W=G.b,k+=it=G.a,K-=N,p-=B,E-=W,P-=it,G=G.next,m+=b}}const c=function(g){const f=Math.round(this.blurRadius());f>0&&a(g,f)};return Fr.Blur=c,t.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Fr}var Mr={},Dl;function Pd(){if(Dl)return Mr;Dl=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.Brighten=void 0;const t=Yt(),e=de(),i=$t(),s=function(l){const o=this.brightness()*255,a=l.data,c=a.length;for(let h=0;h<c;h+=4)a[h]+=o,a[h+1]+=o,a[h+2]+=o};return Mr.Brighten=s,t.Factory.addGetterSetter(e.Node,"brightness",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Mr}var Ir={},Nl;function Td(){if(Nl)return Ir;Nl=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.Contrast=void 0;const t=Yt(),e=de(),i=$t(),s=function(l){const o=Math.pow((this.contrast()+100)/100,2),a=l.data,c=a.length;let h=150,g=150,f=150;for(let b=0;b<c;b+=4)h=a[b],g=a[b+1],f=a[b+2],h/=255,h-=.5,h*=o,h+=.5,h*=255,g/=255,g-=.5,g*=o,g+=.5,g*=255,f/=255,f-=.5,f*=o,f+=.5,f*=255,h=h<0?0:h>255?255:h,g=g<0?0:g>255?255:g,f=f<0?0:f>255?255:f,a[b]=h,a[b+1]=g,a[b+2]=f};return Ir.Contrast=s,t.Factory.addGetterSetter(e.Node,"contrast",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Ir}var Dr={},Gl;function Ed(){if(Gl)return Dr;Gl=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.Emboss=void 0;const t=Yt(),e=de(),i=ue(),s=$t(),l=function(o){const a=this.embossStrength()*10,c=this.embossWhiteLevel()*255,h=this.embossDirection(),g=this.embossBlend(),f=o.data,b=o.width,x=o.height,v=b*4;let y=0,w=0,T=x;switch(h){case"top-left":y=-1,w=-1;break;case"top":y=-1,w=0;break;case"top-right":y=-1,w=1;break;case"right":y=0,w=1;break;case"bottom-right":y=1,w=1;break;case"bottom":y=1,w=0;break;case"bottom-left":y=1,w=-1;break;case"left":y=0,w=-1;break;default:i.Util.error("Unknown emboss direction: "+h)}do{const F=(T-1)*v;let m=y;T+m<1&&(m=0),T+m>x&&(m=0);const d=(T-1+m)*b*4;let S=b;do{const A=F+(S-1)*4;let M=w;S+M<1&&(M=0),S+M>b&&(M=0);const j=d+(S-1+M)*4,D=f[A]-f[j],I=f[A+1]-f[j+1],O=f[A+2]-f[j+2];let k=D;const K=k>0?k:-k,p=I>0?I:-I,E=O>0?O:-O;if(p>K&&(k=I),E>K&&(k=O),k*=a,g){const P=f[A]+k,N=f[A+1]+k,B=f[A+2]+k;f[A]=P>255?255:P<0?0:P,f[A+1]=N>255?255:N<0?0:N,f[A+2]=B>255?255:B<0?0:B}else{let P=c-k;P<0?P=0:P>255&&(P=255),f[A]=f[A+1]=f[A+2]=P}}while(--S)}while(--T)};return Dr.Emboss=l,t.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,s.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,s.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossDirection","top-left",void 0,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossBlend",!1,void 0,t.Factory.afterSetFilter),Dr}var Nr={},Ll;function Ad(){if(Ll)return Nr;Ll=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.Enhance=void 0;const t=Yt(),e=de(),i=$t();function s(o,a,c,h,g){const f=c-a,b=g-h;if(f===0)return h+b/2;if(b===0)return h;let x=(o-a)/f;return x=b*x+h,x}const l=function(o){const a=o.data,c=a.length;let h=a[0],g=h,f,b=a[1],x=b,v,y=a[2],w=y,T;const F=this.enhance();if(F===0)return;for(let k=0;k<c;k+=4)f=a[k+0],f<h?h=f:f>g&&(g=f),v=a[k+1],v<b?b=v:v>x&&(x=v),T=a[k+2],T<y?y=T:T>w&&(w=T);g===h&&(g=255,h=0),x===b&&(x=255,b=0),w===y&&(w=255,y=0);let m,d,S,A,M,j,D,I,O;F>0?(d=g+F*(255-g),S=h-F*(h-0),M=x+F*(255-x),j=b-F*(b-0),I=w+F*(255-w),O=y-F*(y-0)):(m=(g+h)*.5,d=g+F*(g-m),S=h+F*(h-m),A=(x+b)*.5,M=x+F*(x-A),j=b+F*(b-A),D=(w+y)*.5,I=w+F*(w-D),O=y+F*(y-D));for(let k=0;k<c;k+=4)a[k+0]=s(a[k+0],h,g,S,d),a[k+1]=s(a[k+1],b,x,j,M),a[k+2]=s(a[k+2],y,w,O,I)};return Nr.Enhance=l,t.Factory.addGetterSetter(e.Node,"enhance",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Nr}var Gr={},Bl;function Rd(){if(Bl)return Gr;Bl=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.Grayscale=void 0;const t=function(e){const i=e.data,s=i.length;for(let l=0;l<s;l+=4){const o=.34*i[l]+.5*i[l+1]+.16*i[l+2];i[l]=o,i[l+1]=o,i[l+2]=o}};return Gr.Grayscale=t,Gr}var Lr={},Ul;function kd(){if(Ul)return Lr;Ul=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.HSL=void 0;const t=Yt(),e=de(),i=$t();t.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"luminance",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter);const s=function(l){const o=l.data,a=o.length,c=1,h=Math.pow(2,this.saturation()),g=Math.abs(this.hue()+360)%360,f=this.luminance()*127,b=c*h*Math.cos(g*Math.PI/180),x=c*h*Math.sin(g*Math.PI/180),v=.299*c+.701*b+.167*x,y=.587*c-.587*b+.33*x,w=.114*c-.114*b-.497*x,T=.299*c-.299*b-.328*x,F=.587*c+.413*b+.035*x,m=.114*c-.114*b+.293*x,d=.299*c-.3*b+1.25*x,S=.587*c-.586*b-1.05*x,A=.114*c+.886*b-.2*x;let M,j,D,I;for(let O=0;O<a;O+=4)M=o[O+0],j=o[O+1],D=o[O+2],I=o[O+3],o[O+0]=v*M+y*j+w*D+f,o[O+1]=T*M+F*j+m*D+f,o[O+2]=d*M+S*j+A*D+f,o[O+3]=I};return Lr.HSL=s,Lr}var Br={},Kl;function Od(){if(Kl)return Br;Kl=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.HSV=void 0;const t=Yt(),e=de(),i=$t(),s=function(l){const o=l.data,a=o.length,c=Math.pow(2,this.value()),h=Math.pow(2,this.saturation()),g=Math.abs(this.hue()+360)%360,f=c*h*Math.cos(g*Math.PI/180),b=c*h*Math.sin(g*Math.PI/180),x=.299*c+.701*f+.167*b,v=.587*c-.587*f+.33*b,y=.114*c-.114*f-.497*b,w=.299*c-.299*f-.328*b,T=.587*c+.413*f+.035*b,F=.114*c-.114*f+.293*b,m=.299*c-.3*f+1.25*b,d=.587*c-.586*f-1.05*b,S=.114*c+.886*f-.2*b;let A,M,j,D;for(let I=0;I<a;I+=4)A=o[I+0],M=o[I+1],j=o[I+2],D=o[I+3],o[I+0]=x*A+v*M+y*j,o[I+1]=w*A+T*M+F*j,o[I+2]=m*A+d*M+S*j,o[I+3]=D};return Br.HSV=s,t.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"value",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Br}var Ur={},jl;function Fd(){if(jl)return Ur;jl=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.Invert=void 0;const t=function(e){const i=e.data,s=i.length;for(let l=0;l<s;l+=4)i[l]=255-i[l],i[l+1]=255-i[l+1],i[l+2]=255-i[l+2]};return Ur.Invert=t,Ur}var Kr={},ql;function Md(){if(ql)return Kr;ql=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.Kaleidoscope=void 0;const t=Yt(),e=de(),i=ue(),s=$t(),l=function(c,h,g){const f=c.data,b=h.data,x=c.width,v=c.height,y=g.polarCenterX||x/2,w=g.polarCenterY||v/2;let T=Math.sqrt(y*y+w*w),F=x-y,m=v-w;const d=Math.sqrt(F*F+m*m);T=d>T?d:T;const S=v,A=x,M=360/A*Math.PI/180;for(let j=0;j<A;j+=1){const D=Math.sin(j*M),I=Math.cos(j*M);for(let O=0;O<S;O+=1){F=Math.floor(y+T*O/S*I),m=Math.floor(w+T*O/S*D);let k=(m*x+F)*4;const K=f[k+0],p=f[k+1],E=f[k+2],P=f[k+3];k=(j+O*x)*4,b[k+0]=K,b[k+1]=p,b[k+2]=E,b[k+3]=P}}},o=function(c,h,g){const f=c.data,b=h.data,x=c.width,v=c.height,y=g.polarCenterX||x/2,w=g.polarCenterY||v/2;let T=Math.sqrt(y*y+w*w),F=x-y,m=v-w;const d=Math.sqrt(F*F+m*m);T=d>T?d:T;const S=v,A=x,M=0;let j,D;for(F=0;F<x;F+=1)for(m=0;m<v;m+=1){const I=F-y,O=m-w,k=Math.sqrt(I*I+O*O)*S/T;let K=(Math.atan2(O,I)*180/Math.PI+360+M)%360;K=K*A/360,j=Math.floor(K),D=Math.floor(k);let p=(D*x+j)*4;const E=f[p+0],P=f[p+1],N=f[p+2],B=f[p+3];p=(m*x+F)*4,b[p+0]=E,b[p+1]=P,b[p+2]=N,b[p+3]=B}},a=function(c){const h=c.width,g=c.height;let f,b,x,v,y,w,T,F,m,d,S=Math.round(this.kaleidoscopePower());const A=Math.round(this.kaleidoscopeAngle()),M=Math.floor(h*(A%360)/360);if(S<1)return;const j=i.Util.createCanvasElement();j.width=h,j.height=g;const D=j.getContext("2d").getImageData(0,0,h,g);i.Util.releaseCanvas(j),l(c,D,{polarCenterX:h/2,polarCenterY:g/2});let I=h/Math.pow(2,S);for(;I<=8;)I=I*2,S-=1;I=Math.ceil(I);let O=I,k=0,K=O,p=1;for(M+I>h&&(k=O,K=0,p=-1),b=0;b<g;b+=1)for(f=k;f!==K;f+=p)x=Math.round(f+M)%h,m=(h*b+x)*4,y=D.data[m+0],w=D.data[m+1],T=D.data[m+2],F=D.data[m+3],d=(h*b+f)*4,D.data[d+0]=y,D.data[d+1]=w,D.data[d+2]=T,D.data[d+3]=F;for(b=0;b<g;b+=1)for(O=Math.floor(I),v=0;v<S;v+=1){for(f=0;f<O+1;f+=1)m=(h*b+f)*4,y=D.data[m+0],w=D.data[m+1],T=D.data[m+2],F=D.data[m+3],d=(h*b+O*2-f-1)*4,D.data[d+0]=y,D.data[d+1]=w,D.data[d+2]=T,D.data[d+3]=F;O*=2}o(D,c,{})};return Kr.Kaleidoscope=a,t.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,s.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,s.getNumberValidator)(),t.Factory.afterSetFilter),Kr}var jr={},Vl;function Id(){if(Vl)return jr;Vl=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.Mask=void 0;const t=Yt(),e=de(),i=$t();function s(x,v,y){let w=(y*x.width+v)*4;const T=[];return T.push(x.data[w++],x.data[w++],x.data[w++],x.data[w++]),T}function l(x,v){return Math.sqrt(Math.pow(x[0]-v[0],2)+Math.pow(x[1]-v[1],2)+Math.pow(x[2]-v[2],2))}function o(x){const v=[0,0,0];for(let y=0;y<x.length;y++)v[0]+=x[y][0],v[1]+=x[y][1],v[2]+=x[y][2];return v[0]/=x.length,v[1]/=x.length,v[2]/=x.length,v}function a(x,v){const y=s(x,0,0),w=s(x,x.width-1,0),T=s(x,0,x.height-1),F=s(x,x.width-1,x.height-1),m=v||10;if(l(y,w)<m&&l(w,F)<m&&l(F,T)<m&&l(T,y)<m){const d=o([w,y,F,T]),S=[];for(let A=0;A<x.width*x.height;A++){const M=l(d,[x.data[A*4],x.data[A*4+1],x.data[A*4+2]]);S[A]=M<m?0:255}return S}}function c(x,v){for(let y=0;y<x.width*x.height;y++)x.data[4*y+3]=v[y]}function h(x,v,y){const w=[1,1,1,1,0,1,1,1,1],T=Math.round(Math.sqrt(w.length)),F=Math.floor(T/2),m=[];for(let d=0;d<y;d++)for(let S=0;S<v;S++){const A=d*v+S;let M=0;for(let j=0;j<T;j++)for(let D=0;D<T;D++){const I=d+j-F,O=S+D-F;if(I>=0&&I<y&&O>=0&&O<v){const k=I*v+O,K=w[j*T+D];M+=x[k]*K}}m[A]=M===255*8?255:0}return m}function g(x,v,y){const w=[1,1,1,1,1,1,1,1,1],T=Math.round(Math.sqrt(w.length)),F=Math.floor(T/2),m=[];for(let d=0;d<y;d++)for(let S=0;S<v;S++){const A=d*v+S;let M=0;for(let j=0;j<T;j++)for(let D=0;D<T;D++){const I=d+j-F,O=S+D-F;if(I>=0&&I<y&&O>=0&&O<v){const k=I*v+O,K=w[j*T+D];M+=x[k]*K}}m[A]=M>=255*4?255:0}return m}function f(x,v,y){const w=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],T=Math.round(Math.sqrt(w.length)),F=Math.floor(T/2),m=[];for(let d=0;d<y;d++)for(let S=0;S<v;S++){const A=d*v+S;let M=0;for(let j=0;j<T;j++)for(let D=0;D<T;D++){const I=d+j-F,O=S+D-F;if(I>=0&&I<y&&O>=0&&O<v){const k=I*v+O,K=w[j*T+D];M+=x[k]*K}}m[A]=M}return m}const b=function(x){const v=this.threshold();let y=a(x,v);return y&&(y=h(y,x.width,x.height),y=g(y,x.width,x.height),y=f(y,x.width,x.height),c(x,y)),x};return jr.Mask=b,t.Factory.addGetterSetter(e.Node,"threshold",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),jr}var qr={},Hl;function Dd(){if(Hl)return qr;Hl=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.Noise=void 0;const t=Yt(),e=de(),i=$t(),s=function(l){const o=this.noise()*255,a=l.data,c=a.length,h=o/2;for(let g=0;g<c;g+=4)a[g+0]+=h-2*h*Math.random(),a[g+1]+=h-2*h*Math.random(),a[g+2]+=h-2*h*Math.random()};return qr.Noise=s,t.Factory.addGetterSetter(e.Node,"noise",.2,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),qr}var Vr={},Wl;function Nd(){if(Wl)return Vr;Wl=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.Pixelate=void 0;const t=Yt(),e=ue(),i=de(),s=$t(),l=function(o){let a=Math.ceil(this.pixelSize()),c=o.width,h=o.height,g,f,b,x,v,y,w,T=Math.ceil(c/a),F=Math.ceil(h/a),m,d,S,A,M,j,D,I=o.data;if(a<=0){e.Util.error("pixelSize value can not be <= 0");return}for(M=0;M<T;M+=1)for(j=0;j<F;j+=1){for(x=0,v=0,y=0,w=0,m=M*a,d=m+a,S=j*a,A=S+a,D=0,g=m;g<d;g+=1)if(!(g>=c))for(f=S;f<A;f+=1)f>=h||(b=(c*f+g)*4,x+=I[b+0],v+=I[b+1],y+=I[b+2],w+=I[b+3],D+=1);for(x=x/D,v=v/D,y=y/D,w=w/D,g=m;g<d;g+=1)if(!(g>=c))for(f=S;f<A;f+=1)f>=h||(b=(c*f+g)*4,I[b+0]=x,I[b+1]=v,I[b+2]=y,I[b+3]=w)}};return Vr.Pixelate=l,t.Factory.addGetterSetter(i.Node,"pixelSize",8,(0,s.getNumberValidator)(),t.Factory.afterSetFilter),Vr}var Hr={},zl;function Gd(){if(zl)return Hr;zl=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.Posterize=void 0;const t=Yt(),e=de(),i=$t(),s=function(l){const o=Math.round(this.levels()*254)+1,a=l.data,c=a.length,h=255/o;for(let g=0;g<c;g+=1)a[g]=Math.floor(a[g]/h)*h};return Hr.Posterize=s,t.Factory.addGetterSetter(e.Node,"levels",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Hr}var Wr={},Yl;function Ld(){if(Yl)return Wr;Yl=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.RGB=void 0;const t=Yt(),e=de(),i=$t(),s=function(l){const o=l.data,a=o.length,c=this.red(),h=this.green(),g=this.blue();for(let f=0;f<a;f+=4){const b=(.34*o[f]+.5*o[f+1]+.16*o[f+2])/255;o[f]=b*c,o[f+1]=b*h,o[f+2]=b*g,o[f+3]=o[f+3]}};return Wr.RGB=s,t.Factory.addGetterSetter(e.Node,"red",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)}),t.Factory.addGetterSetter(e.Node,"green",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)}),t.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,t.Factory.afterSetFilter),Wr}var zr={},$l;function Bd(){if($l)return zr;$l=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.RGBA=void 0;const t=Yt(),e=de(),i=$t(),s=function(l){const o=l.data,a=o.length,c=this.red(),h=this.green(),g=this.blue(),f=this.alpha();for(let b=0;b<a;b+=4){const x=1-f;o[b]=c*f+o[b]*x,o[b+1]=h*f+o[b+1]*x,o[b+2]=g*f+o[b+2]*x}};return zr.RGBA=s,t.Factory.addGetterSetter(e.Node,"red",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)}),t.Factory.addGetterSetter(e.Node,"green",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)}),t.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"alpha",1,function(l){return this._filterUpToDate=!1,l>1?1:l<0?0:l}),zr}var Yr={},Xl;function Ud(){if(Xl)return Yr;Xl=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.Sepia=void 0;const t=function(e){const i=e.data,s=i.length;for(let l=0;l<s;l+=4){const o=i[l+0],a=i[l+1],c=i[l+2];i[l+0]=Math.min(255,o*.393+a*.769+c*.189),i[l+1]=Math.min(255,o*.349+a*.686+c*.168),i[l+2]=Math.min(255,o*.272+a*.534+c*.131)}};return Yr.Sepia=t,Yr}var $r={},Ql;function Kd(){if(Ql)return $r;Ql=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.Solarize=void 0;const t=function(e){const i=e.data,s=e.width,l=e.height,o=s*4;let a=l;do{const c=(a-1)*o;let h=s;do{const g=c+(h-1)*4;let f=i[g],b=i[g+1],x=i[g+2];f>127&&(f=255-f),b>127&&(b=255-b),x>127&&(x=255-x),i[g]=f,i[g+1]=b,i[g+2]=x}while(--h)}while(--a)};return $r.Solarize=t,$r}var Xr={},Jl;function jd(){if(Jl)return Xr;Jl=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.Threshold=void 0;const t=Yt(),e=de(),i=$t(),s=function(l){const o=this.threshold()*255,a=l.data,c=a.length;for(let h=0;h<c;h+=1)a[h]=a[h]<o?0:255};return Xr.Threshold=s,t.Factory.addGetterSetter(e.Node,"threshold",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Xr}var Zl;function qd(){if(Zl)return ur;Zl=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.Konva=void 0;const t=cd(),e=ud(),i=fd(),s=dd(),l=gd(),o=pd(),a=md(),c=su(),h=zo(),g=ou(),f=yd(),b=vd(),x=_d(),v=bd(),y=au(),w=wd(),T=Sd(),F=xd(),m=Cd(),d=Pd(),S=Td(),A=Ed(),M=Ad(),j=Rd(),D=kd(),I=Od(),O=Fd(),k=Md(),K=Id(),p=Dd(),E=Nd(),P=Gd(),N=Ld(),B=Bd(),W=Ud(),it=Kd(),et=jd();return ur.Konva=t.Konva.Util._assign(t.Konva,{Arc:e.Arc,Arrow:i.Arrow,Circle:s.Circle,Ellipse:l.Ellipse,Image:o.Image,Label:a.Label,Tag:a.Tag,Line:c.Line,Path:h.Path,Rect:g.Rect,RegularPolygon:f.RegularPolygon,Ring:b.Ring,Sprite:x.Sprite,Star:v.Star,Text:y.Text,TextPath:w.TextPath,Transformer:T.Transformer,Wedge:F.Wedge,Filters:{Blur:m.Blur,Brighten:d.Brighten,Contrast:S.Contrast,Emboss:A.Emboss,Enhance:M.Enhance,Grayscale:j.Grayscale,HSL:D.HSL,HSV:I.HSV,Invert:O.Invert,Kaleidoscope:k.Kaleidoscope,Mask:K.Mask,Noise:p.Noise,Pixelate:E.Pixelate,Posterize:P.Posterize,RGB:N.RGB,RGBA:B.RGBA,Sepia:W.Sepia,Solarize:it.Solarize,Threshold:et.Threshold}}),ur}var Vd=qi.exports,tc;function Hd(){if(tc)return qi.exports;tc=1,Object.defineProperty(Vd,"__esModule",{value:!0});const t=qd();return qi.exports=t.Konva,qi.exports}var Wd=Hd();const ge=eu(Wd);var Vi={exports:{}},zd=Vi.exports,ec;function Yd(){return ec||(ec=1,function(t,e){(function(i,s){t.exports=s()})(zd,function(){var i=function(n,r){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,_){u.__proto__=_}||function(u,_){for(var C in _)Object.prototype.hasOwnProperty.call(_,C)&&(u[C]=_[C])})(n,r)},s=function(){return(s=Object.assign||function(n){for(var r,u=1,_=arguments.length;u<_;u++)for(var C in r=arguments[u])Object.prototype.hasOwnProperty.call(r,C)&&(n[C]=r[C]);return n}).apply(this,arguments)};function l(n,r,u){for(var _,C=0,R=r.length;C<R;C++)!_&&C in r||((_=_||Array.prototype.slice.call(r,0,C))[C]=r[C]);return n.concat(_||Array.prototype.slice.call(r))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:vo,a=Object.keys,c=Array.isArray;function h(n,r){return typeof r!="object"||a(r).forEach(function(u){n[u]=r[u]}),n}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var g=Object.getPrototypeOf,f={}.hasOwnProperty;function b(n,r){return f.call(n,r)}function x(n,r){typeof r=="function"&&(r=r(g(n))),(typeof Reflect>"u"?a:Reflect.ownKeys)(r).forEach(function(u){y(n,u,r[u])})}var v=Object.defineProperty;function y(n,r,u,_){v(n,r,h(u&&b(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},_))}function w(n){return{from:function(r){return n.prototype=Object.create(r.prototype),y(n.prototype,"constructor",n),{extend:x.bind(null,n.prototype)}}}}var T=Object.getOwnPropertyDescriptor,F=[].slice;function m(n,r,u){return F.call(n,r,u)}function d(n,r){return r(n)}function S(n){if(!n)throw new Error("Assertion Failed")}function A(n){o.setImmediate?setImmediate(n):setTimeout(n,0)}function M(n,r){if(typeof r=="string"&&b(n,r))return n[r];if(!r)return n;if(typeof r!="string"){for(var u=[],_=0,C=r.length;_<C;++_){var R=M(n,r[_]);u.push(R)}return u}var L=r.indexOf(".");if(L!==-1){var U=n[r.substr(0,L)];return U==null?void 0:M(U,r.substr(L+1))}}function j(n,r,u){if(n&&r!==void 0&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof r!="string"&&"length"in r){S(typeof u!="string"&&"length"in u);for(var _=0,C=r.length;_<C;++_)j(n,r[_],u[_])}else{var R,L,U=r.indexOf(".");U!==-1?(R=r.substr(0,U),(L=r.substr(U+1))===""?u===void 0?c(n)&&!isNaN(parseInt(R))?n.splice(R,1):delete n[R]:n[R]=u:j(U=!(U=n[R])||!b(n,R)?n[R]={}:U,L,u)):u===void 0?c(n)&&!isNaN(parseInt(r))?n.splice(r,1):delete n[r]:n[r]=u}}function D(n){var r,u={};for(r in n)b(n,r)&&(u[r]=n[r]);return u}var I=[].concat;function O(n){return I.apply([],n)}var Lt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(O([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(r){return r+n+"Array"})}))).filter(function(n){return o[n]}),k=new Set(Lt.map(function(n){return o[n]})),K=null;function p(n){return K=new WeakMap,n=function r(u){if(!u||typeof u!="object")return u;var _=K.get(u);if(_)return _;if(c(u)){_=[],K.set(u,_);for(var C=0,R=u.length;C<R;++C)_.push(r(u[C]))}else if(k.has(u.constructor))_=u;else{var L,U=g(u);for(L in _=U===Object.prototype?{}:Object.create(U),K.set(u,_),u)b(u,L)&&(_[L]=r(u[L]))}return _}(n),K=null,n}var E={}.toString;function P(n){return E.call(n).slice(8,-1)}var N=typeof Symbol<"u"?Symbol.iterator:"@@iterator",B=typeof N=="symbol"?function(n){var r;return n!=null&&(r=n[N])&&r.apply(n)}:function(){return null};function W(n,r){return r=n.indexOf(r),0<=r&&n.splice(r,1),0<=r}var it={};function et(n){var r,u,_,C;if(arguments.length===1){if(c(n))return n.slice();if(this===it&&typeof n=="string")return[n];if(C=B(n)){for(u=[];!(_=C.next()).done;)u.push(_.value);return u}if(n==null)return[n];if(typeof(r=n.length)!="number")return[n];for(u=new Array(r);r--;)u[r]=n[r];return u}for(r=arguments.length,u=new Array(r);r--;)u[r]=arguments[r];return u}var ht=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Gt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ue=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Gt),_t={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ut(n,r){this.name=n,this.message=r}function mt(n,r){return n+". Errors: "+Object.keys(r).map(function(u){return r[u].toString()}).filter(function(u,_,C){return C.indexOf(u)===_}).join(`
`)}function At(n,r,u,_){this.failures=r,this.failedKeys=_,this.successCount=u,this.message=mt(n,r)}function Rt(n,r){this.name="BulkError",this.failures=Object.keys(r).map(function(u){return r[u]}),this.failuresByPos=r,this.message=mt(n,this.failures)}w(ut).from(Error).extend({toString:function(){return this.name+": "+this.message}}),w(At).from(ut),w(Rt).from(ut);var H=Ue.reduce(function(n,r){return n[r]=r+"Error",n},{}),ct=ut,st=Ue.reduce(function(n,r){var u=r+"Error";function _(C,R){this.name=u,C?typeof C=="string"?(this.message="".concat(C).concat(R?`
 `+R:""),this.inner=R||null):typeof C=="object"&&(this.message="".concat(C.name," ").concat(C.message),this.inner=C):(this.message=_t[r]||u,this.inner=null)}return w(_).from(ct),n[r]=_,n},{});st.Syntax=SyntaxError,st.Type=TypeError,st.Range=RangeError;var St=Gt.reduce(function(n,r){return n[r+"Error"]=st[r],n},{}),Mt=Ue.reduce(function(n,r){return["Syntax","Type","Range"].indexOf(r)===-1&&(n[r+"Error"]=st[r]),n},{});function G(){}function q(n){return n}function nt(n,r){return n==null||n===q?r:function(u){return r(n(u))}}function lt(n,r){return function(){n.apply(this,arguments),r.apply(this,arguments)}}function gt(n,r){return n===G?r:function(){var u=n.apply(this,arguments);u!==void 0&&(arguments[0]=u);var _=this.onsuccess,C=this.onerror;this.onsuccess=null,this.onerror=null;var R=r.apply(this,arguments);return _&&(this.onsuccess=this.onsuccess?lt(_,this.onsuccess):_),C&&(this.onerror=this.onerror?lt(C,this.onerror):C),R!==void 0?R:u}}function ft(n,r){return n===G?r:function(){n.apply(this,arguments);var u=this.onsuccess,_=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?lt(u,this.onsuccess):u),_&&(this.onerror=this.onerror?lt(_,this.onerror):_)}}function yt(n,r){return n===G?r:function(u){var _=n.apply(this,arguments);h(u,_);var C=this.onsuccess,R=this.onerror;return this.onsuccess=null,this.onerror=null,u=r.apply(this,arguments),C&&(this.onsuccess=this.onsuccess?lt(C,this.onsuccess):C),R&&(this.onerror=this.onerror?lt(R,this.onerror):R),_===void 0?u===void 0?void 0:u:h(_,u)}}function Ct(n,r){return n===G?r:function(){return r.apply(this,arguments)!==!1&&n.apply(this,arguments)}}function vt(n,r){return n===G?r:function(){var u=n.apply(this,arguments);if(u&&typeof u.then=="function"){for(var _=this,C=arguments.length,R=new Array(C);C--;)R[C]=arguments[C];return u.then(function(){return r.apply(_,R)})}return r.apply(this,arguments)}}Mt.ModifyError=At,Mt.DexieError=ut,Mt.BulkError=Rt;var pt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ot(n){pt=n}var xt={},Nt=100,Lt=typeof Promise>"u"?[]:function(){var n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,g(n),n];var r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,g(r),n]}(),Gt=Lt[0],Ue=Lt[1],Lt=Lt[2],Ue=Ue&&Ue.then,Bt=Gt&&Gt.constructor,Ut=!!Lt,ee=function(n,r){an.push([n,r]),ae&&(queueMicrotask(cu),ae=!1)},ne=!0,ae=!0,Jt=[],ce=[],ye=q,re={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:G,pgp:!1,env:{},finalize:G},It=re,an=[],Cn=0,di=[];function Ft(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var r=this._PSD=It;if(typeof n!="function"){if(n!==xt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&cs(this,this._value))}this._state=null,this._value=null,++r.ref,function u(_,C){try{C(function(R){if(_._state===null){if(R===_)throw new TypeError("A promise cannot be resolved with itself.");var L=_._lib&&Ln();R&&typeof R.then=="function"?u(_,function(U,z){R instanceof Ft?R._then(U,z):R.then(U,z)}):(_._state=!0,_._value=R,$o(_)),L&&Bn()}},cs.bind(null,_))}catch(R){cs(_,R)}}(this,n)}var ls={get:function(){var n=It,r=yi;function u(_,C){var R=this,L=!n.global&&(n!==It||r!==yi),U=L&&!cn(),z=new Ft(function($,J){us(R,new Yo(Qo(_,n,L,U),Qo(C,n,L,U),$,J,n))});return this._consoleTask&&(z._consoleTask=this._consoleTask),z}return u.prototype=xt,u},set:function(n){y(this,"then",n&&n.prototype===xt?ls:{get:function(){return n},set:ls.set})}};function Yo(n,r,u,_,C){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof r=="function"?r:null,this.resolve=u,this.reject=_,this.psd=C}function cs(n,r){var u,_;ce.push(r),n._state===null&&(u=n._lib&&Ln(),r=ye(r),n._state=!1,n._value=r,_=n,Jt.some(function(C){return C._value===_._value})||Jt.push(_),$o(n),u&&Bn())}function $o(n){var r=n._listeners;n._listeners=[];for(var u=0,_=r.length;u<_;++u)us(n,r[u]);var C=n._PSD;--C.ref||C.finalize(),Cn===0&&(++Cn,ee(function(){--Cn==0&&hs()},[]))}function us(n,r){if(n._state!==null){var u=n._state?r.onFulfilled:r.onRejected;if(u===null)return(n._state?r.resolve:r.reject)(n._value);++r.psd.ref,++Cn,ee(lu,[u,n,r])}else n._listeners.push(r)}function lu(n,r,u){try{var _,C=r._value;!r._state&&ce.length&&(ce=[]),_=pt&&r._consoleTask?r._consoleTask.run(function(){return n(C)}):n(C),r._state||ce.indexOf(C)!==-1||function(R){for(var L=Jt.length;L;)if(Jt[--L]._value===R._value)return Jt.splice(L,1)}(r),u.resolve(_)}catch(R){u.reject(R)}finally{--Cn==0&&hs(),--u.psd.ref||u.psd.finalize()}}function cu(){Pn(re,function(){Ln()&&Bn()})}function Ln(){var n=ne;return ae=ne=!1,n}function Bn(){var n,r,u;do for(;0<an.length;)for(n=an,an=[],u=n.length,r=0;r<u;++r){var _=n[r];_[0].apply(null,_[1])}while(0<an.length);ae=ne=!0}function hs(){var n=Jt;Jt=[],n.forEach(function(_){_._PSD.onunhandled.call(null,_._value,_)});for(var r=di.slice(0),u=r.length;u;)r[--u]()}function gi(n){return new Ft(xt,!1,n)}function le(n,r){var u=It;return function(){var _=Ln(),C=It;try{return un(u,!0),n.apply(this,arguments)}catch(R){r&&r(R)}finally{un(C,!1),_&&Bn()}}}x(Ft.prototype,{then:ls,_then:function(n,r){us(this,new Yo(null,null,n,r,It))},catch:function(n){if(arguments.length===1)return this.then(null,n);var r=n,u=arguments[1];return typeof r=="function"?this.then(null,function(_){return(_ instanceof r?u:gi)(_)}):this.then(null,function(_){return(_&&_.name===r?u:gi)(_)})},finally:function(n){return this.then(function(r){return Ft.resolve(n()).then(function(){return r})},function(r){return Ft.resolve(n()).then(function(){return gi(r)})})},timeout:function(n,r){var u=this;return n<1/0?new Ft(function(_,C){var R=setTimeout(function(){return C(new st.Timeout(r))},n);u.then(_,C).finally(clearTimeout.bind(null,R))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&y(Ft.prototype,Symbol.toStringTag,"Dexie.Promise"),re.env=Xo(),x(Ft,{all:function(){var n=et.apply(null,arguments).map(vi);return new Ft(function(r,u){n.length===0&&r([]);var _=n.length;n.forEach(function(C,R){return Ft.resolve(C).then(function(L){n[R]=L,--_||r(n)},u)})})},resolve:function(n){return n instanceof Ft?n:n&&typeof n.then=="function"?new Ft(function(r,u){n.then(r,u)}):new Ft(xt,!0,n)},reject:gi,race:function(){var n=et.apply(null,arguments).map(vi);return new Ft(function(r,u){n.map(function(_){return Ft.resolve(_).then(r,u)})})},PSD:{get:function(){return It},set:function(n){return It=n}},totalEchoes:{get:function(){return yi}},newPSD:ln,usePSD:Pn,scheduler:{get:function(){return ee},set:function(n){ee=n}},rejectionMapper:{get:function(){return ye},set:function(n){ye=n}},follow:function(n,r){return new Ft(function(u,_){return ln(function(C,R){var L=It;L.unhandleds=[],L.onunhandled=R,L.finalize=lt(function(){var U,z=this;U=function(){z.unhandleds.length===0?C():R(z.unhandleds[0])},di.push(function $(){U(),di.splice(di.indexOf($),1)}),++Cn,ee(function(){--Cn==0&&hs()},[])},L.finalize),n()},r,u,_)})}}),Bt&&(Bt.allSettled&&y(Ft,"allSettled",function(){var n=et.apply(null,arguments).map(vi);return new Ft(function(r){n.length===0&&r([]);var u=n.length,_=new Array(u);n.forEach(function(C,R){return Ft.resolve(C).then(function(L){return _[R]={status:"fulfilled",value:L}},function(L){return _[R]={status:"rejected",reason:L}}).then(function(){return--u||r(_)})})})}),Bt.any&&typeof AggregateError<"u"&&y(Ft,"any",function(){var n=et.apply(null,arguments).map(vi);return new Ft(function(r,u){n.length===0&&u(new AggregateError([]));var _=n.length,C=new Array(_);n.forEach(function(R,L){return Ft.resolve(R).then(function(U){return r(U)},function(U){C[L]=U,--_||u(new AggregateError(C))})})})}),Bt.withResolvers&&(Ft.withResolvers=Bt.withResolvers));var ve={awaits:0,echoes:0,id:0},uu=0,pi=[],mi=0,yi=0,hu=0;function ln(n,r,u,_){var C=It,R=Object.create(C);return R.parent=C,R.ref=0,R.global=!1,R.id=++hu,re.env,R.env=Ut?{Promise:Ft,PromiseProp:{value:Ft,configurable:!0,writable:!0},all:Ft.all,race:Ft.race,allSettled:Ft.allSettled,any:Ft.any,resolve:Ft.resolve,reject:Ft.reject}:{},r&&h(R,r),++C.ref,R.finalize=function(){--this.parent.ref||this.parent.finalize()},_=Pn(R,n,u,_),R.ref===0&&R.finalize(),_}function Un(){return ve.id||(ve.id=++uu),++ve.awaits,ve.echoes+=Nt,ve.id}function cn(){return!!ve.awaits&&(--ve.awaits==0&&(ve.id=0),ve.echoes=ve.awaits*Nt,!0)}function vi(n){return ve.echoes&&n&&n.constructor===Bt?(Un(),n.then(function(r){return cn(),r},function(r){return cn(),he(r)})):n}function fu(){var n=pi[pi.length-1];pi.pop(),un(n,!1)}function un(n,r){var u,_=It;(r?!ve.echoes||mi++&&n===It:!mi||--mi&&n===It)||queueMicrotask(r?(function(C){++yi,ve.echoes&&--ve.echoes!=0||(ve.echoes=ve.awaits=ve.id=0),pi.push(It),un(C,!0)}).bind(null,n):fu),n!==It&&(It=n,_===re&&(re.env=Xo()),Ut&&(u=re.env.Promise,r=n.env,(_.global||n.global)&&(Object.defineProperty(o,"Promise",r.PromiseProp),u.all=r.all,u.race=r.race,u.resolve=r.resolve,u.reject=r.reject,r.allSettled&&(u.allSettled=r.allSettled),r.any&&(u.any=r.any))))}function Xo(){var n=o.Promise;return Ut?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function Pn(n,r,u,_,C){var R=It;try{return un(n,!0),r(u,_,C)}finally{un(R,!1)}}function Qo(n,r,u,_){return typeof n!="function"?n:function(){var C=It;u&&Un(),un(r,!0);try{return n.apply(this,arguments)}finally{un(C,!1),_&&queueMicrotask(cn)}}}function fs(n){Promise===Bt&&ve.echoes===0?mi===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}(""+Ue).indexOf("[native code]")===-1&&(Un=cn=G);var he=Ft.reject,Tn="￿",Qe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Jo="String expected.",Kn=[],_i="__dbnames",ds="readonly",gs="readwrite";function En(n,r){return n?r?function(){return n.apply(this,arguments)&&r.apply(this,arguments)}:n:r}var Zo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function bi(n){return typeof n!="string"||/\./.test(n)?function(r){return r}:function(r){return r[n]===void 0&&n in r&&delete(r=p(r))[n],r}}function ta(){throw st.Type()}function Xt(n,r){try{var u=ea(n),_=ea(r);if(u!==_)return u==="Array"?1:_==="Array"?-1:u==="binary"?1:_==="binary"?-1:u==="string"?1:_==="string"?-1:u==="Date"?1:_!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return r<n?1:n<r?-1:0;case"binary":return function(C,R){for(var L=C.length,U=R.length,z=L<U?L:U,$=0;$<z;++$)if(C[$]!==R[$])return C[$]<R[$]?-1:1;return L===U?0:L<U?-1:1}(na(n),na(r));case"Array":return function(C,R){for(var L=C.length,U=R.length,z=L<U?L:U,$=0;$<z;++$){var J=Xt(C[$],R[$]);if(J!==0)return J}return L===U?0:L<U?-1:1}(n,r)}}catch{}return NaN}function ea(n){var r=typeof n;return r!="object"?r:ArrayBuffer.isView(n)?"binary":(n=P(n),n==="ArrayBuffer"?"binary":n)}function na(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}var ra=(oe.prototype._trans=function(n,r,u){var _=this._tx||It.trans,C=this.name,R=pt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function L($,J,V){if(!V.schema[C])throw new st.NotFound("Table "+C+" not part of transaction");return r(V.idbtrans,V)}var U=Ln();try{var z=_&&_.db._novip===this.db._novip?_===It.trans?_._promise(n,L,u):ln(function(){return _._promise(n,L,u)},{trans:_,transless:It.transless||It}):function $(J,V,tt,Y){if(J.idbdb&&(J._state.openComplete||It.letThrough||J._vip)){var Q=J._createTransaction(V,tt,J._dbSchema);try{Q.create(),J._state.PR1398_maxLoop=3}catch(Z){return Z.name===H.InvalidState&&J.isOpen()&&0<--J._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),J.close({disableAutoOpen:!1}),J.open().then(function(){return $(J,V,tt,Y)})):he(Z)}return Q._promise(V,function(Z,X){return ln(function(){return It.trans=Q,Y(Z,X,Q)})}).then(function(Z){if(V==="readwrite")try{Q.idbtrans.commit()}catch{}return V==="readonly"?Z:Q._completion.then(function(){return Z})})}if(J._state.openComplete)return he(new st.DatabaseClosed(J._state.dbOpenError));if(!J._state.isBeingOpened){if(!J._state.autoOpen)return he(new st.DatabaseClosed);J.open().catch(G)}return J._state.dbReadyPromise.then(function(){return $(J,V,tt,Y)})}(this.db,n,[this.name],L);return R&&(z._consoleTask=R,z=z.catch(function($){return console.trace($),he($)})),z}finally{U&&Bn()}},oe.prototype.get=function(n,r){var u=this;return n&&n.constructor===Object?this.where(n).first(r):n==null?he(new st.Type("Invalid argument to Table.get()")):this._trans("readonly",function(_){return u.core.get({trans:_,key:n}).then(function(C){return u.hook.reading.fire(C)})}).then(r)},oe.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(c(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var r=a(n);if(r.length===1)return this.where(r[0]).equals(n[r[0]]);var u=this.schema.indexes.concat(this.schema.primKey).filter(function(U){if(U.compound&&r.every(function($){return 0<=U.keyPath.indexOf($)})){for(var z=0;z<r.length;++z)if(r.indexOf(U.keyPath[z])===-1)return!1;return!0}return!1}).sort(function(U,z){return U.keyPath.length-z.keyPath.length})[0];if(u&&this.db._maxKey!==Tn){var R=u.keyPath.slice(0,r.length);return this.where(R).equals(R.map(function(z){return n[z]}))}!u&&pt&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(r.join("+"),"]"));var _=this.schema.idxByName;function C(U,z){return Xt(U,z)===0}var L=r.reduce(function(V,z){var $=V[0],J=V[1],V=_[z],tt=n[z];return[$||V,$||!V?En(J,V&&V.multi?function(Y){return Y=M(Y,z),c(Y)&&Y.some(function(Q){return C(tt,Q)})}:function(Y){return C(tt,M(Y,z))}):J]},[null,null]),R=L[0],L=L[1];return R?this.where(R.name).equals(n[R.keyPath]).filter(L):u?this.filter(L):this.where(r).equals("")},oe.prototype.filter=function(n){return this.toCollection().and(n)},oe.prototype.count=function(n){return this.toCollection().count(n)},oe.prototype.offset=function(n){return this.toCollection().offset(n)},oe.prototype.limit=function(n){return this.toCollection().limit(n)},oe.prototype.each=function(n){return this.toCollection().each(n)},oe.prototype.toArray=function(n){return this.toCollection().toArray(n)},oe.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},oe.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,c(n)?"[".concat(n.join("+"),"]"):n))},oe.prototype.reverse=function(){return this.toCollection().reverse()},oe.prototype.mapToClass=function(n){var r,u=this.db,_=this.name;function C(){return r!==null&&r.apply(this,arguments)||this}(this.schema.mappedClass=n).prototype instanceof ta&&(function(z,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");function J(){this.constructor=z}i(z,$),z.prototype=$===null?Object.create($):(J.prototype=$.prototype,new J)}(C,r=n),Object.defineProperty(C.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),C.prototype.table=function(){return _},n=C);for(var R=new Set,L=n.prototype;L;L=g(L))Object.getOwnPropertyNames(L).forEach(function(z){return R.add(z)});function U(z){if(!z)return z;var $,J=Object.create(n.prototype);for($ in z)if(!R.has($))try{J[$]=z[$]}catch{}return J}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=U,this.hook("reading",U),n},oe.prototype.defineClass=function(){return this.mapToClass(function(n){h(this,n)})},oe.prototype.add=function(n,r){var u=this,_=this.schema.primKey,C=_.auto,R=_.keyPath,L=n;return R&&C&&(L=bi(R)(n)),this._trans("readwrite",function(U){return u.core.mutate({trans:U,type:"add",keys:r!=null?[r]:null,values:[L]})}).then(function(U){return U.numFailures?Ft.reject(U.failures[0]):U.lastResult}).then(function(U){if(R)try{j(n,R,U)}catch{}return U})},oe.prototype.update=function(n,r){return typeof n!="object"||c(n)?this.where(":id").equals(n).modify(r):(n=M(n,this.schema.primKey.keyPath),n===void 0?he(new st.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(r))},oe.prototype.put=function(n,r){var u=this,_=this.schema.primKey,C=_.auto,R=_.keyPath,L=n;return R&&C&&(L=bi(R)(n)),this._trans("readwrite",function(U){return u.core.mutate({trans:U,type:"put",values:[L],keys:r!=null?[r]:null})}).then(function(U){return U.numFailures?Ft.reject(U.failures[0]):U.lastResult}).then(function(U){if(R)try{j(n,R,U)}catch{}return U})},oe.prototype.delete=function(n){var r=this;return this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"delete",keys:[n]})}).then(function(u){return u.numFailures?Ft.reject(u.failures[0]):void 0})},oe.prototype.clear=function(){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"deleteRange",range:Zo})}).then(function(r){return r.numFailures?Ft.reject(r.failures[0]):void 0})},oe.prototype.bulkGet=function(n){var r=this;return this._trans("readonly",function(u){return r.core.getMany({keys:n,trans:u}).then(function(_){return _.map(function(C){return r.hook.reading.fire(C)})})})},oe.prototype.bulkAdd=function(n,r,u){var _=this,C=Array.isArray(r)?r:void 0,R=(u=u||(C?void 0:r))?u.allKeys:void 0;return this._trans("readwrite",function(L){var $=_.schema.primKey,U=$.auto,$=$.keyPath;if($&&C)throw new st.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(C&&C.length!==n.length)throw new st.InvalidArgument("Arguments objects and keys must have the same length");var z=n.length,$=$&&U?n.map(bi($)):n;return _.core.mutate({trans:L,type:"add",keys:C,values:$,wantResults:R}).then(function(Q){var V=Q.numFailures,tt=Q.results,Y=Q.lastResult,Q=Q.failures;if(V===0)return R?tt:Y;throw new Rt("".concat(_.name,".bulkAdd(): ").concat(V," of ").concat(z," operations failed"),Q)})})},oe.prototype.bulkPut=function(n,r,u){var _=this,C=Array.isArray(r)?r:void 0,R=(u=u||(C?void 0:r))?u.allKeys:void 0;return this._trans("readwrite",function(L){var $=_.schema.primKey,U=$.auto,$=$.keyPath;if($&&C)throw new st.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(C&&C.length!==n.length)throw new st.InvalidArgument("Arguments objects and keys must have the same length");var z=n.length,$=$&&U?n.map(bi($)):n;return _.core.mutate({trans:L,type:"put",keys:C,values:$,wantResults:R}).then(function(Q){var V=Q.numFailures,tt=Q.results,Y=Q.lastResult,Q=Q.failures;if(V===0)return R?tt:Y;throw new Rt("".concat(_.name,".bulkPut(): ").concat(V," of ").concat(z," operations failed"),Q)})})},oe.prototype.bulkUpdate=function(n){var r=this,u=this.core,_=n.map(function(L){return L.key}),C=n.map(function(L){return L.changes}),R=[];return this._trans("readwrite",function(L){return u.getMany({trans:L,keys:_,cache:"clone"}).then(function(U){var z=[],$=[];n.forEach(function(V,tt){var Y=V.key,Q=V.changes,Z=U[tt];if(Z){for(var X=0,rt=Object.keys(Q);X<rt.length;X++){var ot=rt[X],at=Q[ot];if(ot===r.schema.primKey.keyPath){if(Xt(at,Y)!==0)throw new st.Constraint("Cannot update primary key in bulkUpdate()")}else j(Z,ot,at)}R.push(tt),z.push(Y),$.push(Z)}});var J=z.length;return u.mutate({trans:L,type:"put",keys:z,values:$,updates:{keys:_,changeSpecs:C}}).then(function(V){var tt=V.numFailures,Y=V.failures;if(tt===0)return J;for(var Q=0,Z=Object.keys(Y);Q<Z.length;Q++){var X,rt=Z[Q],ot=R[Number(rt)];ot!=null&&(X=Y[rt],delete Y[rt],Y[ot]=X)}throw new Rt("".concat(r.name,".bulkUpdate(): ").concat(tt," of ").concat(J," operations failed"),Y)})})})},oe.prototype.bulkDelete=function(n){var r=this,u=n.length;return this._trans("readwrite",function(_){return r.core.mutate({trans:_,type:"delete",keys:n})}).then(function(L){var C=L.numFailures,R=L.lastResult,L=L.failures;if(C===0)return R;throw new Rt("".concat(r.name,".bulkDelete(): ").concat(C," of ").concat(u," operations failed"),L)})},oe);function oe(){}function Zn(n){function r(L,U){if(U){for(var z=arguments.length,$=new Array(z-1);--z;)$[z-1]=arguments[z];return u[L].subscribe.apply(null,$),n}if(typeof L=="string")return u[L]}var u={};r.addEventType=R;for(var _=1,C=arguments.length;_<C;++_)R(arguments[_]);return r;function R(L,U,z){if(typeof L!="object"){var $;U=U||Ct;var J={subscribers:[],fire:z=z||G,subscribe:function(V){J.subscribers.indexOf(V)===-1&&(J.subscribers.push(V),J.fire=U(J.fire,V))},unsubscribe:function(V){J.subscribers=J.subscribers.filter(function(tt){return tt!==V}),J.fire=J.subscribers.reduce(U,z)}};return u[L]=r[L]=J}a($=L).forEach(function(V){var tt=$[V];if(c(tt))R(V,$[V][0],$[V][1]);else{if(tt!=="asap")throw new st.InvalidArgument("Invalid event config");var Y=R(V,q,function(){for(var Q=arguments.length,Z=new Array(Q);Q--;)Z[Q]=arguments[Q];Y.subscribers.forEach(function(X){A(function(){X.apply(null,Z)})})})}})}}function tr(n,r){return w(r).from({prototype:n}),r}function jn(n,r){return!(n.filter||n.algorithm||n.or)&&(r?n.justLimit:!n.replayFilter)}function ps(n,r){n.filter=En(n.filter,r)}function ms(n,r,u){var _=n.replayFilter;n.replayFilter=_?function(){return En(_(),r())}:r,n.justLimit=u&&!_}function wi(n,r){if(n.isPrimKey)return r.primaryKey;var u=r.getIndexByKeyPath(n.index);if(!u)throw new st.Schema("KeyPath "+n.index+" on object store "+r.name+" is not indexed");return u}function ia(n,r,u){var _=wi(n,r.schema);return r.openCursor({trans:u,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:_,range:n.range}})}function Si(n,r,u,_){var C=n.replayFilter?En(n.filter,n.replayFilter()):n.filter;if(n.or){var R={},L=function(U,z,$){var J,V;C&&!C(z,$,function(tt){return z.stop(tt)},function(tt){return z.fail(tt)})||((V=""+(J=z.primaryKey))=="[object ArrayBuffer]"&&(V=""+new Uint8Array(J)),b(R,V)||(R[V]=!0,r(U,z,$)))};return Promise.all([n.or._iterate(L,u),sa(ia(n,_,u),n.algorithm,L,!n.keysOnly&&n.valueMapper)])}return sa(ia(n,_,u),En(n.algorithm,C),r,!n.keysOnly&&n.valueMapper)}function sa(n,r,u,_){var C=le(_?function(R,L,U){return u(_(R),L,U)}:u);return n.then(function(R){if(R)return R.start(function(){var L=function(){return R.continue()};r&&!r(R,function(U){return L=U},function(U){R.stop(U),L=G},function(U){R.fail(U),L=G})||C(R.value,R,function(U){return L=U}),L()})})}var er=(oa.prototype.execute=function(n){var r=this["@@propmod"];if(r.add!==void 0){var u=r.add;if(c(u))return l(l([],c(n)?n:[],!0),u).sort();if(typeof u=="number")return(Number(n)||0)+u;if(typeof u=="bigint")try{return BigInt(n)+u}catch{return BigInt(0)+u}throw new TypeError("Invalid term ".concat(u))}if(r.remove!==void 0){var _=r.remove;if(c(_))return c(n)?n.filter(function(C){return!_.includes(C)}).sort():[];if(typeof _=="number")return Number(n)-_;if(typeof _=="bigint")try{return BigInt(n)-_}catch{return BigInt(0)-_}throw new TypeError("Invalid subtrahend ".concat(_))}return u=(u=r.replacePrefix)===null||u===void 0?void 0:u[0],u&&typeof n=="string"&&n.startsWith(u)?r.replacePrefix[1]+n.substring(u.length):n},oa);function oa(n){this["@@propmod"]=n}var du=(Qt.prototype._read=function(n,r){var u=this._ctx;return u.error?u.table._trans(null,he.bind(null,u.error)):u.table._trans("readonly",n).then(r)},Qt.prototype._write=function(n){var r=this._ctx;return r.error?r.table._trans(null,he.bind(null,r.error)):r.table._trans("readwrite",n,"locked")},Qt.prototype._addAlgorithm=function(n){var r=this._ctx;r.algorithm=En(r.algorithm,n)},Qt.prototype._iterate=function(n,r){return Si(this._ctx,n,r,this._ctx.table.core)},Qt.prototype.clone=function(n){var r=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return n&&h(u,n),r._ctx=u,r},Qt.prototype.raw=function(){return this._ctx.valueMapper=null,this},Qt.prototype.each=function(n){var r=this._ctx;return this._read(function(u){return Si(r,n,u,r.table.core)})},Qt.prototype.count=function(n){var r=this;return this._read(function(u){var _=r._ctx,C=_.table.core;if(jn(_,!0))return C.count({trans:u,query:{index:wi(_,C.schema),range:_.range}}).then(function(L){return Math.min(L,_.limit)});var R=0;return Si(_,function(){return++R,!1},u,C).then(function(){return R})}).then(n)},Qt.prototype.sortBy=function(n,r){var u=n.split(".").reverse(),_=u[0],C=u.length-1;function R(z,$){return $?R(z[u[$]],$-1):z[_]}var L=this._ctx.dir==="next"?1:-1;function U(z,$){return Xt(R(z,C),R($,C))*L}return this.toArray(function(z){return z.sort(U)}).then(r)},Qt.prototype.toArray=function(n){var r=this;return this._read(function(u){var _=r._ctx;if(_.dir==="next"&&jn(_,!0)&&0<_.limit){var C=_.valueMapper,R=wi(_,_.table.core.schema);return _.table.core.query({trans:u,limit:_.limit,values:!0,query:{index:R,range:_.range}}).then(function(U){return U=U.result,C?U.map(C):U})}var L=[];return Si(_,function(U){return L.push(U)},u,_.table.core).then(function(){return L})},n)},Qt.prototype.offset=function(n){var r=this._ctx;return n<=0||(r.offset+=n,jn(r)?ms(r,function(){var u=n;return function(_,C){return u===0||(u===1?--u:C(function(){_.advance(u),u=0}),!1)}}):ms(r,function(){var u=n;return function(){return--u<0}})),this},Qt.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),ms(this._ctx,function(){var r=n;return function(u,_,C){return--r<=0&&_(C),0<=r}},!0),this},Qt.prototype.until=function(n,r){return ps(this._ctx,function(u,_,C){return!n(u.value)||(_(C),r)}),this},Qt.prototype.first=function(n){return this.limit(1).toArray(function(r){return r[0]}).then(n)},Qt.prototype.last=function(n){return this.reverse().first(n)},Qt.prototype.filter=function(n){var r;return ps(this._ctx,function(u){return n(u.value)}),(r=this._ctx).isMatch=En(r.isMatch,n),this},Qt.prototype.and=function(n){return this.filter(n)},Qt.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},Qt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Qt.prototype.desc=function(){return this.reverse()},Qt.prototype.eachKey=function(n){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(u,_){n(_.key,_)})},Qt.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},Qt.prototype.eachPrimaryKey=function(n){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(u,_){n(_.primaryKey,_)})},Qt.prototype.keys=function(n){var r=this._ctx;r.keysOnly=!r.isMatch;var u=[];return this.each(function(_,C){u.push(C.key)}).then(function(){return u}).then(n)},Qt.prototype.primaryKeys=function(n){var r=this._ctx;if(r.dir==="next"&&jn(r,!0)&&0<r.limit)return this._read(function(_){var C=wi(r,r.table.core.schema);return r.table.core.query({trans:_,values:!1,limit:r.limit,query:{index:C,range:r.range}})}).then(function(_){return _.result}).then(n);r.keysOnly=!r.isMatch;var u=[];return this.each(function(_,C){u.push(C.primaryKey)}).then(function(){return u}).then(n)},Qt.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},Qt.prototype.firstKey=function(n){return this.limit(1).keys(function(r){return r[0]}).then(n)},Qt.prototype.lastKey=function(n){return this.reverse().firstKey(n)},Qt.prototype.distinct=function(){var n=this._ctx,n=n.index&&n.table.schema.idxByName[n.index];if(!n||!n.multi)return this;var r={};return ps(this._ctx,function(C){var _=C.primaryKey.toString(),C=b(r,_);return r[_]=!0,!C}),this},Qt.prototype.modify=function(n){var r=this,u=this._ctx;return this._write(function(_){var C,R,L;L=typeof n=="function"?n:(C=a(n),R=C.length,function(X){for(var rt=!1,ot=0;ot<R;++ot){var at=C[ot],dt=n[at],bt=M(X,at);dt instanceof er?(j(X,at,dt.execute(bt)),rt=!0):bt!==dt&&(j(X,at,dt),rt=!0)}return rt});var U=u.table.core,V=U.schema.primaryKey,z=V.outbound,$=V.extractKey,J=200,V=r.db._options.modifyChunkSize;V&&(J=typeof V=="object"?V[U.name]||V["*"]||200:V);function tt(X,at){var ot=at.failures,at=at.numFailures;Q+=X-at;for(var dt=0,bt=a(ot);dt<bt.length;dt++){var Et=bt[dt];Y.push(ot[Et])}}var Y=[],Q=0,Z=[];return r.clone().primaryKeys().then(function(X){function rt(at){var dt=Math.min(J,X.length-at);return U.getMany({trans:_,keys:X.slice(at,at+dt),cache:"immutable"}).then(function(bt){for(var Et=[],wt=[],Pt=z?[]:null,kt=[],Tt=0;Tt<dt;++Tt){var Dt=bt[Tt],jt={value:p(Dt),primKey:X[at+Tt]};L.call(jt,jt.value,jt)!==!1&&(jt.value==null?kt.push(X[at+Tt]):z||Xt($(Dt),$(jt.value))===0?(wt.push(jt.value),z&&Pt.push(X[at+Tt])):(kt.push(X[at+Tt]),Et.push(jt.value)))}return Promise.resolve(0<Et.length&&U.mutate({trans:_,type:"add",values:Et}).then(function(Ht){for(var Wt in Ht.failures)kt.splice(parseInt(Wt),1);tt(Et.length,Ht)})).then(function(){return(0<wt.length||ot&&typeof n=="object")&&U.mutate({trans:_,type:"put",keys:Pt,values:wt,criteria:ot,changeSpec:typeof n!="function"&&n,isAdditionalChunk:0<at}).then(function(Ht){return tt(wt.length,Ht)})}).then(function(){return(0<kt.length||ot&&n===ys)&&U.mutate({trans:_,type:"delete",keys:kt,criteria:ot,isAdditionalChunk:0<at}).then(function(Ht){return tt(kt.length,Ht)})}).then(function(){return X.length>at+dt&&rt(at+J)})})}var ot=jn(u)&&u.limit===1/0&&(typeof n!="function"||n===ys)&&{index:u.index,range:u.range};return rt(0).then(function(){if(0<Y.length)throw new At("Error modifying one or more objects",Y,Q,Z);return X.length})})})},Qt.prototype.delete=function(){var n=this._ctx,r=n.range;return jn(n)&&(n.isPrimKey||r.type===3)?this._write(function(u){var _=n.table.core.schema.primaryKey,C=r;return n.table.core.count({trans:u,query:{index:_,range:C}}).then(function(R){return n.table.core.mutate({trans:u,type:"deleteRange",range:C}).then(function(L){var U=L.failures;if(L.lastResult,L.results,L=L.numFailures,L)throw new At("Could not delete some values",Object.keys(U).map(function(z){return U[z]}),R-L);return R-L})})}):this.modify(ys)},Qt);function Qt(){}var ys=function(n,r){return r.value=null};function gu(n,r){return n<r?-1:n===r?0:1}function pu(n,r){return r<n?-1:n===r?0:1}function Ne(n,r,u){return n=n instanceof la?new n.Collection(n):n,n._ctx.error=new(u||TypeError)(r),n}function qn(n){return new n.Collection(n,function(){return aa("")}).limit(0)}function xi(n,r,u,_){var C,R,L,U,z,$,J,V=u.length;if(!u.every(function(Q){return typeof Q=="string"}))return Ne(n,Jo);function tt(Q){C=Q==="next"?function(X){return X.toUpperCase()}:function(X){return X.toLowerCase()},R=Q==="next"?function(X){return X.toLowerCase()}:function(X){return X.toUpperCase()},L=Q==="next"?gu:pu;var Z=u.map(function(X){return{lower:R(X),upper:C(X)}}).sort(function(X,rt){return L(X.lower,rt.lower)});U=Z.map(function(X){return X.upper}),z=Z.map(function(X){return X.lower}),J=($=Q)==="next"?"":_}tt("next"),n=new n.Collection(n,function(){return hn(U[0],z[V-1]+_)}),n._ondirectionchange=function(Q){tt(Q)};var Y=0;return n._addAlgorithm(function(Q,Z,X){var rt=Q.key;if(typeof rt!="string")return!1;var ot=R(rt);if(r(ot,z,Y))return!0;for(var at=null,dt=Y;dt<V;++dt){var bt=function(Et,wt,Pt,kt,Tt,Dt){for(var jt=Math.min(Et.length,kt.length),Ht=-1,Wt=0;Wt<jt;++Wt){var Ge=wt[Wt];if(Ge!==kt[Wt])return Tt(Et[Wt],Pt[Wt])<0?Et.substr(0,Wt)+Pt[Wt]+Pt.substr(Wt+1):Tt(Et[Wt],kt[Wt])<0?Et.substr(0,Wt)+kt[Wt]+Pt.substr(Wt+1):0<=Ht?Et.substr(0,Ht)+wt[Ht]+Pt.substr(Ht+1):null;Tt(Et[Wt],Ge)<0&&(Ht=Wt)}return jt<kt.length&&Dt==="next"?Et+Pt.substr(Et.length):jt<Et.length&&Dt==="prev"?Et.substr(0,Pt.length):Ht<0?null:Et.substr(0,Ht)+kt[Ht]+Pt.substr(Ht+1)}(rt,ot,U[dt],z[dt],L,$);bt===null&&at===null?Y=dt+1:(at===null||0<L(at,bt))&&(at=bt)}return Z(at!==null?function(){Q.continue(at+J)}:X),!1}),n}function hn(n,r,u,_){return{type:2,lower:n,upper:r,lowerOpen:u,upperOpen:_}}function aa(n){return{type:1,lower:n,upper:n}}var la=(Object.defineProperty(_e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),_e.prototype.between=function(n,r,u,_){u=u!==!1,_=_===!0;try{return 0<this._cmp(n,r)||this._cmp(n,r)===0&&(u||_)&&(!u||!_)?qn(this):new this.Collection(this,function(){return hn(n,r,!u,!_)})}catch{return Ne(this,Qe)}},_e.prototype.equals=function(n){return n==null?Ne(this,Qe):new this.Collection(this,function(){return aa(n)})},_e.prototype.above=function(n){return n==null?Ne(this,Qe):new this.Collection(this,function(){return hn(n,void 0,!0)})},_e.prototype.aboveOrEqual=function(n){return n==null?Ne(this,Qe):new this.Collection(this,function(){return hn(n,void 0,!1)})},_e.prototype.below=function(n){return n==null?Ne(this,Qe):new this.Collection(this,function(){return hn(void 0,n,!1,!0)})},_e.prototype.belowOrEqual=function(n){return n==null?Ne(this,Qe):new this.Collection(this,function(){return hn(void 0,n)})},_e.prototype.startsWith=function(n){return typeof n!="string"?Ne(this,Jo):this.between(n,n+Tn,!0,!0)},_e.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):xi(this,function(r,u){return r.indexOf(u[0])===0},[n],Tn)},_e.prototype.equalsIgnoreCase=function(n){return xi(this,function(r,u){return r===u[0]},[n],"")},_e.prototype.anyOfIgnoreCase=function(){var n=et.apply(it,arguments);return n.length===0?qn(this):xi(this,function(r,u){return u.indexOf(r)!==-1},n,"")},_e.prototype.startsWithAnyOfIgnoreCase=function(){var n=et.apply(it,arguments);return n.length===0?qn(this):xi(this,function(r,u){return u.some(function(_){return r.indexOf(_)===0})},n,Tn)},_e.prototype.anyOf=function(){var n=this,r=et.apply(it,arguments),u=this._cmp;try{r.sort(u)}catch{return Ne(this,Qe)}if(r.length===0)return qn(this);var _=new this.Collection(this,function(){return hn(r[0],r[r.length-1])});_._ondirectionchange=function(R){u=R==="next"?n._ascending:n._descending,r.sort(u)};var C=0;return _._addAlgorithm(function(R,L,U){for(var z=R.key;0<u(z,r[C]);)if(++C===r.length)return L(U),!1;return u(z,r[C])===0||(L(function(){R.continue(r[C])}),!1)}),_},_e.prototype.notEqual=function(n){return this.inAnyRange([[-1/0,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},_e.prototype.noneOf=function(){var n=et.apply(it,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return Ne(this,Qe)}var r=n.reduce(function(u,_){return u?u.concat([[u[u.length-1][1],_]]):[[-1/0,_]]},null);return r.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},_e.prototype.inAnyRange=function(rt,r){var u=this,_=this._cmp,C=this._ascending,R=this._descending,L=this._min,U=this._max;if(rt.length===0)return qn(this);if(!rt.every(function(ot){return ot[0]!==void 0&&ot[1]!==void 0&&C(ot[0],ot[1])<=0}))return Ne(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",st.InvalidArgument);var z=!r||r.includeLowers!==!1,$=r&&r.includeUppers===!0,J,V=C;function tt(ot,at){return V(ot[0],at[0])}try{(J=rt.reduce(function(ot,at){for(var dt=0,bt=ot.length;dt<bt;++dt){var Et=ot[dt];if(_(at[0],Et[1])<0&&0<_(at[1],Et[0])){Et[0]=L(Et[0],at[0]),Et[1]=U(Et[1],at[1]);break}}return dt===bt&&ot.push(at),ot},[])).sort(tt)}catch{return Ne(this,Qe)}var Y=0,Q=$?function(ot){return 0<C(ot,J[Y][1])}:function(ot){return 0<=C(ot,J[Y][1])},Z=z?function(ot){return 0<R(ot,J[Y][0])}:function(ot){return 0<=R(ot,J[Y][0])},X=Q,rt=new this.Collection(this,function(){return hn(J[0][0],J[J.length-1][1],!z,!$)});return rt._ondirectionchange=function(ot){V=ot==="next"?(X=Q,C):(X=Z,R),J.sort(tt)},rt._addAlgorithm(function(ot,at,dt){for(var bt,Et=ot.key;X(Et);)if(++Y===J.length)return at(dt),!1;return!Q(bt=Et)&&!Z(bt)||(u._cmp(Et,J[Y][1])===0||u._cmp(Et,J[Y][0])===0||at(function(){V===C?ot.continue(J[Y][0]):ot.continue(J[Y][1])}),!1)}),rt},_e.prototype.startsWithAnyOf=function(){var n=et.apply(it,arguments);return n.every(function(r){return typeof r=="string"})?n.length===0?qn(this):this.inAnyRange(n.map(function(r){return[r,r+Tn]})):Ne(this,"startsWithAnyOf() only works with strings")},_e);function _e(){}function qe(n){return le(function(r){return nr(r),n(r.target.error),!1})}function nr(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var rr="storagemutated",vs="x-storagemutated-1",fn=Zn(null,rr),mu=(Ve.prototype._lock=function(){return S(!It.global),++this._reculock,this._reculock!==1||It.global||(It.lockOwnerFor=this),this},Ve.prototype._unlock=function(){if(S(!It.global),--this._reculock==0)for(It.global||(It.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var n=this._blockedFuncs.shift();try{Pn(n[1],n[0])}catch{}}return this},Ve.prototype._locked=function(){return this._reculock&&It.lockOwnerFor!==this},Ve.prototype.create=function(n){var r=this;if(!this.mode)return this;var u=this.db.idbdb,_=this.db._state.dbOpenError;if(S(!this.idbtrans),!n&&!u)switch(_&&_.name){case"DatabaseClosedError":throw new st.DatabaseClosed(_);case"MissingAPIError":throw new st.MissingAPI(_.message,_);default:throw new st.OpenFailed(_)}if(!this.active)throw new st.TransactionInactive;return S(this._completion._state===null),(n=this.idbtrans=n||(this.db.core||u).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=le(function(C){nr(C),r._reject(n.error)}),n.onabort=le(function(C){nr(C),r.active&&r._reject(new st.Abort(n.error)),r.active=!1,r.on("abort").fire(C)}),n.oncomplete=le(function(){r.active=!1,r._resolve(),"mutatedParts"in n&&fn.storagemutated.fire(n.mutatedParts)}),this},Ve.prototype._promise=function(n,r,u){var _=this;if(n==="readwrite"&&this.mode!=="readwrite")return he(new st.ReadOnly("Transaction is readonly"));if(!this.active)return he(new st.TransactionInactive);if(this._locked())return new Ft(function(R,L){_._blockedFuncs.push([function(){_._promise(n,r,u).then(R,L)},It])});if(u)return ln(function(){var R=new Ft(function(L,U){_._lock();var z=r(L,U,_);z&&z.then&&z.then(L,U)});return R.finally(function(){return _._unlock()}),R._lib=!0,R});var C=new Ft(function(R,L){var U=r(R,L,_);U&&U.then&&U.then(R,L)});return C._lib=!0,C},Ve.prototype._root=function(){return this.parent?this.parent._root():this},Ve.prototype.waitFor=function(n){var r,u=this._root(),_=Ft.resolve(n);u._waitingFor?u._waitingFor=u._waitingFor.then(function(){return _}):(u._waitingFor=_,u._waitingQueue=[],r=u.idbtrans.objectStore(u.storeNames[0]),function R(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(r.get(-1/0).onsuccess=R)}());var C=u._waitingFor;return new Ft(function(R,L){_.then(function(U){return u._waitingQueue.push(le(R.bind(null,U)))},function(U){return u._waitingQueue.push(le(L.bind(null,U)))}).finally(function(){u._waitingFor===C&&(u._waitingFor=null)})})},Ve.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new st.Abort))},Ve.prototype.table=function(n){var r=this._memoizedTables||(this._memoizedTables={});if(b(r,n))return r[n];var u=this.schema[n];if(!u)throw new st.NotFound("Table "+n+" not part of transaction");return u=new this.db.Table(n,u,this),u.core=this.db.core.table(n),r[n]=u},Ve);function Ve(){}function _s(n,r,u,_,C,R,L){return{name:n,keyPath:r,unique:u,multi:_,auto:C,compound:R,src:(u&&!L?"&":"")+(_?"*":"")+(C?"++":"")+ca(r)}}function ca(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function bs(n,r,u){return{name:n,primKey:r,indexes:u,mappedClass:null,idxByName:(_=function(C){return[C.name,C]},u.reduce(function(C,R,L){return L=_(R,L),L&&(C[L[0]]=L[1]),C},{}))};var _}var ir=function(n){try{return n.only([[]]),ir=function(){return[[]]},[[]]}catch{return ir=function(){return Tn},Tn}};function ws(n){return n==null?function(){}:typeof n=="string"?(r=n).split(".").length===1?function(u){return u[r]}:function(u){return M(u,r)}:function(u){return M(u,n)};var r}function ua(n){return[].slice.call(n)}var yu=0;function sr(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function vu(n,r,z){function _(X){if(X.type===3)return null;if(X.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Y=X.lower,Q=X.upper,Z=X.lowerOpen,X=X.upperOpen;return Y===void 0?Q===void 0?null:r.upperBound(Q,!!X):Q===void 0?r.lowerBound(Y,!!Z):r.bound(Y,Q,!!Z,!!X)}function C(tt){var Y,Q=tt.name;return{name:Q,schema:tt,mutate:function(Z){var X=Z.trans,rt=Z.type,ot=Z.keys,at=Z.values,dt=Z.range;return new Promise(function(bt,Et){bt=le(bt);var wt=X.objectStore(Q),Pt=wt.keyPath==null,kt=rt==="put"||rt==="add";if(!kt&&rt!=="delete"&&rt!=="deleteRange")throw new Error("Invalid operation type: "+rt);var Tt,Dt=(ot||at||{length:1}).length;if(ot&&at&&ot.length!==at.length)throw new Error("Given keys array must have same length as given values array.");if(Dt===0)return bt({numFailures:0,failures:{},results:[],lastResult:void 0});function jt(Re){++Ge,nr(Re)}var Ht=[],Wt=[],Ge=0;if(rt==="deleteRange"){if(dt.type===4)return bt({numFailures:Ge,failures:Wt,results:[],lastResult:void 0});dt.type===3?Ht.push(Tt=wt.clear()):Ht.push(Tt=wt.delete(_(dt)))}else{var Pt=kt?Pt?[at,ot]:[at,null]:[ot,null],Kt=Pt[0],Ce=Pt[1];if(kt)for(var Pe=0;Pe<Dt;++Pe)Ht.push(Tt=Ce&&Ce[Pe]!==void 0?wt[rt](Kt[Pe],Ce[Pe]):wt[rt](Kt[Pe])),Tt.onerror=jt;else for(Pe=0;Pe<Dt;++Pe)Ht.push(Tt=wt[rt](Kt[Pe])),Tt.onerror=jt}function Ni(Re){Re=Re.target.result,Ht.forEach(function(kn,Bs){return kn.error!=null&&(Wt[Bs]=kn.error)}),bt({numFailures:Ge,failures:Wt,results:rt==="delete"?ot:Ht.map(function(kn){return kn.result}),lastResult:Re})}Tt.onerror=function(Re){jt(Re),Ni(Re)},Tt.onsuccess=Ni})},getMany:function(Z){var X=Z.trans,rt=Z.keys;return new Promise(function(ot,at){ot=le(ot);for(var dt,bt=X.objectStore(Q),Et=rt.length,wt=new Array(Et),Pt=0,kt=0,Tt=function(Ht){Ht=Ht.target,wt[Ht._pos]=Ht.result,++kt===Pt&&ot(wt)},Dt=qe(at),jt=0;jt<Et;++jt)rt[jt]!=null&&((dt=bt.get(rt[jt]))._pos=jt,dt.onsuccess=Tt,dt.onerror=Dt,++Pt);Pt===0&&ot(wt)})},get:function(Z){var X=Z.trans,rt=Z.key;return new Promise(function(ot,at){ot=le(ot);var dt=X.objectStore(Q).get(rt);dt.onsuccess=function(bt){return ot(bt.target.result)},dt.onerror=qe(at)})},query:(Y=$,function(Z){return new Promise(function(X,rt){X=le(X);var ot,at,dt,Pt=Z.trans,bt=Z.values,Et=Z.limit,Tt=Z.query,wt=Et===1/0?void 0:Et,kt=Tt.index,Tt=Tt.range,Pt=Pt.objectStore(Q),kt=kt.isPrimaryKey?Pt:Pt.index(kt.name),Tt=_(Tt);if(Et===0)return X({result:[]});Y?((wt=bt?kt.getAll(Tt,wt):kt.getAllKeys(Tt,wt)).onsuccess=function(Dt){return X({result:Dt.target.result})},wt.onerror=qe(rt)):(ot=0,at=!bt&&"openKeyCursor"in kt?kt.openKeyCursor(Tt):kt.openCursor(Tt),dt=[],at.onsuccess=function(Dt){var jt=at.result;return jt?(dt.push(bt?jt.value:jt.primaryKey),++ot===Et?X({result:dt}):void jt.continue()):X({result:dt})},at.onerror=qe(rt))})}),openCursor:function(Z){var X=Z.trans,rt=Z.values,ot=Z.query,at=Z.reverse,dt=Z.unique;return new Promise(function(bt,Et){bt=le(bt);var kt=ot.index,wt=ot.range,Pt=X.objectStore(Q),Pt=kt.isPrimaryKey?Pt:Pt.index(kt.name),kt=at?dt?"prevunique":"prev":dt?"nextunique":"next",Tt=!rt&&"openKeyCursor"in Pt?Pt.openKeyCursor(_(wt),kt):Pt.openCursor(_(wt),kt);Tt.onerror=qe(Et),Tt.onsuccess=le(function(Dt){var jt,Ht,Wt,Ge,Kt=Tt.result;Kt?(Kt.___id=++yu,Kt.done=!1,jt=Kt.continue.bind(Kt),Ht=(Ht=Kt.continuePrimaryKey)&&Ht.bind(Kt),Wt=Kt.advance.bind(Kt),Ge=function(){throw new Error("Cursor not stopped")},Kt.trans=X,Kt.stop=Kt.continue=Kt.continuePrimaryKey=Kt.advance=function(){throw new Error("Cursor not started")},Kt.fail=le(Et),Kt.next=function(){var Ce=this,Pe=1;return this.start(function(){return Pe--?Ce.continue():Ce.stop()}).then(function(){return Ce})},Kt.start=function(Ce){function Pe(){if(Tt.result)try{Ce()}catch(Re){Kt.fail(Re)}else Kt.done=!0,Kt.start=function(){throw new Error("Cursor behind last entry")},Kt.stop()}var Ni=new Promise(function(Re,kn){Re=le(Re),Tt.onerror=qe(kn),Kt.fail=kn,Kt.stop=function(Bs){Kt.stop=Kt.continue=Kt.continuePrimaryKey=Kt.advance=Ge,Re(Bs)}});return Tt.onsuccess=le(function(Re){Tt.onsuccess=Pe,Pe()}),Kt.continue=jt,Kt.continuePrimaryKey=Ht,Kt.advance=Wt,Pe(),Ni},bt(Kt)):bt(null)},Et)})},count:function(Z){var X=Z.query,rt=Z.trans,ot=X.index,at=X.range;return new Promise(function(dt,bt){var Et=rt.objectStore(Q),wt=ot.isPrimaryKey?Et:Et.index(ot.name),Et=_(at),wt=Et?wt.count(Et):wt.count();wt.onsuccess=le(function(Pt){return dt(Pt.target.result)}),wt.onerror=qe(bt)})}}}var R,L,U,J=(L=z,U=ua((R=n).objectStoreNames),{schema:{name:R.name,tables:U.map(function(tt){return L.objectStore(tt)}).map(function(tt){var Y=tt.keyPath,X=tt.autoIncrement,Q=c(Y),Z={},X={name:tt.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Y==null,compound:Q,keyPath:Y,autoIncrement:X,unique:!0,extractKey:ws(Y)},indexes:ua(tt.indexNames).map(function(rt){return tt.index(rt)}).map(function(dt){var ot=dt.name,at=dt.unique,bt=dt.multiEntry,dt=dt.keyPath,bt={name:ot,compound:c(dt),keyPath:dt,unique:at,multiEntry:bt,extractKey:ws(dt)};return Z[sr(dt)]=bt}),getIndexByKeyPath:function(rt){return Z[sr(rt)]}};return Z[":id"]=X.primaryKey,Y!=null&&(Z[sr(Y)]=X.primaryKey),X})},hasGetAll:0<U.length&&"getAll"in L.objectStore(U[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),z=J.schema,$=J.hasGetAll,J=z.tables.map(C),V={};return J.forEach(function(tt){return V[tt.name]=tt}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(tt){if(!V[tt])throw new Error("Table '".concat(tt,"' not found"));return V[tt]},MIN_KEY:-1/0,MAX_KEY:ir(r),schema:z}}function _u(n,r,u,_){var C=u.IDBKeyRange;return u.indexedDB,{dbcore:(_=vu(r,C,_),n.dbcore.reduce(function(R,L){return L=L.create,s(s({},R),L(R))},_))}}function Ci(n,_){var u=_.db,_=_u(n._middlewares,u,n._deps,_);n.core=_.dbcore,n.tables.forEach(function(C){var R=C.name;n.core.schema.tables.some(function(L){return L.name===R})&&(C.core=n.core.table(R),n[R]instanceof n.Table&&(n[R].core=C.core))})}function Pi(n,r,u,_){u.forEach(function(C){var R=_[C];r.forEach(function(L){var U=function z($,J){return T($,J)||($=g($))&&z($,J)}(L,C);(!U||"value"in U&&U.value===void 0)&&(L===n.Transaction.prototype||L instanceof n.Transaction?y(L,C,{get:function(){return this.table(C)},set:function(z){v(this,C,{value:z,writable:!0,configurable:!0,enumerable:!0})}}):L[C]=new n.Table(C,R))})})}function Ss(n,r){r.forEach(function(u){for(var _ in u)u[_]instanceof n.Table&&delete u[_]})}function bu(n,r){return n._cfg.version-r._cfg.version}function wu(n,r,u,_){var C=n._dbSchema;u.objectStoreNames.contains("$meta")&&!C.$meta&&(C.$meta=bs("$meta",fa("")[0],[]),n._storeNames.push("$meta"));var R=n._createTransaction("readwrite",n._storeNames,C);R.create(u),R._completion.catch(_);var L=R._reject.bind(R),U=It.transless||It;ln(function(){return It.trans=R,It.transless=U,r!==0?(Ci(n,u),$=r,((z=R).storeNames.includes("$meta")?z.table("$meta").get("version").then(function(J){return J??$}):Ft.resolve($)).then(function(J){return tt=J,Y=R,Q=u,Z=[],J=(V=n)._versions,X=V._dbSchema=Ei(0,V.idbdb,Q),(J=J.filter(function(rt){return rt._cfg.version>=tt})).length!==0?(J.forEach(function(rt){Z.push(function(){var ot=X,at=rt._cfg.dbschema;Ai(V,ot,Q),Ai(V,at,Q),X=V._dbSchema=at;var dt=xs(ot,at);dt.add.forEach(function(kt){Cs(Q,kt[0],kt[1].primKey,kt[1].indexes)}),dt.change.forEach(function(kt){if(kt.recreate)throw new st.Upgrade("Not yet support for changing primary key");var Tt=Q.objectStore(kt.name);kt.add.forEach(function(Dt){return Ti(Tt,Dt)}),kt.change.forEach(function(Dt){Tt.deleteIndex(Dt.name),Ti(Tt,Dt)}),kt.del.forEach(function(Dt){return Tt.deleteIndex(Dt)})});var bt=rt._cfg.contentUpgrade;if(bt&&rt._cfg.version>tt){Ci(V,Q),Y._memoizedTables={};var Et=D(at);dt.del.forEach(function(kt){Et[kt]=ot[kt]}),Ss(V,[V.Transaction.prototype]),Pi(V,[V.Transaction.prototype],a(Et),Et),Y.schema=Et;var wt,Pt=ht(bt);return Pt&&Un(),dt=Ft.follow(function(){var kt;(wt=bt(Y))&&Pt&&(kt=cn.bind(null,null),wt.then(kt,kt))}),wt&&typeof wt.then=="function"?Ft.resolve(wt):dt.then(function(){return wt})}}),Z.push(function(ot){var at,dt,bt=rt._cfg.dbschema;at=bt,dt=ot,[].slice.call(dt.db.objectStoreNames).forEach(function(Et){return at[Et]==null&&dt.db.deleteObjectStore(Et)}),Ss(V,[V.Transaction.prototype]),Pi(V,[V.Transaction.prototype],V._storeNames,V._dbSchema),Y.schema=V._dbSchema}),Z.push(function(ot){V.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(V.idbdb.version/10)===rt._cfg.version?(V.idbdb.deleteObjectStore("$meta"),delete V._dbSchema.$meta,V._storeNames=V._storeNames.filter(function(at){return at!=="$meta"})):ot.objectStore("$meta").put(rt._cfg.version,"version"))})}),function rt(){return Z.length?Ft.resolve(Z.shift()(Y.idbtrans)).then(rt):Ft.resolve()}().then(function(){ha(X,Q)})):Ft.resolve();var V,tt,Y,Q,Z,X}).catch(L)):(a(C).forEach(function(J){Cs(u,J,C[J].primKey,C[J].indexes)}),Ci(n,u),void Ft.follow(function(){return n.on.populate.fire(R)}).catch(L));var z,$})}function Su(n,r){ha(n._dbSchema,r),r.db.version%10!=0||r.objectStoreNames.contains("$meta")||r.db.createObjectStore("$meta").add(Math.ceil(r.db.version/10-1),"version");var u=Ei(0,n.idbdb,r);Ai(n,n._dbSchema,r);for(var _=0,C=xs(u,n._dbSchema).change;_<C.length;_++){var R=function(L){if(L.change.length||L.recreate)return console.warn("Unable to patch indexes of table ".concat(L.name," because it has changes on the type of index or primary key.")),{value:void 0};var U=r.objectStore(L.name);L.add.forEach(function(z){pt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(L.name,".").concat(z.src)),Ti(U,z)})}(C[_]);if(typeof R=="object")return R.value}}function xs(n,r){var u,_={del:[],add:[],change:[]};for(u in n)r[u]||_.del.push(u);for(u in r){var C=n[u],R=r[u];if(C){var L={name:u,def:R,recreate:!1,del:[],add:[],change:[]};if(""+(C.primKey.keyPath||"")!=""+(R.primKey.keyPath||"")||C.primKey.auto!==R.primKey.auto)L.recreate=!0,_.change.push(L);else{var U=C.idxByName,z=R.idxByName,$=void 0;for($ in U)z[$]||L.del.push($);for($ in z){var J=U[$],V=z[$];J?J.src!==V.src&&L.change.push(V):L.add.push(V)}(0<L.del.length||0<L.add.length||0<L.change.length)&&_.change.push(L)}}else _.add.push([u,R])}return _}function Cs(n,r,u,_){var C=n.db.createObjectStore(r,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return _.forEach(function(R){return Ti(C,R)}),C}function ha(n,r){a(n).forEach(function(u){r.db.objectStoreNames.contains(u)||(pt&&console.debug("Dexie: Creating missing table",u),Cs(r,u,n[u].primKey,n[u].indexes))})}function Ti(n,r){n.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function Ei(n,r,u){var _={};return m(r.objectStoreNames,0).forEach(function(C){for(var R=u.objectStore(C),L=_s(ca($=R.keyPath),$||"",!0,!1,!!R.autoIncrement,$&&typeof $!="string",!0),U=[],z=0;z<R.indexNames.length;++z){var J=R.index(R.indexNames[z]),$=J.keyPath,J=_s(J.name,$,!!J.unique,!!J.multiEntry,!1,$&&typeof $!="string",!1);U.push(J)}_[C]=bs(C,L,U)}),_}function Ai(n,r,u){for(var _=u.db.objectStoreNames,C=0;C<_.length;++C){var R=_[C],L=u.objectStore(R);n._hasGetAll="getAll"in L;for(var U=0;U<L.indexNames.length;++U){var z=L.indexNames[U],$=L.index(z).keyPath,J=typeof $=="string"?$:"["+m($).join("+")+"]";!r[R]||($=r[R].idxByName[J])&&($.name=z,delete r[R].idxByName[J],r[R].idxByName[z]=$)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function fa(n){return n.split(",").map(function(r,u){var _=(r=r.trim()).replace(/([&*]|\+\+)/g,""),C=/^\[/.test(_)?_.match(/^\[(.*)\]$/)[1].split("+"):_;return _s(_,C||null,/\&/.test(r),/\*/.test(r),/\+\+/.test(r),c(C),u===0)})}var xu=(Ri.prototype._parseStoresSpec=function(n,r){a(n).forEach(function(u){if(n[u]!==null){var _=fa(n[u]),C=_.shift();if(C.unique=!0,C.multi)throw new st.Schema("Primary key cannot be multi-valued");_.forEach(function(R){if(R.auto)throw new st.Schema("Only primary key can be marked as autoIncrement (++)");if(!R.keyPath)throw new st.Schema("Index must have a name and cannot be an empty string")}),r[u]=bs(u,C,_)}})},Ri.prototype.stores=function(u){var r=this.db;this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,u):u;var u=r._versions,_={},C={};return u.forEach(function(R){h(_,R._cfg.storesSource),C=R._cfg.dbschema={},R._parseStoresSpec(_,C)}),r._dbSchema=C,Ss(r,[r._allTables,r,r.Transaction.prototype]),Pi(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],a(C),C),r._storeNames=a(C),this},Ri.prototype.upgrade=function(n){return this._cfg.contentUpgrade=vt(this._cfg.contentUpgrade||G,n),this},Ri);function Ri(){}function Ps(n,r){var u=n._dbNamesDB;return u||(u=n._dbNamesDB=new Je(_i,{addons:[],indexedDB:n,IDBKeyRange:r})).version(1).stores({dbnames:"name"}),u.table("dbnames")}function Ts(n){return n&&typeof n.databases=="function"}function Es(n){return ln(function(){return It.letThrough=!0,n()})}function As(n){return!("from"in n)}var xe=function(n,r){if(!this){var u=new xe;return n&&"d"in n&&h(u,n),u}h(this,arguments.length?{d:1,from:n,to:1<arguments.length?r:n}:{d:0})};function or(n,r,u){var _=Xt(r,u);if(!isNaN(_)){if(0<_)throw RangeError();if(As(n))return h(n,{from:r,to:u,d:1});var C=n.l,_=n.r;if(Xt(u,n.from)<0)return C?or(C,r,u):n.l={from:r,to:u,d:1,l:null,r:null},ga(n);if(0<Xt(r,n.to))return _?or(_,r,u):n.r={from:r,to:u,d:1,l:null,r:null},ga(n);Xt(r,n.from)<0&&(n.from=r,n.l=null,n.d=_?_.d+1:1),0<Xt(u,n.to)&&(n.to=u,n.r=null,n.d=n.l?n.l.d+1:1),u=!n.r,C&&!n.l&&ar(n,C),_&&u&&ar(n,_)}}function ar(n,r){As(r)||function u(_,z){var R=z.from,L=z.to,U=z.l,z=z.r;or(_,R,L),U&&u(_,U),z&&u(_,z)}(n,r)}function da(n,r){var u=ki(r),_=u.next();if(_.done)return!1;for(var C=_.value,R=ki(n),L=R.next(C.from),U=L.value;!_.done&&!L.done;){if(Xt(U.from,C.to)<=0&&0<=Xt(U.to,C.from))return!0;Xt(C.from,U.from)<0?C=(_=u.next(U.from)).value:U=(L=R.next(C.from)).value}return!1}function ki(n){var r=As(n)?null:{s:0,n};return{next:function(u){for(var _=0<arguments.length;r;)switch(r.s){case 0:if(r.s=1,_)for(;r.n.l&&Xt(u,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!_||Xt(u,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function ga(n){var r,u,_=(((r=n.r)===null||r===void 0?void 0:r.d)||0)-(((u=n.l)===null||u===void 0?void 0:u.d)||0),C=1<_?"r":_<-1?"l":"";C&&(r=C=="r"?"l":"r",u=s({},n),_=n[C],n.from=_.from,n.to=_.to,n[C]=_[C],u[C]=_[r],(n[r]=u).d=pa(u)),n.d=pa(n)}function pa(u){var r=u.r,u=u.l;return(r?u?Math.max(r.d,u.d):r.d:u?u.d:0)+1}function Oi(n,r){return a(r).forEach(function(u){n[u]?ar(n[u],r[u]):n[u]=function _(C){var R,L,U={};for(R in C)b(C,R)&&(L=C[R],U[R]=!L||typeof L!="object"||k.has(L.constructor)?L:_(L));return U}(r[u])}),n}function Rs(n,r){return n.all||r.all||Object.keys(n).some(function(u){return r[u]&&da(r[u],n[u])})}x(xe.prototype,((Ue={add:function(n){return ar(this,n),this},addKey:function(n){return or(this,n,n),this},addKeys:function(n){var r=this;return n.forEach(function(u){return or(r,u,u)}),this},hasKey:function(n){var r=ki(this).next(n).value;return r&&Xt(r.from,n)<=0&&0<=Xt(r.to,n)}})[N]=function(){return ki(this)},Ue));var An={},ks={},Os=!1;function Fi(n){Oi(ks,n),Os||(Os=!0,setTimeout(function(){Os=!1,Fs(ks,!(ks={}))},0))}function Fs(n,r){r===void 0&&(r=!1);var u=new Set;if(n.all)for(var _=0,C=Object.values(An);_<C.length;_++)ma(L=C[_],n,u,r);else for(var R in n){var L,U=/^idb\:\/\/(.*)\/(.*)\//.exec(R);U&&(R=U[1],U=U[2],(L=An["idb://".concat(R,"/").concat(U)])&&ma(L,n,u,r))}u.forEach(function(z){return z()})}function ma(n,r,u,_){for(var C=[],R=0,L=Object.entries(n.queries.query);R<L.length;R++){for(var U=L[R],z=U[0],$=[],J=0,V=U[1];J<V.length;J++){var tt=V[J];Rs(r,tt.obsSet)?tt.subscribers.forEach(function(X){return u.add(X)}):_&&$.push(tt)}_&&C.push([z,$])}if(_)for(var Y=0,Q=C;Y<Q.length;Y++){var Z=Q[Y],z=Z[0],$=Z[1];n.queries.query[z]=$}}function Cu(n){var r=n._state,u=n._deps.indexedDB;if(r.isBeingOpened||n.idbdb)return r.dbReadyPromise.then(function(){return r.dbOpenError?he(r.dbOpenError):n});r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var _=r.openCanceller,C=Math.round(10*n.verno),R=!1;function L(){if(r.openCanceller!==_)throw new st.DatabaseClosed("db.open() was cancelled")}function U(){return new Ft(function(tt,Y){if(L(),!u)throw new st.MissingAPI;var Q=n.name,Z=r.autoSchema||!C?u.open(Q):u.open(Q,C);if(!Z)throw new st.MissingAPI;Z.onerror=qe(Y),Z.onblocked=le(n._fireOnBlocked),Z.onupgradeneeded=le(function(X){var rt;J=Z.transaction,r.autoSchema&&!n._options.allowEmptyDB?(Z.onerror=nr,J.abort(),Z.result.close(),(rt=u.deleteDatabase(Q)).onsuccess=rt.onerror=le(function(){Y(new st.NoSuchDatabase("Database ".concat(Q," doesnt exist")))})):(J.onerror=qe(Y),X=X.oldVersion>Math.pow(2,62)?0:X.oldVersion,V=X<1,n.idbdb=Z.result,R&&Su(n,J),wu(n,X/10,J,Y))},Y),Z.onsuccess=le(function(){J=null;var X,rt,ot,at,dt,bt=n.idbdb=Z.result,Et=m(bt.objectStoreNames);if(0<Et.length)try{var wt=bt.transaction((at=Et).length===1?at[0]:at,"readonly");if(r.autoSchema)rt=bt,ot=wt,(X=n).verno=rt.version/10,ot=X._dbSchema=Ei(0,rt,ot),X._storeNames=m(rt.objectStoreNames,0),Pi(X,[X._allTables],a(ot),ot);else if(Ai(n,n._dbSchema,wt),((dt=xs(Ei(0,(dt=n).idbdb,wt),dt._dbSchema)).add.length||dt.change.some(function(Pt){return Pt.add.length||Pt.change.length}))&&!R)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),bt.close(),C=bt.version+1,R=!0,tt(U());Ci(n,wt)}catch{}Kn.push(n),bt.onversionchange=le(function(Pt){r.vcFired=!0,n.on("versionchange").fire(Pt)}),bt.onclose=le(function(Pt){n.on("close").fire(Pt)}),V&&(dt=n._deps,wt=Q,bt=dt.indexedDB,dt=dt.IDBKeyRange,Ts(bt)||wt===_i||Ps(bt,dt).put({name:wt}).catch(G)),tt()},Y)}).catch(function(tt){switch(tt==null?void 0:tt.name){case"UnknownError":if(0<r.PR1398_maxLoop)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),U();break;case"VersionError":if(0<C)return C=0,U()}return Ft.reject(tt)})}var z,$=r.dbReadyResolve,J=null,V=!1;return Ft.race([_,(typeof navigator>"u"?Ft.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(tt){function Y(){return indexedDB.databases().finally(tt)}z=setInterval(Y,100),Y()}).finally(function(){return clearInterval(z)}):Promise.resolve()).then(U)]).then(function(){return L(),r.onReadyBeingFired=[],Ft.resolve(Es(function(){return n.on.ready.fire(n.vip)})).then(function tt(){if(0<r.onReadyBeingFired.length){var Y=r.onReadyBeingFired.reduce(vt,G);return r.onReadyBeingFired=[],Ft.resolve(Es(function(){return Y(n.vip)})).then(tt)}})}).finally(function(){r.openCanceller===_&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(function(tt){r.dbOpenError=tt;try{J&&J.abort()}catch{}return _===r.openCanceller&&n._close(),he(tt)}).finally(function(){r.openComplete=!0,$()}).then(function(){var tt;return V&&(tt={},n.tables.forEach(function(Y){Y.schema.indexes.forEach(function(Q){Q.name&&(tt["idb://".concat(n.name,"/").concat(Y.name,"/").concat(Q.name)]=new xe(-1/0,[[[]]]))}),tt["idb://".concat(n.name,"/").concat(Y.name,"/")]=tt["idb://".concat(n.name,"/").concat(Y.name,"/:dels")]=new xe(-1/0,[[[]]])}),fn(rr).fire(tt),Fs(tt,!0)),n})}function Ms(n){function r(R){return n.next(R)}var u=C(r),_=C(function(R){return n.throw(R)});function C(R){return function(z){var U=R(z),z=U.value;return U.done?z:z&&typeof z.then=="function"?z.then(u,_):c(z)?Promise.all(z).then(u,_):u(z)}}return C(r)()}function Mi(n,r,u){for(var _=c(n)?n.slice():[n],C=0;C<u;++C)_.push(r);return _}var Pu={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(n){return s(s({},n),{table:function(r){var u=n.table(r),_=u.schema,C={},R=[];function L(V,tt,Y){var Q=sr(V),Z=C[Q]=C[Q]||[],X=V==null?0:typeof V=="string"?1:V.length,rt=0<tt,rt=s(s({},Y),{name:rt?"".concat(Q,"(virtual-from:").concat(Y.name,")"):Y.name,lowLevelIndex:Y,isVirtual:rt,keyTail:tt,keyLength:X,extractKey:ws(V),unique:!rt&&Y.unique});return Z.push(rt),rt.isPrimaryKey||R.push(rt),1<X&&L(X===2?V[0]:V.slice(0,X-1),tt+1,Y),Z.sort(function(ot,at){return ot.keyTail-at.keyTail}),rt}r=L(_.primaryKey.keyPath,0,_.primaryKey),C[":id"]=[r];for(var U=0,z=_.indexes;U<z.length;U++){var $=z[U];L($.keyPath,0,$)}function J(V){var tt,Y=V.query.index;return Y.isVirtual?s(s({},V),{query:{index:Y.lowLevelIndex,range:(tt=V.query.range,Y=Y.keyTail,{type:tt.type===1?2:tt.type,lower:Mi(tt.lower,tt.lowerOpen?n.MAX_KEY:n.MIN_KEY,Y),lowerOpen:!0,upper:Mi(tt.upper,tt.upperOpen?n.MIN_KEY:n.MAX_KEY,Y),upperOpen:!0})}}):V}return s(s({},u),{schema:s(s({},_),{primaryKey:r,indexes:R,getIndexByKeyPath:function(V){return(V=C[sr(V)])&&V[0]}}),count:function(V){return u.count(J(V))},query:function(V){return u.query(J(V))},openCursor:function(V){var tt=V.query.index,Y=tt.keyTail,Q=tt.isVirtual,Z=tt.keyLength;return Q?u.openCursor(J(V)).then(function(rt){return rt&&X(rt)}):u.openCursor(V);function X(rt){return Object.create(rt,{continue:{value:function(ot){ot!=null?rt.continue(Mi(ot,V.reverse?n.MAX_KEY:n.MIN_KEY,Y)):V.unique?rt.continue(rt.key.slice(0,Z).concat(V.reverse?n.MIN_KEY:n.MAX_KEY,Y)):rt.continue()}},continuePrimaryKey:{value:function(ot,at){rt.continuePrimaryKey(Mi(ot,n.MAX_KEY,Y),at)}},primaryKey:{get:function(){return rt.primaryKey}},key:{get:function(){var ot=rt.key;return Z===1?ot[0]:ot.slice(0,Z)}},value:{get:function(){return rt.value}}})}}})}})}};function Is(n,r,u,_){return u=u||{},_=_||"",a(n).forEach(function(C){var R,L,U;b(r,C)?(R=n[C],L=r[C],typeof R=="object"&&typeof L=="object"&&R&&L?(U=P(R))!==P(L)?u[_+C]=r[C]:U==="Object"?Is(R,L,u,_+C+"."):R!==L&&(u[_+C]=r[C]):R!==L&&(u[_+C]=r[C])):u[_+C]=void 0}),a(r).forEach(function(C){b(n,C)||(u[_+C]=r[C])}),u}function Ds(n,r){return r.type==="delete"?r.keys:r.keys||r.values.map(n.extractKey)}var Tu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return s(s({},n),{table:function(r){var u=n.table(r),_=u.schema.primaryKey;return s(s({},u),{mutate:function(C){var R=It.trans,L=R.table(r).hook,U=L.deleting,z=L.creating,$=L.updating;switch(C.type){case"add":if(z.fire===G)break;return R._promise("readwrite",function(){return J(C)},!0);case"put":if(z.fire===G&&$.fire===G)break;return R._promise("readwrite",function(){return J(C)},!0);case"delete":if(U.fire===G)break;return R._promise("readwrite",function(){return J(C)},!0);case"deleteRange":if(U.fire===G)break;return R._promise("readwrite",function(){return function V(tt,Y,Q){return u.query({trans:tt,values:!1,query:{index:_,range:Y},limit:Q}).then(function(Z){var X=Z.result;return J({type:"delete",keys:X,trans:tt}).then(function(rt){return 0<rt.numFailures?Promise.reject(rt.failures[0]):X.length<Q?{failures:[],numFailures:0,lastResult:void 0}:V(tt,s(s({},Y),{lower:X[X.length-1],lowerOpen:!0}),Q)})})}(C.trans,C.range,1e4)},!0)}return u.mutate(C);function J(V){var tt,Y,Q,Z=It.trans,X=V.keys||Ds(_,V);if(!X)throw new Error("Keys missing");return(V=V.type==="add"||V.type==="put"?s(s({},V),{keys:X}):s({},V)).type!=="delete"&&(V.values=l([],V.values)),V.keys&&(V.keys=l([],V.keys)),tt=u,Q=X,((Y=V).type==="add"?Promise.resolve([]):tt.getMany({trans:Y.trans,keys:Q,cache:"immutable"})).then(function(rt){var ot=X.map(function(at,dt){var bt,Et,wt,Pt=rt[dt],kt={onerror:null,onsuccess:null};return V.type==="delete"?U.fire.call(kt,at,Pt,Z):V.type==="add"||Pt===void 0?(bt=z.fire.call(kt,at,V.values[dt],Z),at==null&&bt!=null&&(V.keys[dt]=at=bt,_.outbound||j(V.values[dt],_.keyPath,at))):(bt=Is(Pt,V.values[dt]),(Et=$.fire.call(kt,bt,at,Pt,Z))&&(wt=V.values[dt],Object.keys(Et).forEach(function(Tt){b(wt,Tt)?wt[Tt]=Et[Tt]:j(wt,Tt,Et[Tt])}))),kt});return u.mutate(V).then(function(at){for(var dt=at.failures,bt=at.results,Et=at.numFailures,at=at.lastResult,wt=0;wt<X.length;++wt){var Pt=(bt||X)[wt],kt=ot[wt];Pt==null?kt.onerror&&kt.onerror(dt[wt]):kt.onsuccess&&kt.onsuccess(V.type==="put"&&rt[wt]?V.values[wt]:Pt)}return{failures:dt,results:bt,numFailures:Et,lastResult:at}}).catch(function(at){return ot.forEach(function(dt){return dt.onerror&&dt.onerror(at)}),Promise.reject(at)})})}}})}})}};function ya(n,r,u){try{if(!r||r.keys.length<n.length)return null;for(var _=[],C=0,R=0;C<r.keys.length&&R<n.length;++C)Xt(r.keys[C],n[R])===0&&(_.push(u?p(r.values[C]):r.values[C]),++R);return _.length===n.length?_:null}catch{return null}}var Eu={stack:"dbcore",level:-1,create:function(n){return{table:function(r){var u=n.table(r);return s(s({},u),{getMany:function(_){if(!_.cache)return u.getMany(_);var C=ya(_.keys,_.trans._cache,_.cache==="clone");return C?Ft.resolve(C):u.getMany(_).then(function(R){return _.trans._cache={keys:_.keys,values:_.cache==="clone"?p(R):R},R})},mutate:function(_){return _.type!=="add"&&(_.trans._cache=null),u.mutate(_)}})}}}};function va(n,r){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!r.schema.primaryKey.outbound}function _a(n,r){switch(n){case"query":return r.values&&!r.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Au={stack:"dbcore",level:0,name:"Observability",create:function(n){var r=n.schema.name,u=new xe(n.MIN_KEY,n.MAX_KEY);return s(s({},n),{transaction:function(_,C,R){if(It.subscr&&C!=="readonly")throw new st.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(It.querier));return n.transaction(_,C,R)},table:function(_){var C=n.table(_),R=C.schema,L=R.primaryKey,V=R.indexes,U=L.extractKey,z=L.outbound,$=L.autoIncrement&&V.filter(function(Y){return Y.compound&&Y.keyPath.includes(L.keyPath)}),J=s(s({},C),{mutate:function(Y){function Q(Tt){return Tt="idb://".concat(r,"/").concat(_,"/").concat(Tt),at[Tt]||(at[Tt]=new xe)}var Z,X,rt,ot=Y.trans,at=Y.mutatedParts||(Y.mutatedParts={}),dt=Q(""),bt=Q(":dels"),Et=Y.type,kt=Y.type==="deleteRange"?[Y.range]:Y.type==="delete"?[Y.keys]:Y.values.length<50?[Ds(L,Y).filter(function(Tt){return Tt}),Y.values]:[],wt=kt[0],Pt=kt[1],kt=Y.trans._cache;return c(wt)?(dt.addKeys(wt),(kt=Et==="delete"||wt.length===Pt.length?ya(wt,kt):null)||bt.addKeys(wt),(kt||Pt)&&(Z=Q,X=kt,rt=Pt,R.indexes.forEach(function(Tt){var Dt=Z(Tt.name||"");function jt(Wt){return Wt!=null?Tt.extractKey(Wt):null}function Ht(Wt){return Tt.multiEntry&&c(Wt)?Wt.forEach(function(Ge){return Dt.addKey(Ge)}):Dt.addKey(Wt)}(X||rt).forEach(function(Wt,Ce){var Kt=X&&jt(X[Ce]),Ce=rt&&jt(rt[Ce]);Xt(Kt,Ce)!==0&&(Kt!=null&&Ht(Kt),Ce!=null&&Ht(Ce))})}))):wt?(Pt={from:(Pt=wt.lower)!==null&&Pt!==void 0?Pt:n.MIN_KEY,to:(Pt=wt.upper)!==null&&Pt!==void 0?Pt:n.MAX_KEY},bt.add(Pt),dt.add(Pt)):(dt.add(u),bt.add(u),R.indexes.forEach(function(Tt){return Q(Tt.name).add(u)})),C.mutate(Y).then(function(Tt){return!wt||Y.type!=="add"&&Y.type!=="put"||(dt.addKeys(Tt.results),$&&$.forEach(function(Dt){for(var jt=Y.values.map(function(Kt){return Dt.extractKey(Kt)}),Ht=Dt.keyPath.findIndex(function(Kt){return Kt===L.keyPath}),Wt=0,Ge=Tt.results.length;Wt<Ge;++Wt)jt[Wt][Ht]=Tt.results[Wt];Q(Dt.name).addKeys(jt)})),ot.mutatedParts=Oi(ot.mutatedParts||{},at),Tt})}}),V=function(Q){var Z=Q.query,Q=Z.index,Z=Z.range;return[Q,new xe((Q=Z.lower)!==null&&Q!==void 0?Q:n.MIN_KEY,(Z=Z.upper)!==null&&Z!==void 0?Z:n.MAX_KEY)]},tt={get:function(Y){return[L,new xe(Y.key)]},getMany:function(Y){return[L,new xe().addKeys(Y.keys)]},count:V,query:V,openCursor:V};return a(tt).forEach(function(Y){J[Y]=function(Q){var Z=It.subscr,X=!!Z,rt=va(It,C)&&_a(Y,Q)?Q.obsSet={}:Z;if(X){var ot=function(Pt){return Pt="idb://".concat(r,"/").concat(_,"/").concat(Pt),rt[Pt]||(rt[Pt]=new xe)},at=ot(""),dt=ot(":dels"),Z=tt[Y](Q),X=Z[0],Z=Z[1];if((Y==="query"&&X.isPrimaryKey&&!Q.values?dt:ot(X.name||"")).add(Z),!X.isPrimaryKey){if(Y!=="count"){var bt=Y==="query"&&z&&Q.values&&C.query(s(s({},Q),{values:!1}));return C[Y].apply(this,arguments).then(function(Pt){if(Y==="query"){if(z&&Q.values)return bt.then(function(jt){return jt=jt.result,at.addKeys(jt),Pt});var kt=Q.values?Pt.result.map(U):Pt.result;(Q.values?at:dt).addKeys(kt)}else if(Y==="openCursor"){var Tt=Pt,Dt=Q.values;return Tt&&Object.create(Tt,{key:{get:function(){return dt.addKey(Tt.primaryKey),Tt.key}},primaryKey:{get:function(){var jt=Tt.primaryKey;return dt.addKey(jt),jt}},value:{get:function(){return Dt&&at.addKey(Tt.primaryKey),Tt.value}}})}return Pt})}dt.add(u)}}return C[Y].apply(this,arguments)}}),J}})}};function ba(n,r,u){if(u.numFailures===0)return r;if(r.type==="deleteRange")return null;var _=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;return u.numFailures===_?null:(r=s({},r),c(r.keys)&&(r.keys=r.keys.filter(function(C,R){return!(R in u.failures)})),"values"in r&&c(r.values)&&(r.values=r.values.filter(function(C,R){return!(R in u.failures)})),r)}function Ns(n,r){return u=n,((_=r).lower===void 0||(_.lowerOpen?0<Xt(u,_.lower):0<=Xt(u,_.lower)))&&(n=n,(r=r).upper===void 0||(r.upperOpen?Xt(n,r.upper)<0:Xt(n,r.upper)<=0));var u,_}function wa(n,r,tt,_,C,R){if(!tt||tt.length===0)return n;var L=r.query.index,U=L.multiEntry,z=r.query.range,$=_.schema.primaryKey.extractKey,J=L.extractKey,V=(L.lowLevelIndex||L).extractKey,tt=tt.reduce(function(Y,Q){var Z=Y,X=[];if(Q.type==="add"||Q.type==="put")for(var rt=new xe,ot=Q.values.length-1;0<=ot;--ot){var at,dt=Q.values[ot],bt=$(dt);rt.hasKey(bt)||(at=J(dt),(U&&c(at)?at.some(function(Tt){return Ns(Tt,z)}):Ns(at,z))&&(rt.addKey(bt),X.push(dt)))}switch(Q.type){case"add":var Et=new xe().addKeys(r.values?Y.map(function(Dt){return $(Dt)}):Y),Z=Y.concat(r.values?X.filter(function(Dt){return Dt=$(Dt),!Et.hasKey(Dt)&&(Et.addKey(Dt),!0)}):X.map(function(Dt){return $(Dt)}).filter(function(Dt){return!Et.hasKey(Dt)&&(Et.addKey(Dt),!0)}));break;case"put":var wt=new xe().addKeys(Q.values.map(function(Dt){return $(Dt)}));Z=Y.filter(function(Dt){return!wt.hasKey(r.values?$(Dt):Dt)}).concat(r.values?X:X.map(function(Dt){return $(Dt)}));break;case"delete":var Pt=new xe().addKeys(Q.keys);Z=Y.filter(function(Dt){return!Pt.hasKey(r.values?$(Dt):Dt)});break;case"deleteRange":var kt=Q.range;Z=Y.filter(function(Dt){return!Ns($(Dt),kt)})}return Z},n);return tt===n?n:(tt.sort(function(Y,Q){return Xt(V(Y),V(Q))||Xt($(Y),$(Q))}),r.limit&&r.limit<1/0&&(tt.length>r.limit?tt.length=r.limit:n.length===r.limit&&tt.length<r.limit&&(C.dirty=!0)),R?Object.freeze(tt):tt)}function Sa(n,r){return Xt(n.lower,r.lower)===0&&Xt(n.upper,r.upper)===0&&!!n.lowerOpen==!!r.lowerOpen&&!!n.upperOpen==!!r.upperOpen}function Ru(n,r){return function(u,_,C,R){if(u===void 0)return _!==void 0?-1:0;if(_===void 0)return 1;if((_=Xt(u,_))===0){if(C&&R)return 0;if(C)return 1;if(R)return-1}return _}(n.lower,r.lower,n.lowerOpen,r.lowerOpen)<=0&&0<=function(u,_,C,R){if(u===void 0)return _!==void 0?1:0;if(_===void 0)return-1;if((_=Xt(u,_))===0){if(C&&R)return 0;if(C)return-1;if(R)return 1}return _}(n.upper,r.upper,n.upperOpen,r.upperOpen)}function ku(n,r,u,_){n.subscribers.add(u),_.addEventListener("abort",function(){var C,R;n.subscribers.delete(u),n.subscribers.size===0&&(C=n,R=r,setTimeout(function(){C.subscribers.size===0&&W(R,C)},3e3))})}var Ou={stack:"dbcore",level:0,name:"Cache",create:function(n){var r=n.schema.name;return s(s({},n),{transaction:function(u,_,C){var R,L,U=n.transaction(u,_,C);return _==="readwrite"&&(L=(R=new AbortController).signal,C=function(z){return function(){if(R.abort(),_==="readwrite"){for(var $=new Set,J=0,V=u;J<V.length;J++){var tt=V[J],Y=An["idb://".concat(r,"/").concat(tt)];if(Y){var Q=n.table(tt),Z=Y.optimisticOps.filter(function(Dt){return Dt.trans===U});if(U._explicit&&z&&U.mutatedParts)for(var X=0,rt=Object.values(Y.queries.query);X<rt.length;X++)for(var ot=0,at=(Et=rt[X]).slice();ot<at.length;ot++)Rs((wt=at[ot]).obsSet,U.mutatedParts)&&(W(Et,wt),wt.subscribers.forEach(function(Dt){return $.add(Dt)}));else if(0<Z.length){Y.optimisticOps=Y.optimisticOps.filter(function(Dt){return Dt.trans!==U});for(var dt=0,bt=Object.values(Y.queries.query);dt<bt.length;dt++)for(var Et,wt,Pt,kt=0,Tt=(Et=bt[dt]).slice();kt<Tt.length;kt++)(wt=Tt[kt]).res!=null&&U.mutatedParts&&(z&&!wt.dirty?(Pt=Object.isFrozen(wt.res),Pt=wa(wt.res,wt.req,Z,Q,wt,Pt),wt.dirty?(W(Et,wt),wt.subscribers.forEach(function(Dt){return $.add(Dt)})):Pt!==wt.res&&(wt.res=Pt,wt.promise=Ft.resolve({result:Pt}))):(wt.dirty&&W(Et,wt),wt.subscribers.forEach(function(Dt){return $.add(Dt)})))}}}$.forEach(function(Dt){return Dt()})}}},U.addEventListener("abort",C(!1),{signal:L}),U.addEventListener("error",C(!1),{signal:L}),U.addEventListener("complete",C(!0),{signal:L})),U},table:function(u){var _=n.table(u),C=_.schema.primaryKey;return s(s({},_),{mutate:function(R){var L=It.trans;if(C.outbound||L.db._options.cache==="disabled"||L.explicit||L.idbtrans.mode!=="readwrite")return _.mutate(R);var U=An["idb://".concat(r,"/").concat(u)];return U?(L=_.mutate(R),R.type!=="add"&&R.type!=="put"||!(50<=R.values.length||Ds(C,R).some(function(z){return z==null}))?(U.optimisticOps.push(R),R.mutatedParts&&Fi(R.mutatedParts),L.then(function(z){0<z.numFailures&&(W(U.optimisticOps,R),(z=ba(0,R,z))&&U.optimisticOps.push(z),R.mutatedParts&&Fi(R.mutatedParts))}),L.catch(function(){W(U.optimisticOps,R),R.mutatedParts&&Fi(R.mutatedParts)})):L.then(function(z){var $=ba(0,s(s({},R),{values:R.values.map(function(J,V){var tt;return z.failures[V]?J:(J=(tt=C.keyPath)!==null&&tt!==void 0&&tt.includes(".")?p(J):s({},J),j(J,C.keyPath,z.results[V]),J)})}),z);U.optimisticOps.push($),queueMicrotask(function(){return R.mutatedParts&&Fi(R.mutatedParts)})}),L):_.mutate(R)},query:function(R){if(!va(It,_)||!_a("query",R))return _.query(R);var L=(($=It.trans)===null||$===void 0?void 0:$.db._options.cache)==="immutable",V=It,U=V.requery,z=V.signal,$=function(Q,Z,X,rt){var ot=An["idb://".concat(Q,"/").concat(Z)];if(!ot)return[];if(!(Z=ot.queries[X]))return[null,!1,ot,null];var at=Z[(rt.query?rt.query.index.name:null)||""];if(!at)return[null,!1,ot,null];switch(X){case"query":var dt=at.find(function(bt){return bt.req.limit===rt.limit&&bt.req.values===rt.values&&Sa(bt.req.query.range,rt.query.range)});return dt?[dt,!0,ot,at]:[at.find(function(bt){return("limit"in bt.req?bt.req.limit:1/0)>=rt.limit&&(!rt.values||bt.req.values)&&Ru(bt.req.query.range,rt.query.range)}),!1,ot,at];case"count":return dt=at.find(function(bt){return Sa(bt.req.query.range,rt.query.range)}),[dt,!!dt,ot,at]}}(r,u,"query",R),J=$[0],V=$[1],tt=$[2],Y=$[3];return J&&V?J.obsSet=R.obsSet:(V=_.query(R).then(function(Q){var Z=Q.result;if(J&&(J.res=Z),L){for(var X=0,rt=Z.length;X<rt;++X)Object.freeze(Z[X]);Object.freeze(Z)}else Q.result=p(Z);return Q}).catch(function(Q){return Y&&J&&W(Y,J),Promise.reject(Q)}),J={obsSet:R.obsSet,promise:V,subscribers:new Set,type:"query",req:R,dirty:!1},Y?Y.push(J):(Y=[J],(tt=tt||(An["idb://".concat(r,"/").concat(u)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[R.query.index.name||""]=Y)),ku(J,Y,U,z),J.promise.then(function(Q){return{result:wa(Q.result,R,tt==null?void 0:tt.optimisticOps,_,J,L)}})}})}})}};function Ii(n,r){return new Proxy(n,{get:function(u,_,C){return _==="db"?r:Reflect.get(u,_,C)}})}var Je=(fe.prototype.version=function(n){if(isNaN(n)||n<.1)throw new st.Type("Given version is not a positive number");if(n=Math.round(10*n)/10,this.idbdb||this._state.isBeingOpened)throw new st.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var r=this._versions,u=r.filter(function(_){return _._cfg.version===n})[0];return u||(u=new this.Version(n),r.push(u),r.sort(bu),u.stores({}),this._state.autoSchema=!1,u)},fe.prototype._whenReady=function(n){var r=this;return this.idbdb&&(this._state.openComplete||It.letThrough||this._vip)?n():new Ft(function(u,_){if(r._state.openComplete)return _(new st.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._state.autoOpen)return void _(new st.DatabaseClosed);r.open().catch(G)}r._state.dbReadyPromise.then(u,_)}).then(n)},fe.prototype.use=function(n){var r=n.stack,u=n.create,_=n.level,C=n.name;return C&&this.unuse({stack:r,name:C}),n=this._middlewares[r]||(this._middlewares[r]=[]),n.push({stack:r,create:u,level:_??10,name:C}),n.sort(function(R,L){return R.level-L.level}),this},fe.prototype.unuse=function(n){var r=n.stack,u=n.name,_=n.create;return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(function(C){return _?C.create!==_:!!u&&C.name!==u})),this},fe.prototype.open=function(){var n=this;return Pn(re,function(){return Cu(n)})},fe.prototype._close=function(){var n=this._state,r=Kn.indexOf(this);if(0<=r&&Kn.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new Ft(function(u){n.dbReadyResolve=u}),n.openCanceller=new Ft(function(u,_){n.cancelOpen=_}))},fe.prototype.close=function(u){var r=(u===void 0?{disableAutoOpen:!0}:u).disableAutoOpen,u=this._state;r?(u.isBeingOpened&&u.cancelOpen(new st.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new st.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},fe.prototype.delete=function(n){var r=this;n===void 0&&(n={disableAutoOpen:!0});var u=0<arguments.length&&typeof arguments[0]!="object",_=this._state;return new Ft(function(C,R){function L(){r.close(n);var U=r._deps.indexedDB.deleteDatabase(r.name);U.onsuccess=le(function(){var z,$,J;z=r._deps,$=r.name,J=z.indexedDB,z=z.IDBKeyRange,Ts(J)||$===_i||Ps(J,z).delete($).catch(G),C()}),U.onerror=qe(R),U.onblocked=r._fireOnBlocked}if(u)throw new st.InvalidArgument("Invalid closeOptions argument to db.delete()");_.isBeingOpened?_.dbReadyPromise.then(L):L()})},fe.prototype.backendDB=function(){return this.idbdb},fe.prototype.isOpen=function(){return this.idbdb!==null},fe.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},fe.prototype.hasFailed=function(){return this._state.dbOpenError!==null},fe.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(fe.prototype,"tables",{get:function(){var n=this;return a(this._allTables).map(function(r){return n._allTables[r]})},enumerable:!1,configurable:!0}),fe.prototype.transaction=function(){var n=(function(r,u,_){var C=arguments.length;if(C<2)throw new st.InvalidArgument("Too few arguments");for(var R=new Array(C-1);--C;)R[C-1]=arguments[C];return _=R.pop(),[r,O(R),_]}).apply(this,arguments);return this._transaction.apply(this,n)},fe.prototype._transaction=function(n,r,u){var _=this,C=It.trans;C&&C.db===this&&n.indexOf("!")===-1||(C=null);var R,L,U=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");try{if(L=r.map(function($){if($=$ instanceof _.Table?$.name:$,typeof $!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return $}),n=="r"||n===ds)R=ds;else{if(n!="rw"&&n!=gs)throw new st.InvalidArgument("Invalid transaction mode: "+n);R=gs}if(C){if(C.mode===ds&&R===gs){if(!U)throw new st.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");C=null}C&&L.forEach(function($){if(C&&C.storeNames.indexOf($)===-1){if(!U)throw new st.SubTransaction("Table "+$+" not included in parent transaction.");C=null}}),U&&C&&!C.active&&(C=null)}}catch($){return C?C._promise(null,function(J,V){V($)}):he($)}var z=(function $(J,V,tt,Y,Q){return Ft.resolve().then(function(){var Z=It.transless||It,X=J._createTransaction(V,tt,J._dbSchema,Y);if(X.explicit=!0,Z={trans:X,transless:Z},Y)X.idbtrans=Y.idbtrans;else try{X.create(),X.idbtrans._explicit=!0,J._state.PR1398_maxLoop=3}catch(at){return at.name===H.InvalidState&&J.isOpen()&&0<--J._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),J.close({disableAutoOpen:!1}),J.open().then(function(){return $(J,V,tt,null,Q)})):he(at)}var rt,ot=ht(Q);return ot&&Un(),Z=Ft.follow(function(){var at;(rt=Q.call(X,X))&&(ot?(at=cn.bind(null,null),rt.then(at,at)):typeof rt.next=="function"&&typeof rt.throw=="function"&&(rt=Ms(rt)))},Z),(rt&&typeof rt.then=="function"?Ft.resolve(rt).then(function(at){return X.active?at:he(new st.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Z.then(function(){return rt})).then(function(at){return Y&&X._resolve(),X._completion.then(function(){return at})}).catch(function(at){return X._reject(at),he(at)})})}).bind(null,this,R,L,C,u);return C?C._promise(R,z,"lock"):It.trans?Pn(It.transless,function(){return _._whenReady(z)}):this._whenReady(z)},fe.prototype.table=function(n){if(!b(this._allTables,n))throw new st.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},fe);function fe(n,r){var u=this;this._middlewares={},this.verno=0;var _=fe.dependencies;this._options=r=s({addons:fe.addons,autoOpen:!0,indexedDB:_.indexedDB,IDBKeyRange:_.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},_=r.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var C,R,L,U,z,$={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:G,dbReadyPromise:null,cancelOpen:G,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};$.dbReadyPromise=new Ft(function(V){$.dbReadyResolve=V}),$.openCanceller=new Ft(function(V,tt){$.cancelOpen=tt}),this._state=$,this.name=n,this.on=Zn(this,"populate","blocked","versionchange","close",{ready:[vt,G]}),this.on.ready.subscribe=d(this.on.ready.subscribe,function(V){return function(tt,Y){fe.vip(function(){var Q,Z=u._state;Z.openComplete?(Z.dbOpenError||Ft.resolve().then(tt),Y&&V(tt)):Z.onReadyBeingFired?(Z.onReadyBeingFired.push(tt),Y&&V(tt)):(V(tt),Q=u,Y||V(function X(){Q.on.ready.unsubscribe(tt),Q.on.ready.unsubscribe(X)}))})}}),this.Collection=(C=this,tr(du.prototype,function(rt,X){this.db=C;var Y=Zo,Q=null;if(X)try{Y=X()}catch(ot){Q=ot}var Z=rt._ctx,X=Z.table,rt=X.hook.reading.fire;this._ctx={table:X,index:Z.index,isPrimKey:!Z.index||X.schema.primKey.keyPath&&Z.index===X.schema.primKey.name,range:Y,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Q,or:Z.or,valueMapper:rt!==q?rt:null}})),this.Table=(R=this,tr(ra.prototype,function(V,tt,Y){this.db=R,this._tx=Y,this.name=V,this.schema=tt,this.hook=R._allTables[V]?R._allTables[V].hook:Zn(null,{creating:[gt,G],reading:[nt,q],updating:[yt,G],deleting:[ft,G]})})),this.Transaction=(L=this,tr(mu.prototype,function(V,tt,Y,Q,Z){var X=this;this.db=L,this.mode=V,this.storeNames=tt,this.schema=Y,this.chromeTransactionDurability=Q,this.idbtrans=null,this.on=Zn(this,"complete","error","abort"),this.parent=Z||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ft(function(rt,ot){X._resolve=rt,X._reject=ot}),this._completion.then(function(){X.active=!1,X.on.complete.fire()},function(rt){var ot=X.active;return X.active=!1,X.on.error.fire(rt),X.parent?X.parent._reject(rt):ot&&X.idbtrans&&X.idbtrans.abort(),he(rt)})})),this.Version=(U=this,tr(xu.prototype,function(V){this.db=U,this._cfg={version:V,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(z=this,tr(la.prototype,function(V,tt,Y){if(this.db=z,this._ctx={table:V,index:tt===":id"?null:tt,or:Y},this._cmp=this._ascending=Xt,this._descending=function(Q,Z){return Xt(Z,Q)},this._max=function(Q,Z){return 0<Xt(Q,Z)?Q:Z},this._min=function(Q,Z){return Xt(Q,Z)<0?Q:Z},this._IDBKeyRange=z._deps.IDBKeyRange,!this._IDBKeyRange)throw new st.MissingAPI})),this.on("versionchange",function(V){0<V.newVersion?console.warn("Another connection wants to upgrade database '".concat(u.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(u.name,"'. Closing db now to resume the delete request.")),u.close({disableAutoOpen:!1})}),this.on("blocked",function(V){!V.newVersion||V.newVersion<V.oldVersion?console.warn("Dexie.delete('".concat(u.name,"') was blocked")):console.warn("Upgrade '".concat(u.name,"' blocked by other connection holding version ").concat(V.oldVersion/10))}),this._maxKey=ir(r.IDBKeyRange),this._createTransaction=function(V,tt,Y,Q){return new u.Transaction(V,tt,Y,u._options.chromeTransactionDurability,Q)},this._fireOnBlocked=function(V){u.on("blocked").fire(V),Kn.filter(function(tt){return tt.name===u.name&&tt!==u&&!tt._state.vcFired}).map(function(tt){return tt.on("versionchange").fire(V)})},this.use(Eu),this.use(Ou),this.use(Au),this.use(Pu),this.use(Tu);var J=new Proxy(this,{get:function(V,tt,Y){if(tt==="_vip")return!0;if(tt==="table")return function(Z){return Ii(u.table(Z),J)};var Q=Reflect.get(V,tt,Y);return Q instanceof ra?Ii(Q,J):tt==="tables"?Q.map(function(Z){return Ii(Z,J)}):tt==="_createTransaction"?function(){return Ii(Q.apply(this,arguments),J)}:Q}});this.vip=J,_.forEach(function(V){return V(u)})}var Di,Ue=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Fu=(Gs.prototype.subscribe=function(n,r,u){return this._subscribe(n&&typeof n!="function"?n:{next:n,error:r,complete:u})},Gs.prototype[Ue]=function(){return this},Gs);function Gs(n){this._subscribe=n}try{Di={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{Di={indexedDB:null,IDBKeyRange:null}}function xa(n){var r,u=!1,_=new Fu(function(C){var R=ht(n),L,U=!1,z={},$={},J={get closed(){return U},unsubscribe:function(){U||(U=!0,L&&L.abort(),V&&fn.storagemutated.unsubscribe(Y))}};C.start&&C.start(J);var V=!1,tt=function(){return fs(Q)},Y=function(Z){Oi(z,Z),Rs($,z)&&tt()},Q=function(){var Z,X,rt;!U&&Di.indexedDB&&(z={},Z={},L&&L.abort(),L=new AbortController,rt=function(ot){var at=Ln();try{R&&Un();var dt=ln(n,ot);return dt=R?dt.finally(cn):dt}finally{at&&Bn()}}(X={subscr:Z,signal:L.signal,requery:tt,querier:n,trans:null}),Promise.resolve(rt).then(function(ot){u=!0,r=ot,U||X.signal.aborted||(z={},function(at){for(var dt in at)if(b(at,dt))return;return 1}($=Z)||V||(fn(rr,Y),V=!0),fs(function(){return!U&&C.next&&C.next(ot)}))},function(ot){u=!1,["DatabaseClosedError","AbortError"].includes(ot==null?void 0:ot.name)||U||fs(function(){U||C.error&&C.error(ot)})}))};return setTimeout(tt,0),J});return _.hasValue=function(){return u},_.getValue=function(){return r},_}var Rn=Je;function Ls(n){var r=dn;try{dn=!0,fn.storagemutated.fire(n),Fs(n,!0)}finally{dn=r}}x(Rn,s(s({},Mt),{delete:function(n){return new Rn(n,{addons:[]}).delete()},exists:function(n){return new Rn(n,{addons:[]}).open().then(function(r){return r.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return r=Rn.dependencies,u=r.indexedDB,r=r.IDBKeyRange,(Ts(u)?Promise.resolve(u.databases()).then(function(_){return _.map(function(C){return C.name}).filter(function(C){return C!==_i})}):Ps(u,r).toCollection().primaryKeys()).then(n)}catch{return he(new st.MissingAPI)}var r,u},defineClass:function(){return function(n){h(this,n)}},ignoreTransaction:function(n){return It.trans?Pn(It.transless,n):n()},vip:Es,async:function(n){return function(){try{var r=Ms(n.apply(this,arguments));return r&&typeof r.then=="function"?r:Ft.resolve(r)}catch(u){return he(u)}}},spawn:function(n,r,u){try{var _=Ms(n.apply(u,r||[]));return _&&typeof _.then=="function"?_:Ft.resolve(_)}catch(C){return he(C)}},currentTransaction:{get:function(){return It.trans||null}},waitFor:function(n,r){return r=Ft.resolve(typeof n=="function"?Rn.ignoreTransaction(n):n).timeout(r||6e4),It.trans?It.trans.waitFor(r):r},Promise:Ft,debug:{get:function(){return pt},set:function(n){Ot(n)}},derive:w,extend:h,props:x,override:d,Events:Zn,on:fn,liveQuery:xa,extendObservabilitySet:Oi,getByKeyPath:M,setByKeyPath:j,delByKeyPath:function(n,r){typeof r=="string"?j(n,r,void 0):"length"in r&&[].map.call(r,function(u){j(n,u,void 0)})},shallowClone:D,deepClone:p,getObjectDiff:Is,cmp:Xt,asap:A,minKey:-1/0,addons:[],connections:Kn,errnames:H,dependencies:Di,cache:An,semVer:"4.0.11",version:"4.0.11".split(".").map(function(n){return parseInt(n)}).reduce(function(n,r,u){return n+r/Math.pow(10,2*u)})})),Rn.maxKey=ir(Rn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(fn(rr,function(n){dn||(n=new CustomEvent(vs,{detail:n}),dn=!0,dispatchEvent(n),dn=!1)}),addEventListener(vs,function(n){n=n.detail,dn||Ls(n)}));var Vn,dn=!1,Ca=function(){};return typeof BroadcastChannel<"u"&&((Ca=function(){(Vn=new BroadcastChannel(vs)).onmessage=function(n){return n.data&&Ls(n.data)}})(),typeof Vn.unref=="function"&&Vn.unref(),fn(rr,function(n){dn||Vn.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!Je.disableBfCache&&n.persisted){pt&&console.debug("Dexie: handling persisted pagehide"),Vn!=null&&Vn.close();for(var r=0,u=Kn;r<u.length;r++)u[r].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(n){!Je.disableBfCache&&n.persisted&&(pt&&console.debug("Dexie: handling persisted pageshow"),Ca(),Ls({all:new xe(-1/0,[[]])}))})),Ft.rejectionMapper=function(n,r){return!n||n instanceof ut||n instanceof TypeError||n instanceof SyntaxError||!n.name||!St[n.name]?n:(r=new St[n.name](r||n.message,n),"stack"in n&&y(r,"stack",{get:function(){return this.inner.stack}}),r)},Ot(pt),s(Je,Object.freeze({__proto__:null,Dexie:Je,liveQuery:xa,Entity:ta,cmp:Xt,PropModification:er,replacePrefix:function(n,r){return new er({replacePrefix:[n,r]})},add:function(n){return new er({add:n})},remove:function(n){return new er({remove:n})},default:Je,RangeSet:xe,mergeRanges:ar,rangesOverlap:da}),{default:Je}),Je})}(Vi)),Vi.exports}var $d=Yd();const bo=eu($d),nc=Symbol.for("Dexie"),Qi=globalThis[nc]||(globalThis[nc]=bo);if(bo.semVer!==Qi.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${bo.semVer} and ${Qi.semVer}`);const{liveQuery:v0,mergeRanges:_0,rangesOverlap:b0,RangeSet:w0,cmp:S0,Entity:x0,PropModification:C0,replacePrefix:P0,add:T0,remove:E0}=Qi,pn=new Qi("ImageMetaDatabase");pn.version(1).stores({image_metas:"imageId, url, labelMeta"});const Xd=Oh({name:"ImageLabeling",setup(){const t=Se(),e=Se(),i=Se(!1),s=Se(),l=Se("MoveImage"),o=Se([]),a=Se(4),c=Se(6),h=Se(),g=Se(),f=Se(0),b=Se(null),x=Se(),v=Se([]),y=Se([{id:"tagid-1",name:"大狗",color:ge.Util.getRandomColor()},{id:"tagid-2",name:"大猫",color:ge.Util.getRandomColor()},{id:"tagid-3",name:"老虎狗",color:ge.Util.getRandomColor()}]),w=Se([{imageId:"ddadfe6d-0a4c-487d-a1b6-e7b0675626db",url:"https://07akioni.oss-cn-beijing.aliyuncs.com/07akioni.jpeg"},{imageId:"563e9543-74f6-4e32-a8ef-825601a29617",url:"https://images.pexels.com/photos/31173342/pexels-photo-31173342.jpeg"},{imageId:"8b5304a0-297d-45e1-a9b7-26e2ebd7b86c",url:"https://images.pexels.com/photos/31308278/pexels-photo-31308278.jpeg"},{imageId:"8b5304a0-297d-45e1-a9b7-26e2ebd7b866",url:"https://images.pexels.com/photos/31308278/pexels-photo-31308278.jpeg"},{imageId:"8b5304a0-297d-45e1-a9b7-26e2ebd7b865",url:"https://images.pexels.com/photos/31308278/pexels-photo-31308278.jpeg"},{imageId:"8b5304a0-297d-45e1-a9b7-26e2ebd7b864",url:"https://images.pexels.com/photos/31308278/pexels-photo-31308278.jpeg"},{imageId:"8b5304a0-297d-45e1-a9b7-26e2ebd7b863",url:"https://images.pexels.com/photos/31308278/pexels-photo-31308278.jpeg"},{imageId:"8b5304a0-297d-45e1-a9b7-26e2ebd7b862",url:"https://images.pexels.com/photos/31308278/pexels-photo-31308278.jpeg"},{imageId:"8b5304a0-297d-45e1-a9b7-26e2ebd7b861",url:"https://images.pexels.com/photos/31308278/pexels-photo-31308278.jpeg"}]),T=Se([{color:"unset",name:"矩形",value:"Rect"},{color:"unset",name:"多边形",value:"Polygon"},{color:"unset",name:"移动图片",value:"MoveImage"},{color:"unset",name:"图片放大",value:"ZoomInImage"},{color:"unset",name:"重置图片大小",value:"ResetImageSize"},{color:"unset",name:"图片缩小",value:"ZoomOutImage"},{color:"unset",name:"上一张",value:"PrevImage",clickfn:async()=>{var K,p,E;if(f.value>0){w.value[f.value]?pn.image_metas.put({imageId:w.value[f.value].imageId,url:w.value[f.value].url,labelMeta:(K=t.value)==null?void 0:K.toJSON()}):pn.image_metas.add({imageId:w.value[f.value].imageId,url:w.value[f.value].url,labelMeta:(p=t.value)==null?void 0:p.toJSON()}),(E=m())==null||E.getChildren(W=>!(W instanceof ge.Image)).forEach(W=>{W.destroy()}),f.value--;const N=w.value[f.value],B=await pn.image_metas.get(N.imageId);B&&B.labelMeta&&(t.value=ge.Node.create(B.labelMeta,"container"),I());var k=new Image;k.src=w.value[f.value].url,k.onload=function(){var W=d();W.image(k),t.value.draw()}}}},{color:"unset",name:"下一张",value:"NextImage",clickfn:async()=>{var K,p,E;if(f.value<w.value.length-1){const P=w.value[f.value],N=await pn.image_metas.get(P.imageId);console.log(N),N?await pn.image_metas.put({imageId:w.value[f.value].imageId,url:w.value[f.value].url,labelMeta:(K=t.value)==null?void 0:K.toJSON()}):await pn.image_metas.add({imageId:w.value[f.value].imageId,url:w.value[f.value].url,labelMeta:(p=t.value)==null?void 0:p.toJSON()}),(E=m())==null||E.getChildren(it=>!(it instanceof ge.Image)).forEach(it=>{it.destroy()}),f.value++;const B=w.value[f.value],W=await pn.image_metas.get(B.imageId);W&&W.labelMeta&&(t.value=ge.Node.create(W.labelMeta,"container"),I());var k=new Image;k.src=w.value[f.value].url,k.onload=function(){var it=d();it.image(k),t.value.draw()}}}}]),F=(k,K,p,E,P=3)=>Math.sqrt(Math.pow(p-k,2)+Math.pow(E-K,2))<P,m=()=>{var k;return(k=t.value)==null?void 0:k.findOne("#labelImageGroup")},d=()=>{var k;return(k=t.value)==null?void 0:k.findOne("#labelImage")},S=()=>{var k;return(k=t.value)==null?void 0:k.findOne("#polygonGroup")},A=()=>y.value.find(k=>k.id==x.value)||void 0,M=k=>y.value.find(K=>K.id==k),j=k=>{const{r:K,g:p,b:E}=ge.Util.getRGB(k);return`rgba(${K},${p},${E}, 0.3)`},D=()=>new ge.Group({id:"labelImageGroup",draggable:!1}),I=()=>{t.value.on("mousedown",()=>{var K,p,E;if(console.log(1),l.value=="Rect"){if(i.value=!0,!x.value)return alert("请选择下方的一个标签进行打标"),!1;const P=(K=t.value)==null?void 0:K.getPointerPosition();var k=(p=d())==null?void 0:p.getClientRect();if(P&&k){const N=new Date().getTime(),B=new ge.Rect({id:N+"",name:"rect",x:P.x-k.x,y:P.y-k.y,width:0,height:0,fill:"rgba(0, 100, 255, 0.5)",stroke:"red",strokeScaleEnabled:!1,strokeWidth:1,dash:[5,5],dashEnabled:!0,draggable:!1});s.value=B,(E=m())==null||E.add(s.value)}}}),t.value.on("mousemove",()=>{var K,p,E,P,N,B;if(l.value=="Rect"){if(!i.value)return;t.value.container().style.cursor="crosshair";const W=(K=t.value)==null?void 0:K.getPointerPosition();var k=(p=d())==null?void 0:p.getClientRect();W&&s.value&&k&&(s.value.setAttrs({width:W.x-k.x-s.value.x(),height:W.y-k.y-s.value.y()}),(E=t.value)==null||E.batchDraw())}if(l.value=="Polygon"){t.value.container().style.cursor="default";const W=(P=t.value)==null?void 0:P.getPointerPosition();var k=(N=d())==null?void 0:N.getClientRect();if(W&&h.value&&k&&g.value){const et=W.x-k.x,ht=W.y-k.y;F(et,ht,(B=g.value)==null?void 0:B.x(),g.value.y())?g.value.radius(c.value):g.value.radius(a.value)}}l.value=="MoveImage"&&(t.value.container().style.cursor="move")}),t.value.on("mouseup",()=>{var k,K,p;if(l.value=="Rect"&&(i.value=!1,s.value&&x.value)){t.value.container().style.cursor="default";const E=s.value.x(),P=s.value.y(),N=s.value.width(),B=s.value.height();if(Math.abs(N)<5||Math.abs(B)<5){s.value.destroy(),s.value=void 0,(k=e.value)==null||k.batchDraw();return}v.value.push({labelId:s.value.id()+"",imageId:w.value[f.value].imageId,tagId:x.value,type:"RECT"});const W=((K=A())==null?void 0:K.color)||"#000";s.value.setAttrs({dashEnabled:!1,stroke:W,fill:j(W)}),[[E,P],[E+N,P],[E,P+B],[E+N,P+B]].forEach(et=>{var ht,_t;(_t=m())==null||_t.add(new ge.Circle({name:`dot${(ht=s.value)==null?void 0:ht.id()}`,x:et[0],y:et[1],radius:a.value,fill:"#fff",stroke:"red",visible:!1,draggable:!1}))}),(p=t.value)==null||p.batchDraw()}}),t.value.on("click",()=>{var p,E,P,N,B,W,it,et,ht;const k=(p=t.value)==null?void 0:p.getPointerPosition(),K=(E=d())==null?void 0:E.getClientRect();if(k&&l.value=="Polygon"&&K){if(!x.value)return alert("请选择下方的一个标签进行打标"),!1;const _t=k.x-K.x,ut=k.y-K.y;if(o.value.push(_t,ut),h.value&&S()&&g.value){if(F(_t,ut,(P=g.value)==null?void 0:P.x(),g.value.y())){v.value.push({labelId:h.value.id()+"",imageId:w.value[f.value].imageId,tagId:x.value,type:"Polygon"}),(N=S())==null||N.getChildren(At=>At instanceof ge.Circle).forEach(At=>{At.setAttrs({visible:!1})}),g.value.setAttrs({visible:!1,radius:a.value}),o.value.push(o.value[0],o.value[1]),h.value.points([...o.value]),h.value.closed(!0);const mt=((B=A())==null?void 0:B.color)||"#000";h.value.setAttrs({stroke:mt,fill:j(mt)}),h.value=void 0,o.value=[];return}(W=S())==null||W.add(new ge.Circle({name:`dot${h.value.id()}`,x:_t,y:ut,radius:a.value,fill:"#fff",stroke:"red",strokeWidth:1,visible:!0})),h.value.points([...o.value]),(it=e.value)==null||it.batchDraw()}else{const mt=new Date().getTime();g.value=new ge.Circle({name:`dot${mt}`,x:_t,y:ut,radius:a.value,fill:"#fff",stroke:"red",strokeWidth:1,visible:!0});const At=new ge.Line({id:mt+"",points:[...o.value],fill:"rgba(0, 0, 255, 0.5)",stroke:"red",strokeWidth:2,closed:!1});h.value=At;const Rt=new ge.Group({draggable:!1,id:"polygonGroup"});Rt.add(g.value),Rt.add(h.value),(et=m())==null||et.add(Rt),(ht=t.value)==null||ht.batchDraw()}}})},O=k=>{var K;(K=t.value)==null||K.find(`.dot${k.labelId}`).forEach(p=>{console.log(p),p.visible(!p.visible())})};return Oc(()=>{var E,P,N;const k=localStorage.getItem("imgaejson");if(k){const B=JSON.parse(k);t.value=ge.Node.create(JSON.parse(k),"container"),(E=t.value)==null||E.width(800),(P=t.value)==null||P.height(800);var K=B.imageUrl,p=new Image;p.src=K,p.onload=function(){var W=d();W.image(p),t.value.draw()},console.log(k)}else{t.value=new ge.Stage({container:"container",width:800,height:800}),e.value=new ge.Layer({}),(N=t.value)==null||N.add(e.value),e.value.add(D());const B=new Image;B.src=w.value[f.value].url,B.onload=()=>{var it,et;const W=new ge.Image({id:"labelImage",image:B,width:B.width,height:B.height,draggable:!1});(it=m())==null||it.add(W),(et=m())==null||et.setAttrs({width:B.width,height:B.height})}}I()}),Lo(()=>{var k;(k=t.value)==null||k.destroy()}),ff(()=>{var k,K;if((k=t.value)!=null&&k.container()&&(t.value.container().style.cursor="default"),(K=m())==null||K.setDraggable(l.value=="MoveImage"),T.value.forEach(p=>p.color=p.value==l.value?"red":"unset"),b.value){const p=b.value;p.scrollTop=f.value*100}}),()=>pe("div",{style:{display:"flex"}},[pe("div",{ref:b,style:{marginRight:"20px",minWidth:"220px",display:"flex",flexDirection:"column",gap:"10px",maxHeight:"800px",overflow:"auto",marginTop:"26px",scrollMargin:"20px",scrollBehavior:"smooth"}},[w.value.length&&w.value.map(k=>pe("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},[pe("img",{src:k.url,width:150,height:150,alt:"",style:{border:`${k.imageId===w.value[f.value].imageId?"3px dashed red":"None"}`}},null)]))]),pe("div",null,[pe("div",null,[T.value.length&&T.value.map(k=>pe("button",{style:{cursor:"pointer",border:`${k.color!=="unset"?"2px dashed red":""}`},onClick:()=>typeof k.clickfn=="function"?k.clickfn():l.value=k.value},[k.name])),pe("div",{id:"container",ref:"stageRef",style:{backgroundColor:"transparent",border:"1px dashed black",width:"800px",height:"800px"}},null)]),pe("div",null,[y.value.length&&y.value.map(k=>pe("button",{style:{border:`2px dashed ${k.color}`,borderLeftWidth:"4px",cursor:"pointer",backgroundColor:`${x.value==k.id?k.color:""}`},onClick:()=>x.value=k.id},[k.name]))])]),pe("div",{style:{marginTop:"26px",marginLeft:"20px",display:"flex",flexDirection:"column"}},[v.value.length>0&&v.value.map(k=>{var K;return pe("div",null,[pe("button",{style:{borderColor:"none",backgroundColor:`${j(((K=M(k.tagId))==null?void 0:K.color)||"#000")}`},onClick:()=>O(k)},[k.type,Qc(" "),k.labelId])])})])])}});rd(Xd).mount("#app");
